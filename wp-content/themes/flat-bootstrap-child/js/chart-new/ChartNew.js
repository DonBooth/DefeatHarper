function lineStyleFn(e){return"object"==typeof chartJSLineStyle[e]?chartJSLineStyle[e]:chartJSLineStyle.solid}function roundToWithThousands(e,a,t){var i=1*unFormat(e,a);if("number"==typeof i&&"none"!=t)if(0>=t){var l=-t;i=+(Math.round(i+"e+"+l)+"e-"+l)}else{var l=t,n="1e+"+l;i=+Math.round(i/n)*n}return i=fmtChartJS(e,i,"none")}function unFormat(e,a){if("."==e.decimalSeparator&&""==e.thousandSeparator||"string"!=typeof a)return a;var t=""+a;if(""!=e.thousandSeparator)for(;t.indexOf(e.thousandSeparator)>=0;)t=""+t.replace(e.thousandSeparator,"");return"."!=e.decimalSeparator&&(t=""+t.replace(e.decimalSeparator,".")),1*t}function fmtChartJSPerso(e,a,t){switch(t){case"SampleJS_Format":return_value="number"==typeof a?"My Format : "+a.toString()+" $":a+"XX";break;case"Change_Month":return_value="string"==typeof a?a.toString()+" 2014":a.toString()+"YY";break;default:return_value=a}return return_value}function fmtChartJS(e,a,t){var i;if("notformatted"==t)i=a;else if("none"==t&&"number"==typeof a){if("none"!=e.roundNumber)if(e.roundNumber<=0){var l=-e.roundNumber;a=+(Math.round(a+"e+"+l)+"e-"+l)}else{var l=e.roundNumber,n="1e+"+l;a=+Math.round(a/n)*n}if("."!=e.decimalSeparator||""!=e.thousandSeparator){if(i=a.toString().replace(/\./g,e.decimalSeparator),""!=e.thousandSeparator){var o=i,s="",r=o.indexOf(e.decimalSeparator);r>=0&&(s=o.substring(r+1,o.length),s=s.split("").reverse().join(""),o=o.substring(0,r)),o=o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,e.thousandSeparator),s=s.split("").reverse().join(""),i=o,""!=s&&(i=i+e.decimalSeparator+s)}}else i=a}else i="none"!=t&&"notformatted"!=t?fmtChartJSPerso(e,a,t):a;return i}function addParameters2Function(data,fctName,fctList){var mathFunctions={mean:{data:data.data,datasetNr:data.v11},varianz:{data:data.data,datasetNr:data.v11},stddev:{data:data.data,datasetNr:data.v11},cv:{data:data.data,datasetNr:data.v11},median:{data:data.data,datasetNr:data.v11}};if(dif=!1,"Dif"==fctName.substr(-3)&&(fctName=fctName.substr(0,fctName.length-3),dif=!0),"function"==typeof eval(fctName)){var parameter=eval(fctList+"."+fctName);return dif?data.v3-window[fctName](parameter):window[fctName](parameter)}}function isNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)}function tmplbis(e,a,t){return newstr=e,newstr.substr(0,t.templatesOpenTag.length)==t.templatesOpenTag&&(newstr="<%="+newstr.substr(t.templatesOpenTag.length,newstr.length-t.templatesOpenTag.length)),newstr.substr(newstr.length-t.templatesCloseTag.length,t.templatesCloseTag.length)==t.templatesCloseTag&&(newstr=newstr.substr(0,newstr.length-t.templatesCloseTag.length)+"%>"),tmplter(newstr,a)}function tmplter(e,a){for(var t=["mean","varianz","stddev","cv","median"],i=new RegExp("<%=((?:(?:.*?)\\W)??)((?:"+t.join("|")+")(?:Dif)?)\\(([0-9]*?)\\)(.*?)%>","g");i.test(e);)e=e.replace(i,function(e,t,i,l,n){if(l)var o=l;else var o=2;var s=addParameters2Function(a,i,"mathFunctions");return isNumber(s)?"<%="+t+Math.round(Math.pow(10,o)*s)/Math.pow(10,o)+n+"%>":"<%= %>"});var l=/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(e)?cachebis[e]=cachebis[e]||tmplter(document.getElementById(e).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\n]/g,"\\n").replace(/[\t]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return a?l(a):l}function createCursorDiv(){if(0==cursorDivCreated){var e=document.createElement("divCursor");e.id="divCursor",e.style.position="absolute",document.body.appendChild(e),cursorDivCreated=!0}}function addResponsiveChart(e,a,t,i){initChartResize();var l=resizeGraph(a,i);"undefined"!=typeof a.prevWidth&&(resizeCtx(a,l.newWidth,l.newHeight),a.prevWidth=l.newWidth),a.prevWidth=l.newWidth,a.prevHeight=l.newHeight,jsGraphResize[jsGraphResize.length]=[e,a.tpchart,a,t,i]}function initChartResize(){0==initChartJsResize&&(window.addEventListener?window.addEventListener("resize",chartJsResize):window.attachEvent("resize",chartJsResize))}function getMaximumWidth(e){var a=e.parentNode;return a.clientWidth}function getMaximumHeight(e){var a=e.parentNode;return a.clientHeight}function resizeCtx(e,a,t){window.devicePixelRatio?(e.canvas.style.width=a/window.devicePixelRatio+"px",e.canvas.style.height=t/window.devicePixelRatio+"px",e.canvas.height=t/window.devicePixelRatio*window.devicePixelRatio,e.canvas.width=a/window.devicePixelRatio*window.devicePixelRatio,e.scale(window.devicePixelRatio,window.devicePixelRatio)):(e.canvas.height=t,e.canvas.width=a)}function resizeGraph(e,a){"undefined"==typeof a.maintainAspectRatio&&(a.maintainAspectRatio=!0),"undefined"==typeof a.responiveMinWidth&&(a.responsiveMinWidth=0),"undefined"==typeof a.responsiveMinHeight&&(a.responsiveMinHeight=0),"undefined"==typeof a.responsiveMaxWidth&&(a.responsiveMaxWidth=9999999),"undefined"==typeof a.responsiveMaxHeight&&(a.responsiveMaxHeight=9999999);var t=e.canvas;"undefined"==typeof e.aspectRatio&&(e.aspectRatio=t.width/t.height);var i=getMaximumWidth(t),l=a.maintainAspectRatio?i/e.aspectRatio:getMaximumHeight(t);return i=Math.min(a.responsiveMaxWidth,Math.max(a.responsiveMinWidth,i)),l=Math.min(a.responsiveMaxHeight,Math.max(a.responsiveMinHeight,l)),{newWidth:parseInt(i),newHeight:parseInt(l)}}function chartJsResize(){for(var e=0;e<jsGraphResize.length;e++)"undefined"!=typeof jsGraphResize[e][2].firstPass&&5==jsGraphResize[e][2].firstPass&&(jsGraphResize[e][2].firstPass=6),subUpdateChart(jsGraphResize[e][2],jsGraphResize[e][3],jsGraphResize[e][4])}function testRedraw(e,a,t){return 2==e.firstPass||4==e.firstPass||9==e.firstPass?(e.firstPass=6,subUpdateChart(e,a,t),!0):(e.firstPass=5,!1)}function updateChart(e,a,t,i,l){5==e.firstPass&&(e.runanimationcompletefunction=l,e.firstPass=i?0:(t.responsive,7),subUpdateChart(e,a,t))}function subUpdateChart(e,a,t){if(dynamicFunction(a,t,e))if("undefined"==typeof e.firstPass){e.firstPass=1;var i=resizeGraph(e,t);t.responsive?(resizeCtx(e,i.newWidth,i.newHeight),e.prevWidth=i.newWidth,e.prevHeight=i.newHeight):(e.prevWidth=0,e.prevHeight=0),e.runanimationcompletefunction=!0,redrawGraph(e,a,t)}else if(0==e.firstPass){e.firstPass=1;var i=resizeGraph(e,t);t.responsive?(resizeCtx(e,i.newWidth,i.newHeight),e.prevWidth=i.newWidth,e.prevHeight=i.newHeight):(e.prevWidth=0,e.prevHeight=0),redrawGraph(e,a,t)}else if(1==e.firstPass||2==e.firstPass)e.firstPass=2;else if(3==e.firstPass||4==e.firstPass)e.firstPass=4;else if(5==e.firstPass)e.firstPass=1,redrawGraph(e,a,t);else if(6==e.firstPass){var i=resizeGraph(e,t);i.newWidth!=e.prevWidth||i.newHeight!=e.prevHeight?(e.firstPass=3,e.clearRect(0,0,e.canvas.width,e.canvas.height),t.responsive?(resizeCtx(e,i.newWidth,i.newHeight),e.prevWidth=i.newWidth,e.prevHeight=i.newHeight):(e.prevWidth=0,e.prevHeight=0),redrawGraph(e,a,t)):e.firstPass=5}else if(7==e.firstPass){var i=resizeGraph(e,t);e.firstPass=3,e.clearRect(0,0,e.canvas.width,e.canvas.height),t.responsive?(resizeCtx(e,i.newWidth,i.newHeight),e.prevWidth=i.newWidth,e.prevHeight=i.newHeight):(e.prevWidth=0,e.prevHeight=0),redrawGraph(e,a,t)}}function redrawGraph(e,a,t){var i=new Chart(e);switch(e.tpchart){case"Bar":i.Bar(a,t);break;case"Pie":i.Pie(a,t);break;case"Doughnut":i.Doughnut(a,t);break;case"Radar":i.Radar(a,t);break;case"PolarArea":i.PolarArea(a,t);break;case"HorizontalBar":i.HorizontalBar(a,t);break;case"StackedBar":i.StackedBar(a,t);break;case"HorizontalStackedBar":i.HorizontalStackedBar(a,t);break;case"Line":i.Line(a,t)}}function checkBrowser(){return this.ver=navigator.appVersion,this.dom=document.getElementById?1:0,this.ie5=this.ver.indexOf("MSIE 5")>-1&&this.dom?1:0,this.ie4=document.all&&!this.dom?1:0,this.ns5=this.dom&&parseInt(this.ver)>=5?1:0,this.ns4=document.layers&&!this.dom?1:0,this.bw=this.ie5||this.ie4||this.ns4||this.ns5,this}function cursorInit(){scrolled=bw.ns4||bw.ns5?"window.pageYOffset":"document.body.scrollTop",bw.ns4&&document.captureEvents(Event.MOUSEMOVE)}function makeCursorObj(obj,nest){return createCursorDiv(),nest=nest?"document."+nest+".":"",this.css=bw.dom?document.getElementById(obj).style:bw.ie4?document.all[obj].style:bw.ns4?eval(nest+"document.layers."+obj):0,this.moveIt=b_moveIt,cursorInit(),this}function b_moveIt(e,a){this.x=e,this.y=a,this.css.left=this.x+"px",this.css.top=this.y+"px"}function isIE(){var e=navigator.userAgent.toLowerCase();return-1!=e.indexOf("msie")?parseInt(e.split("msie")[1]):!1}function mergeChartConfig(e,a){var t={};for(var i in e)t[i]=e[i];for(var i in a)t[i]=a[i];return t}function sleep(e){var a=new Date;for(a.setTime(a.getTime()+e);(new Date).getTime()<a.getTime(););}function saveCanvas(e,a,t){cvSave=e.getImageData(0,0,e.canvas.width,e.canvas.height);var i={savePng:!1,annotateDisplay:!1,animation:!1,dynamicDisplay:!1},l=mergeChartConfig(t,i);if(l.clearRect=!1,redrawGraph(e,a,l),"NewWindow"==t.savePngOutput){var n=e.canvas.toDataURL();e.putImageData(cvSave,0,0),window.open(n,"_blank")}if("CurrentWindow"==t.savePngOutput){var n=e.canvas.toDataURL();e.putImageData(cvSave,0,0),window.location.href=n}if("Save"==t.savePngOutput){var n=e.canvas.toDataURL(),o=document.createElement("a");o.href=n,o.download=t.savePngName+".png",document.body.appendChild(o),o.click(),document.body.removeChild(o)}}function dynamicFunction(e,a,t){if(isIE()<9&&0!=isIE())return!0;if(a.dynamicDisplay){if(""==t.canvas.id){var i=new Date,l=i.getTime();t.canvas.id="Canvas_"+l}if("undefined"==typeof dynamicDisplay[t.canvas.id]?(dynamicDisplayList[dynamicDisplayList.length]=t.canvas.id,dynamicDisplay[t.canvas.id]=[t,!1,!1,e,a,t.canvas],dynamicDisplay[t.canvas.id][1]=isScrolledIntoView(t.canvas),window.onscroll=scrollFunction):0==dynamicDisplay[t.canvas.id][2]&&(dynamicDisplay[t.canvas.id][1]=isScrolledIntoView(t.canvas)),0==dynamicDisplay[t.canvas.id][1]&&0==dynamicDisplay[t.canvas.id][2])return!1;dynamicDisplay[t.canvas.id][2]=!0}return!0}function isScrolledIntoView(e){var a=0,t=0;for(elem=e;elem;)a+=elem.offsetLeft-elem.scrollLeft+elem.clientLeft,t+=elem.offsetTop-elem.scrollTop+elem.clientTop,elem=elem.offsetParent;return a+e.width/2>=window.pageXOffset&&a+e.width/2<=window.pageXOffset+window.innerWidth&&t+e.height/2>=window.pageYOffset&&t+e.height/2<=window.pageYOffset+window.innerHeight?!0:!1}function scrollFunction(){for(var e=0;e<dynamicDisplayList.length;e++)isScrolledIntoView(dynamicDisplay[dynamicDisplayList[e]][5])&&0==dynamicDisplay[dynamicDisplayList[e]][2]&&(dynamicDisplay[dynamicDisplayList[e]][1]=!0,redrawGraph(dynamicDisplay[dynamicDisplayList[e]][0],dynamicDisplay[dynamicDisplayList[e]][3],dynamicDisplay[dynamicDisplayList[e]][4]))}function clearAnnotate(e){jsGraphAnnotate[e]=[]}function getMousePos(e,a){var t=e.getBoundingClientRect();return{x:a.clientX-t.left,y:a.clientY-t.top}}function doMouseAction(config,ctx,event,data,action,funct){var onData=!1,textMsr;if("annotate"==action){var annotateDIV=document.getElementById("divCursor"),show=!1;annotateDIV.className=config.annotateClassName?config.annotateClassName:"",annotateDIV.style.border=config.annotateClassName?"":config.annotateBorder,annotateDIV.style.padding=config.annotateClassName?"":config.annotatePadding,annotateDIV.style.borderRadius=config.annotateClassName?"":config.annotateBorderRadius,annotateDIV.style.backgroundColor=config.annotateClassName?"":config.annotateBackgroundColor,annotateDIV.style.color=config.annotateClassName?"":config.annotateFontColor,annotateDIV.style.fontFamily=config.annotateClassName?"":config.annotateFontFamily,annotateDIV.style.fontSize=config.annotateClassName?"":config.annotateFontSize+"pt",annotateDIV.style.fontStyle=config.annotateClassName?"":config.annotateFontStyle,annotateDIV.style.zIndex=999,ctx.save(),ctx.font=annotateDIV.style.fontStyle+" "+annotateDIV.style.fontSize+" "+annotateDIV.style.fontFamily;var rect=ctx.canvas.getBoundingClientRect()}"annotate"==action&&(show=!1,annotateDIV.style.display=show?"":"none"),canvas_pos=getMousePos(ctx.canvas,event);for(var i=0;i<jsGraphAnnotate[ctx.ChartNewId].length;i++){if("ARC"==jsGraphAnnotate[ctx.ChartNewId][i][0])myStatData=jsGraphAnnotate[ctx.ChartNewId][i][3][jsGraphAnnotate[ctx.ChartNewId][i][1]],distance=Math.sqrt((canvas_pos.x-myStatData.midPosX)*(canvas_pos.x-myStatData.midPosX)+(canvas_pos.y-myStatData.midPosY)*(canvas_pos.y-myStatData.midPosY)),distance>myStatData.int_radius&&distance<myStatData.radiusOffset&&(angle=(Math.acos((canvas_pos.x-myStatData.midPosX)/distance)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),canvas_pos.y<myStatData.midPosY&&(angle=-angle),angle=((angle+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),myStatData.startAngle=((myStatData.startAngle+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),myStatData.endAngle=((myStatData.endAngle+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),myStatData.endAngle<myStatData.startAngle&&(myStatData.endAngle+=2*Math.PI),(angle>myStatData.startAngle&&angle<myStatData.endAngle||angle>myStatData.startAngle-2*Math.PI&&angle<myStatData.endAngle-2*Math.PI||angle>myStatData.startAngle+2*Math.PI&&angle<myStatData.endAngle+2*Math.PI)&&(myStatData.graphPosX=canvas_pos.x,myStatData.graphPosY=canvas_pos.y,onData=!0,"annotate"==action?(dispString=tmplbis(setOptionValue("ANNOTATELABEL",ctx,data,jsGraphAnnotate[ctx.ChartNewId][i][3],void 0,config.annotateLabel,jsGraphAnnotate[ctx.ChartNewId][i][1],-1,{otherVal:!0}),myStatData,config),textMsr=ctx.measureTextMultiLine(dispString),ctx.restore(),annotateDIV.innerHTML=dispString,show=!0):funct(event,ctx,config,data,myStatData),"annotate"==action&&(x=bw.ns4||bw.ns5?event.pageX:event.x,y=bw.ns4||bw.ns5?event.pageY:event.y,(bw.ie4||bw.ie5)&&(y+=eval(scrolled)),config.annotateRelocate&&x+fromLeft+textMsr.textWidth>window.innerWidth-rect.left-10?oCursor.moveIt(x+fromLeft-textMsr.textWidth,y+fromTop):oCursor.moveIt(x+fromLeft,y+fromTop))));else if("RECT"==jsGraphAnnotate[ctx.ChartNewId][i][0])myStatData=jsGraphAnnotate[ctx.ChartNewId][i][3][jsGraphAnnotate[ctx.ChartNewId][i][1]][jsGraphAnnotate[ctx.ChartNewId][i][2]],canvas_pos.x>Math.min(myStatData.xPosLeft,myStatData.xPosRight)&&canvas_pos.x<Math.max(myStatData.xPosLeft,myStatData.xPosRight)&&canvas_pos.y<Math.max(myStatData.yPosBottom,myStatData.yPosTop)&&canvas_pos.y>Math.min(myStatData.yPosBottom,myStatData.yPosTop)&&(myStatData.graphPosX=canvas_pos.x,myStatData.graphPosY=canvas_pos.y,onData=!0,"annotate"==action?(dispString=tmplbis(setOptionValue("ANNOTATELABEL",ctx,data,jsGraphAnnotate[ctx.ChartNewId][i][3],void 0,config.annotateLabel,jsGraphAnnotate[ctx.ChartNewId][i][1],jsGraphAnnotate[ctx.ChartNewId][i][2],{otherVal:!0}),myStatData,config),textMsr=ctx.measureTextMultiLine(dispString),ctx.restore(),annotateDIV.innerHTML=dispString,show=!0):funct(event,ctx,config,data,myStatData),"annotate"==action&&(x=bw.ns4||bw.ns5?event.pageX:event.x,y=bw.ns4||bw.ns5?event.pageY:event.y,(bw.ie4||bw.ie5)&&(y+=eval(scrolled)),config.annotateRelocate&&x+fromLeft+textMsr.textWidth>window.innerWidth-rect.left-10?oCursor.moveIt(x+fromLeft-textMsr.textWidth,y+fromTop):oCursor.moveIt(x+fromLeft,y+fromTop)));else if("POINT"==jsGraphAnnotate[ctx.ChartNewId][i][0]){myStatData=jsGraphAnnotate[ctx.ChartNewId][i][3][jsGraphAnnotate[ctx.ChartNewId][i][1]][jsGraphAnnotate[ctx.ChartNewId][i][2]];var distance;if(config.detectAnnotateOnFullLine)if(canvas_pos.x<Math.min(myStatData.annotateStartPosX,myStatData.annotateEndPosX)-config.pointHitDetectionRadius||canvas_pos.x>Math.max(myStatData.annotateStartPosX,myStatData.annotateEndPosX)+config.pointHitDetectionRadius||canvas_pos.y<Math.min(myStatData.annotateStartPosY,myStatData.annotateEndPosY)-config.pointHitDetectionRadius||canvas_pos.y>Math.max(myStatData.annotateStartPosY,myStatData.annotateEndPosY)+config.pointHitDetectionRadius)distance=config.pointHitDetectionRadius+1;else if("undefined"==typeof myStatData.D1A)distance=Math.abs(canvas_pos.x-myStatData.posX);else if("undefined"==typeof myStatData.D2A)distance=Math.abs(canvas_pos.y-myStatData.posY);else{var D2B=-myStatData.D2A*canvas_pos.x+canvas_pos.y,g=-(myStatData.D1B-D2B)/(myStatData.D1A-myStatData.D2A),h=myStatData.D2A*g+D2B;distance=Math.sqrt((canvas_pos.x-g)*(canvas_pos.x-g)+(canvas_pos.y-h)*(canvas_pos.y-h))}else distance=Math.sqrt((canvas_pos.x-myStatData.posX)*(canvas_pos.x-myStatData.posX)+(canvas_pos.y-myStatData.posY)*(canvas_pos.y-myStatData.posY));distance<config.pointHitDetectionRadius&&(myStatData.graphPosX=canvas_pos.x,myStatData.graphPosY=canvas_pos.y,onData=!0,"annotate"==action?(dispString=tmplbis(setOptionValue("ANNOTATELABEL",ctx,data,jsGraphAnnotate[ctx.ChartNewId][i][3],void 0,config.annotateLabel,jsGraphAnnotate[ctx.ChartNewId][i][1],jsGraphAnnotate[ctx.ChartNewId][i][2],{otherVal:!0}),myStatData,config),textMsr=ctx.measureTextMultiLine(dispString),ctx.restore(),annotateDIV.innerHTML=dispString,show=!0):funct(event,ctx,config,data,myStatData),"annotate"==action&&(x=bw.ns4||bw.ns5?event.pageX:event.x,y=bw.ns4||bw.ns5?event.pageY:event.y,(bw.ie4||bw.ie5)&&(y+=eval(scrolled)),config.annotateRelocate&&x+fromLeft+textMsr.textWidth>window.innerWidth-rect.left-10?oCursor.moveIt(x+fromLeft-textMsr.textWidth,y+fromTop):oCursor.moveIt(x+fromLeft,y+fromTop)))}"annotate"==action&&(annotateDIV.style.display=show?"":"none")}0==onData&&"annotate"!=action&&funct(event,ctx,config,data,null)}function animationCorrection(e,a,t,i,l,n){var o=e,s=0;if(-1!=l){1>o&&i<t.animationStartWithDataset-1&&t.animationStartWithDataset-1!=-1&&(o=1),1>o&&l<t.animationStartWithData-1&&t.animationStartWithData-1!=-1&&(o=1);var r=1,d=e;if(1>o&&t.animationByDataset){o=0,r=0;var c=t.animationStartWithDataset-1;t.animationStartWithDataset-1==-1&&(c=0);var u=t.animationSteps/(a.datasets.length-c);if(e>=(i-c+1)*u/t.animationSteps)o=1;else if(e>=(i-c)*u/t.animationSteps){var h=e-(i-c)*u/t.animationSteps;t.animationLeftToRight?d=h*(a.datasets.length-c):o=h*(a.datasets.length-c),r=1}}if(1==r&&1>o&&t.animationLeftToRight){o=0;var p=t.animationStartWithData-1;t.animationStartWithData-1==-1&&(p=0);var g=t.animationSteps/(a.datasets[i].data.length-p-1+n);d>=(l-p)*g/t.animationSteps&&(o=1,d<=(l+1-p)*g/t.animationSteps&&(s=(a.datasets[i].data.length-p-1)*(d-(l-p)*g/t.animationSteps)))}}else 1>o&&i<t.animationStartWithData-1&&(o=1);return{mainVal:o,subVal:s,animVal:o+s}}function drawLegend(e,a,t,i){1==t.legendBorders&&(i.save(),i.setLineDash(lineStyleFn(t.legendBordersStyle)),i.beginPath(),i.lineWidth=t.legendBordersWidth,i.strokeStyle=t.legendBordersColors,i.moveTo(e.xLegendBorderPos,e.yLegendBorderPos),i.lineTo(e.xLegendBorderPos,e.yLegendBorderPos+e.legendBorderHeight),i.lineTo(e.xLegendBorderPos+e.legendBorderWidth,e.yLegendBorderPos+e.legendBorderHeight),i.lineTo(e.xLegendBorderPos+e.legendBorderWidth,e.yLegendBorderPos),i.lineTo(e.xLegendBorderPos,e.yLegendBorderPos),i.stroke(),i.closePath(),i.setLineDash([]),i.fillStyle="rgba(0,0,0,0)",i.fillStyle=t.legendFillColor,i.fill(),i.restore()),nbcols=e.nbLegendCols-1,ypos=e.yFirstLegendTextPos-(t.legendFontSize+t.legendSpaceBetweenTextVertical),xpos=0,fromi=e.drawLegendOnData?a.datasets.length:a.length;for(var l=fromi-1;l>=0;l--)if(orderi=l,e.reverseLegend&&(orderi=e.drawLegendOnData?a.datasets.length-l-1:a.length-l-1),tpof=e.drawLegendOnData?typeof a.datasets[orderi].title:typeof a[orderi].title,"string"==tpof&&(lgtxt=e.drawLegendOnData?fmtChartJS(t,a.datasets[orderi].title,t.fmtLegend).trim():fmtChartJS(t,a[orderi].title,t.fmtLegend).trim(),""!=lgtxt)){nbcols++,nbcols==e.nbLegendCols?(nbcols=0,xpos=e.xFirstLegendTextPos,ypos+=t.legendFontSize+t.legendSpaceBetweenTextVertical):xpos+=e.widestLegend+t.legendSpaceBetweenTextHorizontal,i.save(),i.beginPath();var n=e.legendBox;if("Bar"==i.tpchart&&("Line"!=a.datasets[orderi].type||t.datasetFill||(n=!1)),n)i.lineWidth=t.datasetStrokeWidth,i.beginPath(),e.drawLegendOnData?(i.strokeStyle=setOptionValue("LEGENDSTROKECOLOR",i,a,void 0,a.datasets[orderi].strokeColor,t.defaultFillColor,orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+t.legendBlockSize,yPosTop:ypos-t.legendFontSize}),i.setLineDash(lineStyleFn(setOptionValue("LEGENDLINEDASH",i,a,void 0,a.datasets[orderi].datasetStrokeStyle,t.datasetStrokeStyle,orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+t.legendBlockSize,yPosTop:ypos-t.legendFontSize})))):(i.strokeStyle=setOptionValue("LEGENDSTROKECOLOR",i,a,void 0,a[orderi].strokeColor,t.defaultFillColor,orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+t.legendBlockSize,yPosTop:ypos-t.legendFontSize}),i.setLineDash(lineStyleFn(setOptionValue("LEGENDSEGMENTTROKESTYLE",i,a,void 0,a[orderi].segmentStrokeStyle,t.segmentStrokeStyle,orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+t.legendBlockSize,yPosTop:ypos-t.legendFontSize})))),i.moveTo(xpos,ypos),i.lineTo(xpos+t.legendBlockSize,ypos),i.lineTo(xpos+t.legendBlockSize,ypos-t.legendFontSize),i.lineTo(xpos,ypos-t.legendFontSize),i.lineTo(xpos,ypos),i.stroke(),i.closePath(),i.fillStyle=e.drawLegendOnData?setOptionValue("LEGENDFILLCOLOR",i,a,void 0,a.datasets[orderi].fillColor,t.defaultFillColor,orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+t.legendBlockSize,yPosTop:ypos-t.legendFontSize}):setOptionValue("LEGENDFILLCOLOR",i,a,void 0,a[orderi].color,t.defaultFillColor,orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+t.legendBlockSize,yPosTop:ypos-t.legendFontSize}),i.fill();else{if(i.lineWidth=t.legendColorIndicatorStrokeWidth?t.legendColorIndicatorStrokeWidth:t.datasetStrokeWidth,t.legendColorIndicatorStrokeWidth&&t.legendColorIndicatorStrokeWidth>t.legendFontSize&&(i.lineWidth=t.legendFontSize),e.drawLegendOnData?(i.strokeStyle=setOptionValue("LEGENDSTROKECOLOR",i,a,void 0,a.datasets[orderi].strokeColor,t.defaultFillColor,orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+t.legendBlockSize,yPosTop:ypos-t.legendFontSize}),i.setLineDash(lineStyleFn(setOptionValue("LEGENDLINEDASH",i,a,void 0,a.datasets[orderi].datasetStrokeStyle,t.datasetStrokeStyle,orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+t.legendBlockSize,yPosTop:ypos-t.legendFontSize})))):(i.strokeStyle=setOptionValue("LEGENDSTROKECOLOR",i,a,void 0,a[orderi].strokeColor,t.defaultFillColor,orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+t.legendBlockSize,yPosTop:ypos-t.legendFontSize}),i.setLineDash(lineStyleFn(setOptionValue("LEGENDSEGMENTTROKESTYLE",i,a,void 0,a[orderi].segmentStrokeStyle,t.segmentStrokeStyle,orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+t.legendBlockSize,yPosTop:ypos-t.legendFontSize})))),i.moveTo(xpos+2,ypos-t.legendFontSize/2),i.lineTo(xpos+2+t.legendBlockSize,ypos-t.legendFontSize/2),i.stroke(),i.fill(),t.pointDot){i.beginPath(),i.fillStyle=setOptionValue("LEGENDMARKERFILLCOLOR",i,a,void 0,a.datasets[orderi].pointColor,t.defaultStrokeColor,orderi,-1,{nullvalue:!0}),i.strokeStyle=setOptionValue("LEGENDMARKERSTROKESTYLE",i,a,void 0,a.datasets[orderi].pointStrokeColor,t.defaultStrokeColor,orderi,-1,{nullvalue:!0}),i.lineWidth=setOptionValue("LEGENDMARKERLINEWIDTH",i,a,void 0,a.datasets[orderi].pointDotStrokeWidth,t.pointDotStrokeWidth,orderi,-1,{nullvalue:!0});var o=setOptionValue("LEGENDMARKERSHAPE",i,a,void 0,a.datasets[orderi].markerShape,t.markerShape,orderi,-1,{nullvalue:!0}),s=setOptionValue("LEGENDMARKERRADIUS",i,a,void 0,a.datasets[orderi].pointDotRadius,t.pointDotRadius,orderi,-1,{nullvalue:!0}),r=setOptionValue("LEGENDMARKERSTROKESTYLE",i,a,void 0,a.datasets[orderi].pointDotStrokeStyle,t.pointDotStrokeStyle,orderi,-1,{nullvalue:!0});drawMarker(i,xpos+2+t.legendBlockSize/2,ypos-t.legendFontSize/2,o,s,r)}i.fill()}i.restore(),i.save(),i.beginPath(),i.font=t.legendFontStyle+" "+t.legendFontSize+"px "+t.legendFontFamily,i.fillStyle=setOptionValue("LEGENDFONTCOLOR",i,a,void 0,void 0,t.legendFontColor,orderi,-1,{nullvalue:!0}),i.textAlign="left",i.textBaseline="bottom",i.translate(xpos+t.legendBlockSize+t.legendSpaceBetweenBoxAndText,ypos),i.fillText(lgtxt,0,0),i.restore()}}function drawMarker(e,a,t,i,l,n){switch(e.setLineDash(lineStyleFn(n)),i){case"square":e.rect(a-l,t-l,2*l,2*l),e.stroke(),e.fill(),e.setLineDash([]);break;case"triangle":pointA_x=0,pointA_y=2/3*l,e.moveTo(a,t-pointA_y),e.lineTo(a+pointA_y*Math.sin(4/3),t+pointA_y*Math.cos(4/3)),e.lineTo(a-pointA_y*Math.sin(4/3),t+pointA_y*Math.cos(4/3)),e.lineTo(a,t-pointA_y),e.stroke(),e.fill(),e.setLineDash([]);break;case"diamond":e.moveTo(a,t+l),e.lineTo(a+l,t),e.lineTo(a,t-l),e.lineTo(a-l,t),e.lineTo(a,t+l),e.stroke(),e.fill(),e.setLineDash([]);break;case"plus":e.moveTo(a,t-l),e.lineTo(a,t+l),e.moveTo(a-l,t),e.lineTo(a+l,t),e.stroke(),e.setLineDash([]);break;case"cross":e.moveTo(a-l,t-l),e.lineTo(a+l,t+l),e.moveTo(a-l,t+l),e.lineTo(a+l,t-l),e.stroke(),e.setLineDash([]);break;case"circle":default:e.arc(a,t,l,0,2*Math.PI*1,!0),e.stroke(),e.fill(),e.setLineDash([])}}function initPassVariableData_part1(e,a,t){switch(t.tpchart){case"Pie":case"Doughnut":case"PolarArea":var i,l,n,o,s,r,d=[];s=((-a.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),r=((a.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),startAngle=s,l=0,notemptyval=0;for(var c=-1,u=-1,h=-1,p=-Number.MAX_VALUE,g=Number.MAX_VALUE,f=0;f<e.length;f++)"PolarArea"!=t.tpchart&&1*e[f].value<0||"undefined"!=typeof e[f].value&&(-1==c&&(c=f),p=Math.max(p,1*e[f].value),g=Math.min(g,1*e[f].value),notemptyval++,l+=1*e[f].value,u=f);n=0;var A=-1;for(f=0;f<e.length;f++)i="string"==typeof e[f].title?e[f].title.trim():"","undefined"!=typeof e[f].value&&("PolarArea"==t.tpchart||1*e[f].value>=0)?(o="PolarArea"==t.tpchart?notemptyval>0?2*Math.PI/notemptyval:0:1*e[f].value/l*2*Math.PI,o>=2*Math.PI&&(o=2*Math.PI-.001),n+=1*e[f].value,d[f]={config:a,v1:fmtChartJS(a,i,a.fmtV1),v2:fmtChartJS(a,1*e[f].value,a.fmtV2),v3:fmtChartJS(a,n,a.fmtV3),v4:fmtChartJS(a,l,a.fmtV4),v5:fmtChartJS(a,o,a.fmtV5),v6:roundToWithThousands(a,fmtChartJS(a,100*e[f].value/l,a.fmtV6),a.roundPct),v7:0,v8:0,v9:0,v10:0,v11:fmtChartJS(a,s-o,a.fmtV11),v12:fmtChartJS(a,s,a.fmtV12),v13:fmtChartJS(a,f,a.fmtV13),lgtxt:i,datavalue:1*e[f].value,cumvalue:n,totvalue:l,segmentAngle:o,firstAngle:startAngle,pctvalue:100*e[f].value/l,startAngle:s,realStartAngle:r,endAngle:s+o,maxvalue:p,minvalue:g,i:f,firstNotMissing:c,lastNotMissing:u,prevNotMissing:h,prevMissing:A,nextNotMissing:-1,radiusOffset:0,midPosX:0,midPosY:0,int_radius:0,ext_radius:0,data:e},s+=o,r-=o,-1!=h&&(d[h].nextNotMissing=f),h=f):(d[f]={v1:i,maxvalue:p,minvalue:g,i:f,firstNotMissing:c,lastNotMissing:u,prevNotMissing:h},A=f);break;case"Bar":case"Line":case"HorizontalBar":case"StackedBar":case"HorizontalStackedBar":case"Radar":var S,d=[],p=[];p[0]=[],p[1]=[];var g=[];g[0]=[],g[1]=[];var n=[];n[0]=[],n[1]=[];var l=[];l[0]=[],l[1]=[];var m=[];m[0]=[],m[1]=[];var v=[];v[0]=[],v[1]=[];var i,x,P=[],D=[],V=[],T=[],y=[];P[0]=[],P[1]=[];for(var L=0,f=0;f<e.datasets.length;f++){if("undefined"!=typeof e.datasets[f].xPos&&"Line"==tpdraw(t,e.datasets[f]))for(var b=e.datasets[f].data.length;b<e.datasets[f].xPos.length;b++)e.datasets[f].data.push(void 0);else for(var b=e.datasets[f].data.length;b<e.labels.length;b++)e.datasets[f].data.push(void 0);S=2==e.datasets[f].axis?0:1,d[f]=[],m[0][f]=-Number.MAX_VALUE,m[1][f]=-Number.MAX_VALUE,v[0][f]=Number.MAX_VALUE,v[1][f]=Number.MAX_VALUE,D[f]=-1,V[f]=-1;for(var b=0;b<e.datasets[f].data.length;b++)"undefined"==typeof T[b]&&(T[b]=-1,y[b]=-1,l[0][b]=0,p[0][b]=-Number.MAX_VALUE,g[0][b]=Number.MAX_VALUE,l[1][b]=0,p[1][b]=-Number.MAX_VALUE,g[1][b]=Number.MAX_VALUE),"undefined"!=typeof e.datasets[f].data[b]&&(L+=1*e.datasets[f].data[b],-1==D[f]&&(D[f]=b),V[f]=b,-1==T[b]&&(T[b]=f),y[b]=f,l[S][b]+=1*e.datasets[f].data[b],p[S][b]=Math.max(p[S][b],1*e.datasets[f].data[b]),g[S][b]=Math.min(g[S][b],1*e.datasets[f].data[b]),m[S][f]=Math.max(m[S][f],1*e.datasets[f].data[b]),v[S][f]=Math.min(v[S][f],1*e.datasets[f].data[b]))}for(var f=0;f<e.datasets.length;f++){S=2==e.datasets[f].axis?0:1,i="string"==typeof e.datasets[f].title?e.datasets[f].title.trim():"";for(var M=-1,I=-1,b=0;b<e.datasets[f].data.length;b++)if("undefined"==typeof n[0][b]&&(n[0][b]=0,P[0][b]=-1,n[1][b]=0,P[1][b]=-1),x="","undefined"!=typeof e.datasets[f].xPos&&"undefined"!=typeof e.datasets[f].xPos[b]&&(x=e.datasets[f].xPos[b]),""==x&&"undefined"!=typeof e.labels[b]&&(x=e.labels[b]),"string"==typeof x&&(x=x.trim()),"undefined"!=typeof e.datasets[f].data[b]){switch(n[S][b]+=1*e.datasets[f].data[b],tpdraw(t,e.datasets[f])){case"Bar":case"StackedBar":case"HorizontalBar":case"HorizontalStackedBar":d[f][b]={config:a,v1:fmtChartJS(a,i,a.fmtV1),v2:fmtChartJS(a,x,a.fmtV2),v3:fmtChartJS(a,1*e.datasets[f].data[b],a.fmtV3),v4:fmtChartJS(a,n[S][b],a.fmtV4),v5:fmtChartJS(a,l[S][b],a.fmtV5),v6:roundToWithThousands(a,fmtChartJS(a,100*e.datasets[f].data[b]/l[S][b],a.fmtV6),a.roundPct),v6T:roundToWithThousands(a,fmtChartJS(a,100*e.datasets[f].data[b]/L,a.fmtV6T),a.roundPct),v11:fmtChartJS(a,f,a.fmtV11),v12:fmtChartJS(a,b,a.fmtV12),lgtxt:i,lgtxt2:x,datavalue:1*e.datasets[f].data[b],cumvalue:n[S][b],totvalue:l[S][b],pctvalue:100*e.datasets[f].data[b]/l[S][b],pctvalueT:100*e.datasets[f].data[b]/L,maxvalue:p[S][b],minvalue:g[S][b],lmaxvalue:m[S][f],lminvalue:v[S][f],grandtotal:L,firstNotMissing:T[b],lastNotMissing:y[b],prevNotMissing:M,prevMissing:I,nextNotMissing:-1,j:b,i:f,data:e},1*e.datasets[f].data[b]!=0||"HorizontalStackedBar"!=tpdraw(t,e.datasets[f])&&"StackedBar"!=tpdraw(t,e.datasets[f])||(d[f][b].v3="");break;case"Line":case"Radar":d[f][b]={config:a,v1:fmtChartJS(a,i,a.fmtV1),v2:fmtChartJS(a,x,a.fmtV2),v3:fmtChartJS(a,1*e.datasets[f].data[b],a.fmtV3),v5:fmtChartJS(a,1*e.datasets[f].data[b],a.fmtV5),v6:fmtChartJS(a,p[S][b],a.fmtV6),v7:fmtChartJS(a,l[S][b],a.fmtV7),v8:roundToWithThousands(a,fmtChartJS(a,100*e.datasets[f].data[b]/l[S][b],a.fmtV8),a.roundPct),v8T:roundToWithThousands(a,fmtChartJS(a,100*e.datasets[f].data[b]/L,a.fmtV8T),a.roundPct),v11:fmtChartJS(a,f,a.fmtV11),v12:fmtChartJS(a,b,a.fmtV12),lgtxt:i,lgtxt2:x,datavalue:1*e.datasets[f].data[b],diffnext:1*e.datasets[f].data[b],pctvalue:100*e.datasets[f].data[b]/l[S][b],pctvalueT:100*e.datasets[f].data[b]/L,totvalue:l[S][b],cumvalue:n[S][b],maxvalue:p[S][b],minvalue:g[S][b],lmaxvalue:m[S][f],lminvalue:v[S][f],lminvalue:v[S][f],grandtotal:L,firstNotMissing:D[f],lastNotMissing:V[f],prevNotMissing:M,prevMissing:I,nextNotMissing:-1,j:b,i:f,data:e},P[S][b]>=0?(d[f][b].v4=fmtChartJS(a,-1!=P[S][b]?1*e.datasets[f].data[b]-d[P[S][b]][b].datavalue:1*e.datasets[f].data[b],a.fmtV4),d[f][b].diffprev=-1!=P[S][b]?1*e.datasets[f].data[b]-d[P[S][b]][b].datavalue:1*e.datasets[f].data[b],d[P[S][b]][b].diffnext=e.datasets[P[S][b]].data[b]-e.datasets[f].data[b],d[P[S][b]][b].v5=d[P[S][b]][b].diffnext):d[f][b].v4=1*e.datasets[f].data[b],P[S][b]=f}if("undefined"!=typeof e.datasets[f].data[b]){if(-1!=M)for(k=M;k<b;k++)d[f][k].nextNotMissing=b;M=b}}else switch(I=b,tpdraw(t,e.datasets[f])){case"Bar":case"StackedBar":case"HorizontalBar":case"HorizontalStackedBar":d[f][b]={v1:i,lmaxvalue:m[S][f],lminvalue:v[S][f],firstNotMissing:T[b],lastNotMissing:y[b],prevNotMissing:M,prevMissing:I,grandtotal:L};break;case"Line":case"Radar":d[f][b]={v1:i,lmaxvalue:m[S][f],lminvalue:v[S][f],firstNotMissing:D[f],lastNotMissing:V[f],prevNotMissing:M,prevMissing:I,grandtotal:L}}}}return d}function initPassVariableData_part2(e,a,t,i,l){function n(e,a,i,l,o,s){if("object"==typeof i.datasets[e].xPos&&"undefined"!=typeof i.datasets[e].xPos[Math.floor(a+t.zeroValue)]){var r=o*s,d="undefined"!=typeof i.xBegin?i.xBegin:1*i.labels[0],c="undefined"!=typeof i.xEnd?i.xEnd:1*i.labels[i.labels.length-1];if(d>=c&&(c=d+100),1*i.datasets[e].xPos[Math.floor(a+t.zeroValue)]>=d&&i.datasets[e].xPos[Math.floor(a+t.zeroValue)]<=c){var u=l+r*((1*i.datasets[e].xPos[Math.floor(a+t.zeroValue)]-d)/(c-d)),h=u;if(Math.abs(a-Math.floor(a+t.zeroValue))>t.zeroValue)var h=(a+Math.floor(a+t.zeroValue),n(e,Math.ceil(a-t.zeroValue),i));return u+(a-Math.floor(a+t.zeroValue))*(h-u)}}return l+o*a
}function o(e){return Math.floor(Math.log(e)/Math.LN10)}function s(e,a,t,i){if(e)return d(c(a)*i-o(t.graphMin)*i,void 0,0);var l=t.steps*t.stepValue,n=a-t.graphMin,s=d(n/l,1,0);return i*t.steps*s}function r(e,a,t){var i=a.steps*a.stepValue,l=e-a.graphMin,n=d(l/i,1,0);return t*a.steps*n}function d(e,a,t){return isNumber(a)&&e>a?a:isNumber(t)&&t>e?t:e}function c(e){return Math.log(e)/Math.LN10}var u=0;switch(i.tpchart){case"Pie":case"Doughnut":case"PolarArea":for(g=0;g<a.length;g++)e[g].v7=fmtChartJS(t,l.midPosX,t.fmtV7),e[g].v8=fmtChartJS(t,l.midPosY,t.fmtV8),e[g].v9=fmtChartJS(t,l.int_radius,t.fmtV9),e[g].v10=fmtChartJS(t,l.ext_radius,t.fmtV10),"PolarArea"==i.tpchart?(e[g].radiusOffset=s(t.logarithmic,1*a[g].value,l.calculatedScale,l.scaleHop),e[g].v10=fmtChartJS(t,e[g].radiusOffset,t.fmtV10)):(e[g].v10=fmtChartJS(t,l.ext_radius,t.fmtV10),e[g].radiusOffset=l.ext_radius),e[g].midPosX=l.midPosX,e[g].midPosY=l.midPosY,e[g].int_radius=l.int_radius,e[g].ext_radius=l.ext_radius;break;case"Radar":case"Line":case"Bar":case"StackedBar":case"HorizontalBar":case"HorizontalStackedBar":for(var h=new Array(a.datasets.length),p=new Array(a.datasets.length),g=0;g<a.datasets.length;g++)switch(tpdraw(i,a.datasets[g])){case"Line":for(var f=0;f<a.datasets[g].data.length;f++)e[g][f].xAxisPosY=l.xAxisPosY,e[g][f].yAxisPosX=l.yAxisPosX,e[g][f].valueHop=l.valueHop,e[g][f].nbValueHop=l.nbValueHop,2==a.datasets[g].axis?(e[g][f].scaleHop=l.scaleHop2,e[g][f].zeroY=l.zeroY2,e[g][f].calculatedScale=l.calculatedScale2,e[g][f].logarithmic=l.logarithmic2):(e[g][f].scaleHop=l.scaleHop,e[g][f].zeroY=l.zeroY,e[g][f].calculatedScale=l.calculatedScale,e[g][f].logarithmic=l.logarithmic),e[g][f].xPos=n(g,f,a,l.yAxisPosX,l.valueHop,l.nbValueHop),e[g][f].yAxisPos=l.xAxisPosY-e[g][f].zeroY,"Bar"==i.tpchart&&(e[g][f].xPos+=l.valueHop/2,e[g][f].yAxisPosX+=l.valueHop/2),0==f?(e[g][f].lmaxvalue_offset=s(e[g][f].logarithmic,e[g][f].lmaxvalue,e[g][f].calculatedScale,e[g][f].scaleHop)-e[g][f].zeroY,e[g][f].lminvalue_offset=s(e[g][f].logarithmic,e[g][f].lminvalue,e[g][f].calculatedScale,e[g][f].scaleHop)-e[g][f].zeroY):(e[g][f].lmaxvalue_offset=e[g][0].lmaxvalue_offset,e[g][f].lminvalue_offset=e[g][0].lminvalue_offset),"undefined"!=typeof a.datasets[g].data[f]&&(e[g][f].yPosOffset=s(e[g][f].logarithmic,a.datasets[g].data[f],e[g][f].calculatedScale,e[g][f].scaleHop)-e[g][f].zeroY,e[g][f].posY=e[g][f].yAxisPos-e[g][f].yPosOffset),e[g][f].posX=e[g][f].xPos,e[g][f].v9=e[g][f].xPos,e[g][f].v10=e[g][f].posY,e[g][f].annotateStartPosX=e[g][f].xPos,e[g][f].annotateEndPosX=e[g][f].xPos,e[g][f].annotateStartPosY=l.xAxisPosY,e[g][f].annotateEndPosY=l.xAxisPosY-l.msr.availableHeight,e[g][f].D1A=void 0,e[g][f].D1B=void 0;break;case"Radar":for(var A=2*Math.PI/a.datasets[0].data.length,f=0;f<a.datasets[g].data.length;f++)e[g][f].midPosX=l.midPosX,e[g][f].midPosY=l.midPosY,e[g][f].int_radius=0,e[g][f].ext_radius=l.maxSize,e[g][f].radiusOffset=l.maxSize,e[g][f].calculated_offset=s(t.logarithmic,a.datasets[g].data[f],l.calculatedScale,l.scaleHop),e[g][f].offsetX=Math.cos(t.startAngle*Math.PI/180-f*A)*e[g][f].calculated_offset,e[g][f].offsetY=Math.sin(t.startAngle*Math.PI/180-f*A)*e[g][f].calculated_offset,e[g][f].v9=e[g][f].midPosX+e[g][f].offsetX,e[g][f].v10=e[g][f].midPosY-e[g][f].offsetY,e[g][f].posX=e[g][f].midPosX+e[g][f].offsetX,e[g][f].posY=e[g][f].midPosY-e[g][f].offsetY,e[g][f].calculated_offset_max=0==f?s(t.logarithmic,e[g][f].lmaxvalue,l.calculatedScale,l.scaleHop):e[0][f].calculated_offset_max,e[g][f].annotateStartPosX=l.midPosX,e[g][f].annotateEndPosX=l.midPosX+Math.cos(t.startAngle*Math.PI/180-f*A)*l.maxSize,e[g][f].annotateStartPosY=l.midPosY,e[g][f].annotateEndPosY=l.midPosY-Math.sin(t.startAngle*Math.PI/180-f*A)*l.maxSize,Math.abs(e[g][f].annotateStartPosX-e[g][f].annotateEndPosX)<t.zeroValue?(e[g][f].D1A=void 0,e[g][f].D1B=void 0,e[g][f].D2A=0):(e[g][f].D1A=(e[g][f].annotateStartPosY-e[g][f].annotateEndPosY)/(e[g][f].annotateStartPosX-e[g][f].annotateEndPosX),e[g][f].D1B=-e[g][f].D1A*e[g][f].annotateStartPosX+e[g][f].annotateStartPosY,e[g][f].D2A=Math.abs(e[g][f].D1A)>=t.zeroValue?-(1/e[g][f].D1A):void 0);break;case"Bar":for(var f=0;f<a.datasets[g].data.length;f++)e[g][f].xPosLeft=l.yAxisPosX+t.barValueSpacing+l.valueHop*f+l.barWidth*u+t.barDatasetSpacing*u+t.barStrokeWidth*u,e[g][f].xPosRight=e[g][f].xPosLeft+l.barWidth,e[g][f].yPosBottom=l.xAxisPosY-l.zeroY,e[g][f].barHeight=s(t.logarithmic,1*a.datasets[g].data[f],l.calculatedScale,l.scaleHop)-l.zeroY,2==a.datasets[g].axis?(e[g][f].yPosBottom=l.xAxisPosY-l.zeroY2,e[g][f].barHeight=s(t.logarithmic2,1*a.datasets[g].data[f],l.calculatedScale2,l.scaleHop2)-l.zeroY2):(e[g][f].yPosBottom=l.xAxisPosY-l.zeroY,e[g][f].barHeight=s(t.logarithmic,1*a.datasets[g].data[f],l.calculatedScale,l.scaleHop)-l.zeroY),e[g][f].yPosTop=e[g][f].yPosBottom-e[g][f].barHeight+t.barStrokeWidth/2,e[g][f].v7=e[g][f].xPosLeft,e[g][f].v8=e[g][f].yPosBottom,e[g][f].v9=e[g][f].xPosRight,e[g][f].v10=e[g][f].yPosTop;u++;break;case"StackedBar":for(var f=0;f<a.datasets[g].data.length;f++)"undefined"==typeof h[f]&&(h[f]=0,p[f]=0,zeroY=s(t.logarithmic,0,l.calculatedScale,l.scaleHop)),"undefined"!=typeof a.datasets[g].data[f]&&(e[g][f].xPosLeft=l.yAxisPosX+t.barValueSpacing+l.valueHop*f,1*a.datasets[g].data[f]<0?(e[g][f].botval=p[f],e[g][f].topval=p[f]+1*a.datasets[g].data[f],p[f]=p[f]+1*a.datasets[g].data[f]):(e[g][f].botval=h[f],e[g][f].topval=h[f]+1*a.datasets[g].data[f],h[f]=h[f]+1*a.datasets[g].data[f]),e[g][f].xPosRight=e[g][f].xPosLeft+l.barWidth,e[g][f].botOffset=s(t.logarithmic,e[g][f].botval,l.calculatedScale,l.scaleHop),e[g][f].topOffset=s(t.logarithmic,e[g][f].topval,l.calculatedScale,l.scaleHop),e[g][f].yPosBottom=l.xAxisPosY-e[g][f].botOffset,e[g][f].yPosTop=l.xAxisPosY-e[g][f].topOffset,t.spaceBetweenBar>0&&(1*a.datasets[g].data[f]<0?(e[g][f].yPosBottom+=t.spaceBetweenBar,p[f]==1*a.datasets[g].data[f]&&(e[g][f].yPosBottom-=t.spaceBetweenBar/2),e[g][f].yPosTop<e[g][f].yPosBottom&&(e[g][f].yPosBottom=e[g][f].yPosTop)):1*a.datasets[g].data[f]>0&&(e[g][f].yPosBottom-=t.spaceBetweenBar,h[f]==1*a.datasets[g].data[f]&&(e[g][f].yPosBottom+=t.spaceBetweenBar/2),e[g][f].yPosTop>e[g][f].yPosBottom&&(e[g][f].yPosBottom=e[g][f].yPosTop))),e[g][f].v7=e[g][f].xPosLeft,e[g][f].v8=e[g][f].yPosBottom,e[g][f].v9=e[g][f].xPosRight,e[g][f].v10=e[g][f].yPosTop);break;case"HorizontalBar":for(var f=0;f<a.datasets[g].data.length;f++)e[g][f].xPosLeft=l.yAxisPosX+l.zeroY,e[g][f].yPosTop=l.xAxisPosY+t.barValueSpacing-l.scaleHop*(f+1)+l.barWidth*g+t.barDatasetSpacing*g+t.barStrokeWidth*g,e[g][f].yPosBottom=e[g][f].yPosTop+l.barWidth,e[g][f].barWidth=s(t.logarithmic,1*a.datasets[g].data[f],l.calculatedScale,l.valueHop)-l.zeroY,e[g][f].xPosRight=e[g][f].xPosLeft+e[g][f].barWidth,e[g][f].v7=e[g][f].xPosLeft,e[g][f].v8=e[g][f].yPosBottom,e[g][f].v9=e[g][f].xPosRight,e[g][f].v10=e[g][f].yPosTop;break;case"HorizontalStackedBar":for(var f=0;f<a.datasets[g].data.length;f++)0==g&&(h[f]=0,p[f]=0),"undefined"!=typeof a.datasets[g].data[f]&&(e[g][f].xPosLeft=l.yAxisPosX+t.barValueSpacing+l.valueHop*f,1*a.datasets[g].data[f]<0?(e[g][f].leftval=p[f],e[g][f].rightval=p[f]+1*a.datasets[g].data[f],p[f]=p[f]+1*a.datasets[g].data[f]):(e[g][f].leftval=h[f],e[g][f].rightval=h[f]+1*a.datasets[g].data[f],h[f]=h[f]+1*a.datasets[g].data[f]),e[g][f].rightOffset=r(e[g][f].rightval,l.calculatedScale,l.valueHop),e[g][f].leftOffset=r(e[g][f].leftval,l.calculatedScale,l.valueHop),e[g][f].xPosRight=l.yAxisPosX+e[g][f].rightOffset,e[g][f].xPosLeft=l.yAxisPosX+e[g][f].leftOffset,e[g][f].yPosTop=l.xAxisPosY+t.barValueSpacing-l.scaleHop*(f+1),e[g][f].yPosBottom=e[g][f].yPosTop+l.barWidth,t.spaceBetweenBar>0&&(1*a.datasets[g].data[f]<0?(e[g][f].xPosLeft-=t.spaceBetweenBar,p[f]==1*a.datasets[g].data[f]&&(e[g][f].xPosLeft+=t.spaceBetweenBar/2),e[g][f].xPosLeft<e[g][f].xPosRight&&(e[g][f].xPosLeft=e[g][f].xPosRight)):1*a.datasets[g].data[f]>0&&(e[g][f].xPosLeft+=t.spaceBetweenBar,h[f]==1*a.datasets[g].data[f]&&(e[g][f].xPosLeft-=t.spaceBetweenBar/2),e[g][f].xPosLeft>e[g][f].xPosRight&&(e[g][f].xPosLeft=e[g][f].xPosRight))),e[g][f].v7=e[g][f].xPosLeft,e[g][f].v8=e[g][f].yPosBottom,e[g][f].v9=e[g][f].xPosRight,e[g][f].v10=e[g][f].yPosTop)}}}function isBooleanOptionTrue(e,a){if("undefined"==typeof optionvar){if("function"==typeof a)return!0;if("object"==typeof a){for(var t=0;t<a.length;t++)if(a[t])return!0;return!1}return a}if("function"==typeof optionvar)return!0;if("object"==typeof optionvar){for(var t=0;t<optionvar.length;t++)if(optionvar[t])return!0;return!1}return optionvar}function setOptionValue(e,a,t,i,l,n,o,s,r){return"undefined"==typeof l?"function"==typeof n?n(e,a,t,i,o,s,r):"object"==typeof n?-1==s?n[Math.min(n.length-1,Math.max(0,o))]:n[Math.min(n.length-1,Math.max(0,s))]:n:"function"==typeof l?l(e,a,t,i,o,s,r):"object"==typeof l?-1==s?l[Math.min(l.length-1,Math.max(0,o))]:l[Math.min(l.length-1,Math.max(0,s))]:l}function tpdraw(e,a){switch(e.tpchart){case"Bar":tp="Line"==a.type?"Line":e.tpchart;break;default:tp=e.tpchart}return tp}var chartJSLineStyle=[];chartJSLineStyle.solid=[],chartJSLineStyle.dotted=[1,4],chartJSLineStyle.shortDash=[2,1],chartJSLineStyle.dashed=[4,2],chartJSLineStyle.dashSpace=[4,6],chartJSLineStyle.longDashDot=[7,2,1,2],chartJSLineStyle.longDashShortDash=[10,4,4,4],chartJSLineStyle.gradient=[1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,9,9,8,8,7,7,6,6,5,5,4,4,3,3,2,2,1],"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(null==this)throw new TypeError;var a=Object(this),t=a.length>>>0;if(0===t)return-1;var i=0;if(arguments.length>0&&(i=Number(arguments[1]),i!=i?i=0:0!=i&&1/0!=i&&i!=-1/0&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=t)return-1;for(var l=i>=0?i:Math.max(t-Math.abs(i),0);t>l;l++)if(l in a&&a[l]===e)return l;return-1});var charJSPersonalDefaultOptions={},charJSPersonalDefaultOptionsLine={},charJSPersonalDefaultOptionsRadar={},charJSPersonalDefaultOptionsPolarArea={},charJSPersonalDefaultOptionsPie={},charJSPersonalDefaultOptionsDoughnut={},charJSPersonalDefaultOptionsBar={},charJSPersonalDefaultOptionsStackedBar={},charJSPersonalDefaultOptionsHorizontalBar={},charJSPersonalDefaultOptionsHorizontalStackedBar={},cachebis={};"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.fillTextMultiLine=function(e,a,t,i,l,n){var o=(""+e).split("\n");"middle"==i?n&&(t-=(o.length-1)/2*l):"bottom"==i&&n&&(t-=(o.length-1)*l);for(var s=0;s<o.length;s++)this.fillText(o[s],a,t),t+=l},CanvasRenderingContext2D.prototype.measureTextMultiLine=function(e,a){for(var t,i=0,l=(""+e).split("\n"),n=l.length*a,o=0;o<l.length;o++)t=this.measureText(l[o]).width,t>i&&(i=t);return{textWidth:i,textHeight:n}},"function"!=typeof CanvasRenderingContext2D.prototype.setLineDash&&(CanvasRenderingContext2D.prototype.setLineDash=function(){return 0})),cursorDivCreated=!1,initChartJsResize=!1;var jsGraphResize=new Array;bw=new checkBrowser,fromLeft=10,fromTop=10,"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var dynamicDisplay=new Array,dynamicDisplayList=new Array,jsGraphAnnotate=new Array;window.Chart=function(context){function init_and_start(e,a,t){if("undefined"==typeof e.ChartNewId){e.runanimationcompletefunction=!0;var i=new Date,l=i.getTime();e.ChartNewId=e.tpchart+"_"+l,e._eventListeners={}}if(!dynamicFunction(a,t,e))return t.responsive&&"undefined"==typeof e.firstPass&&(t.multiGraph||addResponsiveChart(e.ChartNewId,e,a,t)),!1;if(t.responsive&&"undefined"==typeof e.firstPass){if(!t.multiGraph)return addResponsiveChart(e.ChartNewId,e,a,t),subUpdateChart(e,a,t),!1;e.firstPass=1}return"undefined"==typeof jsGraphAnnotate[e.ChartNewId]?jsGraphAnnotate[e.ChartNewId]=new Array:t.multiGraph||clearAnnotate(e.ChartNewId),defMouse(e,a,t),setRect(e,t),!0}function reverseData(e){e.labels=e.labels.reverse();for(var a=0;a<e.datasets.length;a++)for(var t in e.datasets[a])Array.isArray(e.datasets[a][t])&&(e.datasets[a][t]=e.datasets[a][t].reverse());return e}function calculateOffset(e,a,t,i){if(e)return CapValue(log10(a)*i-calculateOrderOfMagnitude(t.graphMin)*i,void 0,0);var l=t.steps*t.stepValue,n=a-t.graphMin,o=CapValue(n/l,1,0);return i*t.steps*o}function animationLoop(e,a,t,i,l,n,o,s,r,d,c,u,h){function p(){var p=e.animation?CapValue(v(x),null,0):1;1*f>=1*CapValue(e.animationSteps,Number.MAX_VALUE,1)||0==e.animation||3==i.firstPass||4==i.firstPass||8==i.firstPass||9==i.firstPass?p=1:p>=1&&(p=.9999),!e.animation||isIE()<9&&0!=isIE()||!e.clearRect||i.clearRect(l,n,o,s),dispCrossImage(i,e,r,d,c,u,!1,h,p,f),dispCrossText(i,e,r,d,c,u,!1,h,p,f),e.scaleOverlay?(t(p),a()):(a(),t(p)),dispCrossImage(i,e,r,d,c,u,!0,h,p,f),dispCrossText(i,e,r,d,c,u,!0,h,p,f)}function g(){f+=S,x+=S*m,f==e.animationSteps||0==e.animation||3==i.firstPass||4==i.firstPass||8==i.firstPass||9==i.firstPass?x=1:x>=1&&(x=.999),p(),-1==S&&P>=f?("function"==typeof e.onAnimationComplete&&1==i.runanimationcompletefunction&&e.onAnimationComplete(i,e,h,0,A+1),S=1,requestAnimFrame(g)):x<e.animationStopValue?requestAnimFrame(g):!(A<e.animationCount||0==e.animationCount)||1!=i.firstPass&&2==i.firstPass?testRedraw(i,h,e)||"function"==typeof e.onAnimationComplete&&1==i.runanimationcompletefunction&&(e.onAnimationComplete(i,e,h,1,A+1),i.runanimationcompletefunction=!1):(A++,e.animationBackward&&1==S?(x-=m,S=-1):(S=1,f=P-1,x=D-m),window.setTimeout(g,1e3*e.animationPauseTime))}var f=0,A=1,S=1;(e.animationStartValue<0||e.animationStartValue>1)&&(e.animation.StartValue=0),(e.animationStopValue<0||e.animationStopValue>1)&&(e.animation.StopValue=1),e.animationStopValue<e.animationStartValue&&(e.animationStopValue=e.animationStartValue),isIE()<9&&0!=isIE()&&(e.animation=!1);var m=e.animation?1/CapValue(e.animationSteps,Number.MAX_VALUE,1):1,v=animationOptions[e.animationEasing],x=e.animation?0:1;if(e.animation&&e.animationStartValue>0&&e.animationStartValue<=1)for(;x<e.animationStartValue;)f++,x+=m;var P=f,D=x;"function"!=typeof a&&(a=function(){}),e.clearRect?requestAnimFrame(g):g()}function calculateScale(e,a,t,i,l,n,o){var s,r,d,c,u,h,p,g,f;if(2==e?(g=a.logarithmic2,f=a.yAxisMinimumInterval2):(g=a.logarithmic,f=a.yAxisMinimumInterval),g){n==l&&(l+=1),0==n&&(n=.01);var A=calculateOrderOfMagnitude(n),S=calculateOrderOfMagnitude(l)+1;s=Math.pow(10,A),r=Math.pow(10,S),p=S-A}else if(h=l-n,p=calculateOrderOfMagnitude(h),s=Math.abs(n)>a.zeroValue?Math.floor(n/(1*Math.pow(10,p)))*Math.pow(10,p):0,r=Math.abs(l)>a.zeroValue?Math.ceil(l/(1*Math.pow(10,p)))*Math.pow(10,p):0,"number"==typeof f&&r>=0){for(s-=s%f;s>n;)s-=f;for(r%f>a.zeroValue&&r%f<f-a.zeroValue&&(r=roundScale(a,(1+Math.floor(r/f))*f));l>r;)r+=f}if(d=r-s,c=Math.pow(10,p),u=Math.round(d/c),g)u=p;else{for(var m=!1;!m&&(i>u||u>t);)i>u?("number"==typeof f&&f>c/2&&(m=!0),m||(c/=2,u=Math.round(d/c))):(c*=2,u=Math.round(d/c));if("number"==typeof f&&(f>c&&(c=f,u=Math.ceil(d/c)),c%f>a.zeroValue&&c%f<f-a.zeroValue&&(2*c%f<a.zeroValue||2*c%f>f-a.zeroValue?(c=2*c,u=Math.ceil(d/c)):(c=roundScale(a,(1+Math.floor(c/f))*f),u=Math.ceil(d/c)))),1==a.graphMaximized||"bottom"==a.graphMaximized||"undefined"!=typeof a.graphMin)for(;n>s+c&&u>=3;)s+=c,u--;if(1==a.graphMaximized||"top"==a.graphMaximized||"undefined"!=typeof a.graphMax)for(;s+(u-1)*c>=l&&u>=3;)u--}var v=[];return populateLabels(1,a,o,v,u,s,r,c),{steps:u,stepValue:c,graphMin:s,labels:v,maxValue:l}}function roundScale(e,a){var t=0,i=""+e.yAxisMinimumInterval;return i.indexOf(".")>0&&(t=i.substr(i.indexOf(".")).length),Math.round(a*Math.pow(10,t))/Math.pow(10,t)}function calculateOrderOfMagnitude(e){return 0==e?0:Math.floor(Math.log(e)/Math.LN10)}function populateLabels(e,a,t,i,l,n,o,s){var r;if(2==e?(r=a.logarithmic2,fmtYLabel=a.fmtYLabel2):(r=a.logarithmic,fmtYLabel=a.fmtYLabel),t)if(r)for(var d=n,c=0;l+1>c;c++)i.push(tmpl(t,{value:fmtChartJS(a,1*d.toFixed(getDecimalPlaces(d)),fmtYLabel)},a)),d*=10;else for(var c=0;l+1>c;c++)i.push(tmpl(t,{value:fmtChartJS(a,1*(n+s*c).toFixed(getDecimalPlaces(s)),fmtYLabel)},a))}function Max(e){return Math.max.apply(Math,e)}function Min(e){return Math.min.apply(Math,e)}function Default(e,a){return e?e:a}function CapValue(e,a,t){return isNumber(a)&&e>a?a:isNumber(t)&&t>e?t:e}function getDecimalPlaces(e){var a=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return a?Math.max(0,(a[1]?a[1].length:0)-(a[2]?+a[2]:0)):0}function mergeChartConfig(e,a){var t={};for(var i in e)t[i]=e[i];for(var i in a)t[i]=a[i];return t}function tmpl(e,a,t){return newstr=e,newstr.substr(0,t.templatesOpenTag.length)==t.templatesOpenTag&&(newstr="<%="+newstr.substr(t.templatesOpenTag.length,newstr.length-t.templatesOpenTag.length)),newstr.substr(newstr.length-t.templatesCloseTag.length,t.templatesCloseTag.length)==t.templatesCloseTag&&(newstr=newstr.substr(0,newstr.length-t.templatesCloseTag.length)+"%>"),tmplpart2(newstr,a)}function tmplpart2(e,a){var t=/\W/.test(e)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):cache[e]=cache[e]||tmplpart2(document.getElementById(e).innerHTML);return a?t(a):t}function dispCrossText(e,a,t,i,l,n,o,s,r,d){var c,u,h,p,g,f;for(c=0;c<a.crossText.length;c++)if(""!=a.crossText[c]&&a.crossTextOverlay[Min([c,a.crossTextOverlay.length-1])]==o&&(1==d&&"first"==a.crossTextIter[Min([c,a.crossTextIter.length-1])]||a.crossTextIter[Min([c,a.crossTextIter.length-1])]==d||"all"==a.crossTextIter[Min([c,a.crossTextIter.length-1])]||1==r&&"last"==a.crossTextIter[Min([c,a.crossTextIter.length-1])])){switch(e.save(),e.beginPath(),e.font=a.crossTextFontStyle[Min([c,a.crossTextFontStyle.length-1])]+" "+a.crossTextFontSize[Min([c,a.crossTextFontSize.length-1])]+"px "+a.crossTextFontFamily[Min([c,a.crossTextFontFamily.length-1])],e.fillStyle=a.crossTextFontColor[Min([c,a.crossTextFontColor.length-1])],g=a.crossTextAlign[Min([c,a.crossTextAlign.length-1])],f=a.crossTextBaseline[Min([c,a.crossTextBaseline.length-1])],h=1*a.crossTextPosX[Min([c,a.crossTextPosX.length-1])],p=1*a.crossTextPosY[Min([c,a.crossTextPosY.length-1])],1*a.crossTextRelativePosX[Min([c,a.crossTextRelativePosX.length-1])]){case 0:"default"==g&&(g="left");break;case 1:h+=l,"default"==g&&(g="right");break;case 2:h+=t,"default"==g&&(g="center");break;case-2:h+=context.canvas.width/2,"default"==g&&(g="center");break;case 3:h+=h+2*t-l,"default"==g&&(g="left");break;case 4:h+=context.canvas.width,"default"==g&&(g="right");break;default:h+=t,"default"==g&&(g="center")}switch(1*a.crossTextRelativePosY[Min([c,a.crossTextRelativePosY.length-1])]){case 0:"default"==f&&(f="top");break;case 3:p+=n,"default"==f&&(f="top");break;case 2:p+=i,"default"==f&&(f="middle");break;case-2:p+=context.canvas.height/2,"default"==f&&(f="middle");break;case 1:p+=p+2*i-n,"default"==f&&(f="bottom");break;case 4:p+=context.canvas.height,"default"==f&&(f="bottom");break;default:p+=i,"default"==f&&(f="middle")}e.textAlign=g,e.textBaseline=f,e.translate(1*h,1*p),e.rotate(Math.PI*a.crossTextAngle[Min([c,a.crossTextAngle.length-1])]/180),"%"==a.crossText[c].substring(0,1)?"function"==typeof a.crossTextFunction&&(u=a.crossTextFunction(c,a.crossText[c],e,a,t,i,l,n,o,s,r)):u=a.crossText[c],e.fillTextMultiLine(u,0,0,e.textBaseline,a.crossTextFontSize[Min([c,a.crossTextFontSize.length-1])],!0),e.stroke(),e.restore()}}function dispCrossImage(e,a,t,i,l,n,o,s,r,d){var c,u,h,p,g;for(c=0;c<a.crossImage.length;c++)if("undefined"!=typeof a.crossImage[c]&&a.crossImageOverlay[Min([c,a.crossImageOverlay.length-1])]==o&&(-1==d&&"background"==a.crossImageIter[Min([c,a.crossImageIter.length-1])]||1==d&&"first"==a.crossImageIter[Min([c,a.crossImageIter.length-1])]||a.crossImageIter[Min([c,a.crossImageIter.length-1])]==d||-1!=d&&"all"==a.crossImageIter[Min([c,a.crossImageIter.length-1])]||1==r&&"last"==a.crossImageIter[Min([c,a.crossImageIter.length-1])])){switch(e.save(),e.beginPath(),p=a.crossImageAlign[Min([c,a.crossImageAlign.length-1])],g=a.crossImageBaseline[Min([c,a.crossImageBaseline.length-1])],u=1*a.crossImagePosX[Min([c,a.crossImagePosX.length-1])],h=1*a.crossImagePosY[Min([c,a.crossImagePosY.length-1])],1*a.crossImageRelativePosX[Min([c,a.crossImageRelativePosX.length-1])]){case 0:"default"==p&&(p="left");break;case 1:u+=l,"default"==p&&(p="right");break;case 2:u+=t,"default"==p&&(p="center");break;case-2:u+=context.canvas.width/2,"default"==p&&(p="center");break;case 3:u+=u+2*t-l,"default"==p&&(p="left");break;case 4:u+=context.canvas.width,"default"==p&&(p="right");break;default:u+=t,"default"==p&&(p="center")}switch(1*a.crossImageRelativePosY[Min([c,a.crossImageRelativePosY.length-1])]){case 0:"default"==g&&(g="top");break;case 3:h+=n,"default"==g&&(g="top");break;case 2:h+=i,"default"==g&&(g="middle");break;case-2:h+=context.canvas.height/2,"default"==g&&(g="middle");break;case 1:h+=h+2*i-n,"default"==g&&(g="bottom");break;case 4:h+=context.canvas.height,"default"==g&&(g="bottom");break;default:h+=i,"default"==g&&(g="middle")}var f=a.crossImage[c].width;switch(p){case"left":break;case"right":u-=f;break;case"center":u-=f/2}var A=a.crossImage[c].height;switch(g){case"top":break;case"bottom":h-=A;break;case"middle":h-=A/2}e.translate(1*u,1*h),e.rotate(Math.PI*a.crossImageAngle[Min([c,a.crossImageAngle.length-1])]/180),e.drawImage(a.crossImage[c],0,0),e.restore()}}function setMeasures(e,a,t,i,l,n,o,s,r,d,c,u,h){"none"!=a.canvasBackgroundColor&&(t.canvas.style.background=a.canvasBackgroundColor);var p=0,g=0,f=0,A=0,S=0,m=0,v=0,x=0,P=0,D=0,V=0,T=0,y=0,L=0,b=0,M=0,I=0,O=0,G=0,R=0,N=0,B=0,w=0,H=0,F=1,C=1,z=0,k=1,W=0,E=1,Y=0,X=0,_=0,U=0,j=0,J=0;if(t.widthAtSetMeasures=l,t.heightAtSetMeasures=i,a.canvasBorders&&(p=a.canvasBordersWidth),d){t.font=a.scaleFontStyle+" "+a.scaleFontSize+"px "+a.scaleFontFamily;for(var K=0;K<e.labels.length;K++){var q=t.measureTextMultiLine(fmtChartJS(a,e.labels[K],a.fmtXLabel),a.scaleFontSize);F=q.textWidth>F?q.textWidth:F,C=q.textHeight>C?q.textHeight:C}F<a.xScaleLabelsMinimumWidth&&(F=a.xScaleLabelsMinimumWidth)}if(d){if(z=1,null!=n&&"nihil"!=n){t.font=a.scaleFontStyle+" "+a.scaleFontSize+"px "+a.scaleFontFamily;for(var K=n.length-1;K>=0;K--)if("string"==typeof n[K]&&""!=n[K].trim()){var q=t.measureTextMultiLine(fmtChartJS(a,n[K],a.fmtYLabel),a.scaleFontSize);z=q.textWidth>z?q.textWidth:z,k=q.textHeight>k?q.textHeight:k}}if(z<a.yScaleLabelsMinimumWidth&&(z=a.yScaleLabelsMinimumWidth),W=1,null!=o&&a.yAxisRight){t.font=a.scaleFontStyle+" "+a.scaleFontSize+"px "+a.scaleFontFamily;for(var K=o.length-1;K>=0;K--)if("string"==typeof o[K]&&""!=o[K].trim()){var q=t.measureTextMultiLine(fmtChartJS(a,o[K],a.fmtYLabel2),a.scaleFontSize);W=q.textWidth>W?q.textWidth:W,E=q.textHeight>E?q.textHeight:E}}else W=z;W<a.yScaleLabelsMinimumWidth&&(W=a.yScaleLabelsMinimumWidth)}if(Y=p+a.spaceLeft,X=p+a.spaceRight,d&&("undefined"!=typeof a.yAxisLabel&&""!=a.yAxisLabel.trim()&&(R=a.yAxisFontSize*(a.yAxisLabel.split("\n").length||1)+a.yAxisLabelSpaceLeft+a.yAxisLabelSpaceRight,N=p+a.spaceLeft+a.yAxisLabelSpaceLeft+a.yAxisFontSize,B=l-p-a.spaceRight-a.yAxisLabelSpaceLeft-a.yAxisFontSize),a.yAxisLeft&&(Y=0==r?p+a.spaceLeft+R+z+a.yAxisSpaceLeft+a.yAxisSpaceRight:p+a.spaceLeft+R+F+a.yAxisSpaceLeft+a.yAxisSpaceRight),a.yAxisRight&&(X=0==r?p+a.spaceRight+R+W+a.yAxisSpaceLeft+a.yAxisSpaceRight:p+a.spaceRight+R+F+a.yAxisSpaceLeft+a.yAxisSpaceRight)),availableWidth=l-Y-X,""!=a.graphTitle.trim()&&(f=a.graphTitleFontSize*(a.graphTitle.split("\n").length||1)+a.graphTitleSpaceBefore+a.graphTitleSpaceAfter,A=p+a.spaceTop+f-a.graphTitleSpaceAfter),""!=a.graphSubTitle.trim()&&(S=a.graphSubTitleFontSize*(a.graphSubTitle.split("\n").length||1)+a.graphSubTitleSpaceBefore+a.graphSubTitleSpaceAfter,m=p+a.spaceTop+f+S-a.graphSubTitleSpaceAfter),d&&""!=a.yAxisUnit.trim()&&(P=a.yAxisUnitFontSize*(a.yAxisUnit.split("\n").length||1)+a.yAxisUnitSpaceBefore+a.yAxisUnitSpaceAfter,D=p+a.spaceTop+f+S+P-a.yAxisUnitSpaceAfter),topNotUsableSize=p+a.spaceTop+f+S+P+a.graphSpaceBefore,"undefined"!=typeof a.footNote&&""!=a.footNote.trim()&&(v=a.footNoteFontSize*(a.footNote.split("\n").length||1)+a.footNoteSpaceBefore+a.footNoteSpaceAfter,x=i-a.spaceBottom-p-a.footNoteSpaceAfter),d&&"undefined"!=typeof a.xAxisLabel&&""!=a.xAxisLabel.trim()&&(w=a.xAxisFontSize*(a.xAxisLabel.split("\n").length||1)+a.xAxisLabelSpaceBefore+a.xAxisLabelSpaceAfter,g=i-p-a.spaceBottom-v-a.xAxisLabelSpaceAfter),bottomNotUsableHeightWithoutXLabels=p+a.spaceBottom+v+w+a.graphSpaceAfter,"undefined"!=typeof a.legend&&1==a.legend){if(t.font=a.legendFontStyle+" "+a.legendFontSize+"px "+a.legendFontFamily,c){for(var K=e.datasets.length-1;K>=0;K--)if("string"==typeof e.datasets[K].title&&""!=e.datasets[K].title.trim()){T++;var Z=t.measureText(fmtChartJS(a,e.datasets[K].title,a.fmtLegend)).width;V=Z>V?Z:V}}else for(var K=e.length-1;K>=0;K--)if("string"==typeof e[K].title&&""!=e[K].title.trim()){T++;var Z=t.measureText(fmtChartJS(a,e[K].title,a.fmtLegend)).width;V=Z>V?Z:V}if(T>1||1==T&&a.showSingleLegend){V+=a.legendBlockSize+a.legendSpaceBetweenBoxAndText,availableLegendWidth=1==a.legendPosY||2==a.legendPosY||3==a.legendPosY?availableWidth-a.legendSpaceLeftText-a.legendSpaceRightText:l-a.spaceLeft-a.spaceRight-2*p-a.legendSpaceLeftText-a.legendSpaceRightText,1==a.legendBorders&&(availableLegendWidth-=2*a.legendBordersWidth-a.legendBordersSpaceLeft-a.legendBordersSpaceRight),maxLegendOnLine=Min([Math.floor((availableLegendWidth+a.legendSpaceBetweenTextHorizontal)/(V+a.legendSpaceBetweenTextHorizontal)),a.maxLegendCols]),y=Math.ceil(T/maxLegendOnLine),L=Math.ceil(T/y);var Q=y*(a.legendFontSize+a.legendSpaceBetweenTextVertical)-a.legendSpaceBetweenTextVertical+a.legendSpaceBeforeText+a.legendSpaceAfterText;switch(a.legendPosY){case 0:M=a.spaceLeft+(l-a.spaceLeft-a.spaceRight-L*(V+a.legendSpaceBetweenTextHorizontal)+a.legendSpaceBetweenTextHorizontal)/2,b=Q,1==a.legendBorders?(G=topNotUsableSize+a.legendBordersSpaceBefore+a.legendBordersWidth/2,I=G+a.legendBordersWidth/2+a.legendSpaceBeforeText+a.legendFontSize,b+=2*a.legendBordersWidth+a.legendBordersSpaceBefore+a.legendBordersSpaceAfter,O=Math.floor(M-a.legendSpaceLeftText-a.legendBordersWidth/2),J=Math.ceil(b-a.legendBordersWidth)-a.legendBordersSpaceBefore-a.legendBordersSpaceAfter,j=Math.ceil(L*(V+a.legendSpaceBetweenTextHorizontal))-a.legendSpaceBetweenTextHorizontal+a.legendBordersWidth+a.legendSpaceRightText+a.legendSpaceLeftText):I=topNotUsableSize+a.legendBordersSpaceBefore+a.legendBordersWidth/2,P>0&&(D+=b,1==a.legendBorders&&(G-=P),I-=P),topNotUsableSize+=b;break;case 1:b=Q,M=a.spaceLeft+(l-a.spaceLeft-a.spaceRight-L*(V+a.legendSpaceBetweenTextHorizontal)+a.legendSpaceBetweenTextHorizontal)/2,I=topNotUsableSize+a.legendSpaceBeforeText+a.legendFontSize,1==a.legendBorders&&(I+=a.legendBordersSpaceBefore+a.legendBordersWidth,G=I-a.legendSpaceBeforeText-a.legendFontSize-a.legendBordersWidth/2,b+=2*a.legendBordersWidth+a.legendBordersSpaceBefore+a.legendBordersSpaceAfter,O=Math.floor(M-a.legendSpaceLeftText-a.legendBordersWidth/2),J=Math.ceil(b-a.legendBordersWidth)-a.legendBordersSpaceBefore-a.legendBordersSpaceAfter,j=Math.ceil(L*(V+a.legendSpaceBetweenTextHorizontal))-a.legendSpaceBetweenTextHorizontal+a.legendBordersWidth+a.legendSpaceRightText+a.legendSpaceLeftText);break;case 2:b=Q,M=a.spaceLeft+(l-a.spaceLeft-a.spaceRight-L*(V+a.legendSpaceBetweenTextHorizontal)+a.legendSpaceBetweenTextHorizontal)/2,I=topNotUsableSize+(i-topNotUsableSize-bottomNotUsableHeightWithoutXLabels-b)/2+a.legendSpaceBeforeText+a.legendFontSize,1==a.legendBorders&&(I+=a.legendBordersSpaceBefore-a.legendBordersSpaceAfter,G=I-a.legendSpaceBeforeText-a.legendFontSize-a.legendBordersWidth/2,b+=2*a.legendBordersWidth+a.legendBordersSpaceBefore+a.legendBordersSpaceAfter,O=Math.floor(M-a.legendSpaceLeftText-a.legendBordersWidth/2),J=Math.ceil(b-a.legendBordersWidth)-a.legendBordersSpaceBefore-a.legendBordersSpaceAfter,j=Math.ceil(L*(V+a.legendSpaceBetweenTextHorizontal))-a.legendSpaceBetweenTextHorizontal+a.legendBordersWidth+a.legendSpaceRightText+a.legendSpaceLeftText);break;case-2:b=Q,M=a.spaceLeft+(l-a.spaceLeft-a.spaceRight-L*(V+a.legendSpaceBetweenTextHorizontal)+a.legendSpaceBetweenTextHorizontal)/2,I=(i-b)/2+a.legendSpaceBeforeText+a.legendFontSize,1==a.legendBorders&&(I+=a.legendBordersSpaceBefore-a.legendBordersSpaceAfter,G=I-a.legendSpaceBeforeText-a.legendFontSize-a.legendBordersWidth/2,b+=2*a.legendBordersWidth+a.legendBordersSpaceBefore+a.legendBordersSpaceAfter,O=Math.floor(M-a.legendSpaceLeftText-a.legendBordersWidth/2),J=Math.ceil(b-a.legendBordersWidth)-a.legendBordersSpaceBefore-a.legendBordersSpaceAfter,j=Math.ceil(L*(V+a.legendSpaceBetweenTextHorizontal))-a.legendSpaceBetweenTextHorizontal+a.legendBordersWidth+a.legendSpaceRightText+a.legendSpaceLeftText);break;case 3:b=Q,M=a.spaceLeft+(l-a.spaceLeft-a.spaceRight-L*(V+a.legendSpaceBetweenTextHorizontal)+a.legendSpaceBetweenTextHorizontal)/2,availableHeight=i-topNotUsableSize-bottomNotUsableHeightWithoutXLabels,I=topNotUsableSize+availableHeight-b+a.legendSpaceBeforeText+a.legendFontSize,1==a.legendBorders&&(I-=a.legendBordersSpaceAfter+a.legendBordersWidth,G=I-a.legendSpaceBeforeText-a.legendFontSize-a.legendBordersWidth/2,b+=2*a.legendBordersWidth+a.legendBordersSpaceBefore+a.legendBordersSpaceAfter,O=Math.floor(M-a.legendSpaceLeftText-a.legendBordersWidth/2),J=Math.ceil(b-a.legendBordersWidth)-a.legendBordersSpaceBefore-a.legendBordersSpaceAfter,j=Math.ceil(L*(V+a.legendSpaceBetweenTextHorizontal))-a.legendSpaceBetweenTextHorizontal+a.legendBordersWidth+a.legendSpaceRightText+a.legendSpaceLeftText);break;default:b=Q,I=i-p-a.spaceBottom-v-b+a.legendSpaceBeforeText+a.legendFontSize,M=a.spaceLeft+(l-a.spaceLeft-a.spaceRight-L*(V+a.legendSpaceBetweenTextHorizontal)+a.legendSpaceBetweenTextHorizontal)/2,1==a.legendBorders&&(b+=2*a.legendBordersWidth+a.legendBordersSpaceBefore+a.legendBordersSpaceAfter,I-=a.legendBordersWidth+a.legendBordersSpaceAfter,G=Math.floor(i-p-a.spaceBottom-v-b+a.legendBordersWidth/2+a.legendBordersSpaceBefore),O=Math.floor(M-a.legendSpaceLeftText-a.legendBordersWidth/2),J=Math.ceil(b-a.legendBordersWidth)-a.legendBordersSpaceBefore-a.legendBordersSpaceAfter,j=Math.ceil(L*(V+a.legendSpaceBetweenTextHorizontal))-a.legendSpaceBetweenTextHorizontal+a.legendBordersWidth+a.legendSpaceRightText+a.legendSpaceLeftText),g-=b,bottomNotUsableHeightWithoutXLabels+=b}var $=a.legendSpaceRightText+L*(V+a.legendSpaceBetweenTextHorizontal)-a.legendSpaceBetweenTextHorizontal+a.legendSpaceLeftText;switch(1==a.legendBorders&&($+=2*a.legendBordersWidth+a.legendBordersSpaceLeft+a.legendBordersSpaceRight),a.legendPosX){case 0:M=a.spaceLeft+a.canvasBorders*a.canvasBordersWidth+a.legendSpaceLeftText,1==a.legendBorders&&(M+=a.legendBordersWidth/2+a.legendBordersSpaceLeft,O=a.spaceLeft+a.canvasBorders*a.canvasBordersWidth+a.legendBordersSpaceLeft),(a.legendPosY>=1&&a.legendPosY<=3||-2==a.legendPosY)&&(Y+=$,N+=$);break;case 1:M=Y+a.legendSpaceLeftText,1==a.legendBorders&&(O=M,M+=a.legendBordersWidth/2+a.legendBordersSpaceLeft);break;case 2:M=Y+(l-X-Y)/2-(a.legendSpaceLeftText-a.legendSpaceRightText)-(L*(V+a.legendSpaceBetweenTextHorizontal)-a.legendSpaceBetweenTextHorizontal)/2,1==a.legendBorders&&(M-=a.legendBordersWidth/2+a.legendBordersSpaceRight,O=M-a.legendBordersWidth/2-a.legendSpaceLeftText);break;case 3:M=l-X-a.legendSpaceRightText-L*(V+a.legendSpaceBetweenTextHorizontal)+a.legendSpaceBetweenTextHorizontal/2,1==a.legendBorders&&(M-=a.legendBordersWidth/2+a.legendBordersSpaceRight,O=M-a.legendBordersWidth/2-a.legendSpaceLeftText);break;case 4:M=l-a.spaceRight-a.canvasBorders*a.canvasBordersWidth-a.legendSpaceRightText-L*(V+a.legendSpaceBetweenTextHorizontal)+a.legendSpaceBetweenTextHorizontal/2,1==a.legendBorders&&(M-=a.legendBordersWidth/2+a.legendBordersSpaceRight,O=M-a.legendBordersSpaceLeft-a.legendBordersWidth/2),(a.legendPosY>=1&&a.legendPosY<=3||-2==a.legendPosY)&&(X+=$,B-=$)
}1==a.legendBorders&&(G+=a.legendYPadding,O+=a.legendXPadding),I+=a.legendYPadding,M+=a.legendXPadding}}if(xLabelWidth=0,bottomNotUsableHeightWithXLabels=bottomNotUsableHeightWithoutXLabels,d&&(a.xAxisBottom||a.xAxisTop)){if(0==r){var ea=F,aa=C;nblab=e.labels.length}else{var ea=z,aa=k;nblab=n.length}"smart"==a.rotateLabels?(_=0,(availableWidth+a.xAxisSpaceBetweenLabels)/nblab<ea+a.xAxisSpaceBetweenLabels&&(_=45,availableWidth/nblab<Math.abs(Math.cos(_*Math.PI/180)*ea)&&(_=90))):(_=a.rotateLabels,0>_&&(_=0),_>180&&(_=180)),_>90&&(_+=180),H=Math.abs(Math.sin(_*Math.PI/180)*ea)+Math.abs(Math.sin((_+90)*Math.PI/180)*aa)+a.xAxisSpaceBefore+a.xAxisSpaceAfter,U=i-p-a.spaceBottom-v-w-(H-a.xAxisSpaceBefore)-a.graphSpaceAfter,xLabelWidth=Math.abs(Math.cos(_*Math.PI/180)*ea)+Math.abs(Math.cos((_+90)*Math.PI/180)*aa),Y=Max([Y,p+a.spaceLeft+xLabelWidth/2]),X=Max([X,p+a.spaceRight+xLabelWidth/2]),availableWidth=l-Y-X,a.legend&&a.xAxisBottom&&4==a.legendPosY&&(U-=b),bottomNotUsableHeightWithXLabels=bottomNotUsableHeightWithoutXLabels+H}else availableWidth=l-Y-X;if(availableHeight=i-topNotUsableSize-bottomNotUsableHeightWithXLabels,dispCrossImage(t,a,l/2,i/2,l/2,i/2,!1,e,-1,-1),"nihil"!=n){if(p>0&&(t.save(),t.beginPath(),t.lineWidth=2*p,t.setLineDash(lineStyleFn(a.canvasBordersStyle)),t.strokeStyle=a.canvasBordersColor,t.moveTo(0,0),t.lineTo(0,i),t.lineTo(l,i),t.lineTo(l,0),t.lineTo(0,0),t.stroke(),t.setLineDash([]),t.restore()),f>0&&(t.save(),t.beginPath(),t.font=a.graphTitleFontStyle+" "+a.graphTitleFontSize+"px "+a.graphTitleFontFamily,t.fillStyle=a.graphTitleFontColor,t.textAlign="center",t.textBaseline="bottom",t.translate(a.spaceLeft+(l-a.spaceLeft-a.spaceRight)/2,A),t.fillTextMultiLine(a.graphTitle,0,0,t.textBaseline,a.graphTitleFontSize,!0),t.stroke(),t.restore()),S>0&&(t.save(),t.beginPath(),t.font=a.graphSubTitleFontStyle+" "+a.graphSubTitleFontSize+"px "+a.graphSubTitleFontFamily,t.fillStyle=a.graphSubTitleFontColor,t.textAlign="center",t.textBaseline="bottom",t.translate(a.spaceLeft+(l-a.spaceLeft-a.spaceRight)/2,m),t.fillTextMultiLine(a.graphSubTitle,0,0,t.textBaseline,a.graphSubTitleFontSize,!0),t.stroke(),t.restore()),P>0&&(a.yAxisLeft&&(t.save(),t.beginPath(),t.font=a.yAxisUnitFontStyle+" "+a.yAxisUnitFontSize+"px "+a.yAxisUnitFontFamily,t.fillStyle=a.yAxisUnitFontColor,t.textAlign="center",t.textBaseline="bottom",t.translate(Y,D),t.fillTextMultiLine(a.yAxisUnit,0,0,t.textBaseline,a.yAxisUnitFontSize,!0),t.stroke(),t.restore()),a.yAxisRight&&(""==a.yAxisUnit2&&(a.yAxisUnit2=a.yAxisUnit),t.save(),t.beginPath(),t.font=a.yAxisUnitFontStyle+" "+a.yAxisUnitFontSize+"px "+a.yAxisUnitFontFamily,t.fillStyle=a.yAxisUnitFontColor,t.textAlign="center",t.textBaseline="bottom",t.translate(l-X,D),t.fillTextMultiLine(a.yAxisUnit2,0,0,t.textBaseline,a.yAxisUnitFontSize,!0),t.stroke(),t.restore())),R>0&&(a.yAxisLeft&&(t.save(),t.beginPath(),t.font=a.yAxisFontStyle+" "+a.yAxisFontSize+"px "+a.yAxisFontFamily,t.fillStyle=a.yAxisFontColor,t.textAlign="center",t.textBaseline="bottom",t.translate(N,topNotUsableSize+availableHeight/2),t.rotate(-(90*(Math.PI/180))),t.fillTextMultiLine(a.yAxisLabel,0,0,t.textBaseline,a.yAxisFontSize,!1),t.stroke(),t.restore()),a.yAxisRight&&(""==a.yAxisLabel2&&(a.yAxisLabel2=a.yAxisLabel),t.save(),t.beginPath(),t.font=a.yAxisFontStyle+" "+a.yAxisFontSize+"px "+a.yAxisFontFamily,t.fillStyle=a.yAxisFontColor,t.textAlign="center",t.textBaseline="bottom",t.translate(B,topNotUsableSize+availableHeight/2),t.rotate(+(90*(Math.PI/180))),t.fillTextMultiLine(a.yAxisLabel2,0,0,t.textBaseline,a.yAxisFontSize,!1),t.stroke(),t.restore())),w>0&&a.xAxisBottom&&(t.save(),t.beginPath(),t.font=a.xAxisFontStyle+" "+a.xAxisFontSize+"px "+a.xAxisFontFamily,t.fillStyle=a.xAxisFontColor,t.textAlign="center",t.textBaseline="bottom",t.translate(Y+availableWidth/2,g),t.fillTextMultiLine(a.xAxisLabel,0,0,t.textBaseline,a.xAxisFontSize,!0),t.stroke(),t.restore()),T>1||1==T&&a.showSingleLegend){var ta={dispLegend:!0,xLegendBorderPos:O,yLegendBorderPos:G,legendBorderWidth:j,legendBorderHeight:J,nbLegendCols:L,xFirstLegendTextPos:M,yFirstLegendTextPos:I,drawLegendOnData:c,reverseLegend:s,legendBox:u,widestLegend:V};if(0==a.legendPosY||4==a.legendPosY||0==a.legendPosX||4==a.legendPosX){drawLegend(ta,e,a,t,h);var ta={dispLegend:!1}}}else var ta={dispLegend:!1};""!=a.footNote.trim()&&(t.save(),t.font=a.footNoteFontStyle+" "+a.footNoteFontSize+"px "+a.footNoteFontFamily,t.fillStyle=a.footNoteFontColor,t.textAlign="center",t.textBaseline="bottom",t.translate(Y+availableWidth/2,x),t.fillTextMultiLine(a.footNote,0,0,t.textBaseline,a.footNoteFontSize,!0),t.stroke(),t.restore())}return clrx=Y,clrwidth=availableWidth,clry=topNotUsableSize,clrheight=availableHeight,{leftNotUsableSize:Y,rightNotUsableSize:X,availableWidth:availableWidth,topNotUsableSize:topNotUsableSize,bottomNotUsableHeightWithoutXLabels:bottomNotUsableHeightWithoutXLabels,bottomNotUsableHeightWithXLabels:bottomNotUsableHeightWithXLabels,availableHeight:availableHeight,widestXLabel:F,highestXLabel:C,widestYLabel:z,widestYLabel2:W,highestYLabel:k,rotateLabels:_,xLabelPos:U,clrx:clrx,clry:clry,clrwidth:clrwidth,clrheight:clrheight,legendMsr:ta}}function drawLinesDataset(e,a,t,i,l){function n(e,n,o,s){setOptionValue("BEZIERCURVE",i,a,l,void 0,t.bezierCurve,s,-1,{nullValue:!0})&&(e.length=0,e.push(n),e.push(o))}function o(e,a,t,i,l,n,o,s){setOptionValue("BEZIERCURVE",a,n,o,void 0,l.bezierCurve,s,-1,{nullValue:!0})?(e.push(t),e.push(i)):a.lineTo(t,i)}function s(e,t,i,n){setOptionValue("BEZIERCURVE",t,a,l,void 0,i.bezierCurve,n,-1,{nullValue:!0})&&(minimumpos=l[n][0].xAxisPosY,maximumpos=l[n][0].xAxisPosY-l[n][0].calculatedScale.steps*l[n][0].scaleHop,d(t,e,setOptionValue("BEZIERCURVETENSION",t,a,l,void 0,i.bezierCurveTension,n,-1,{nullValue:!0}),minimumpos,maximumpos),e.length=0)}function r(e,a,t,i,l,n,o){var s=Math.sqrt(Math.pow(t-e,2)+Math.pow(i-a,2)),r=Math.sqrt(Math.pow(l-t,2)+Math.pow(n-i,2)),d=o*s/(s+r),c=o-d,u=t+d*(e-l),h=i+d*(a-n),p=t-c*(e-l),g=i-c*(a-n);return[u,h,p,g]}function d(e,i,n,o,s){var d=[],h=i.length;if(i.push(2*i[h-2]-i[h-4]),i.push(2*i[h-1]-i[h-3]),4==h)return e.moveTo(i[0],i[1]),void e.lineTo(i[2],i[3]);for(var p=0;h-2>p;p+=2)d=d.concat(r(i[p],i[p+1],i[p+2],i[p+3],i[p+4],i[p+5],n));e.beginPath(),e.strokeStyle=setOptionValue("STROKECOLOR",e,a,l,a.datasets[S].strokeColor,t.defaultStrokeColor,S,x,{nullvalue:null}),e.lineWidth=t.datasetStrokeWidth,e.moveTo(i[0],i[1]),e.quadraticCurveTo(d[0],Math.max(Math.min(d[1],o),s),i[2],i[3]),e.setLineDash(lineStyleFn(setOptionValue("LINEDASH",e,a,l,a.datasets[S].datasetStrokeStyle,t.datasetStrokeStyle,S,x,{nullvalue:null})));for(var p=2;p<i.length-3;p+=2)c=Math.max(Math.min(d[2*p-1],o),s),u=Math.max(Math.min(d[2*p+1],o),s),e.bezierCurveTo(d[2*p-2],c,d[2*p],u,i[p+2],i[p+3]);e.stroke()}for(var c,u,h,p,g,f,A=[],S=0;S<a.datasets.length;S++)if("Line"==l[S][0].tpchart&&0!=l[S].length&&-1!=l[S][0].firstNotMissing){i.save(),i.beginPath(),prevAnimPc={mainVal:0,subVal:0,animVal:0};for(var m=-1,v=-1,x=l[S][0].firstNotMissing;x<=l[S][0].lastNotMissing;x++)if(!(0==prevAnimPc.animVal&&x>l[S][0].firstNotMissing)){var P=animationCorrection(e,a,t,S,x,0);if(0==P.mainVal&&prevAnimPc.mainVal>0&&-1!=m)i.setLineDash(lineStyleFn(setOptionValue("LINEDASH",i,a,l,a.datasets[S].datasetStrokeStyle,t.datasetStrokeStyle,S,x,{nullvalue:null}))),i.stroke(),i.setLineDash([]),t.extrapolateMissingData?(c=l[S][l[S][x].prevNotMissing].yAxisPos-prevAnimPc.mainVal*l[S][l[S][x].prevNotMissing].yPosOffset,u=l[S][x].yAxisPos-prevAnimPc.mainVal*l[S][l[S][x-1].nextNotMissing].yPosOffset,p=l[S][x-1].nextNotMissing-l[S][x].prevNotMissing,g=x-1-l[S][x].prevNotMissing,f=(g+prevAnimPc.subVal)/p,h=c+f*(u-c),o(A,i,l[S][x-1].xPos+prevAnimPc.subVal*(l[S][x].xPos-l[S][x-1].xPos),h,t,a,l,S),s(A,i,t,S),i.setLineDash(lineStyleFn(setOptionValue("LINEDASH",i,a,l,a.datasets[S].datasetStrokeStyle,t.datasetStrokeStyle,S,x,{nullvalue:null}))),i.stroke(),i.setLineDash([]),i.strokeStyle="rgba(0,0,0,0)",t.datasetFill&&(i.lineTo(l[S][x-1].xPos+prevAnimPc.subVal*(l[S][x].xPos-l[S][x-1].xPos),l[S][x].yAxisPos),i.lineTo(l[S][m].xPos,l[S][m].xAxisPosY-l[S][0].zeroY),i.closePath(),i.fillStyle=setOptionValue("COLOR",i,a,l,a.datasets[S].fillColor,t.defaultFillColor,S,x,{animationValue:P.mainVal,xPosLeft:l[S][0].xPos,yPosBottom:Math.max(l[S][0].yAxisPos,l[S][0].yAxisPos-(t.animationLeftToRight?1:1*P.mainVal)*l[S][0].lminvalue_offset),xPosRight:l[S][a.datasets[S].data.length-1].xPos,yPosTop:Math.min(l[S][0].yAxisPos,l[S][0].yAxisPos-(t.animationLeftToRight?1:1*P.mainVal)*l[S][0].lmaxvalue_offset)}),i.fill(),m=-1)):"undefined"!=typeof l[S][x].value&&(o(A,i,l[S][x-1].xPos+prevAnimPc.subVal*(l[S][x].xPos-l[S][x-1].xPos),l[S][x].yAxisPos-prevAnimPc.mainVal*l[S][l[S][x-1].nextNotMissing].yPosOffset,t,a,l,S),s(A,i,t,S),i.setLineDash(lineStyleFn(setOptionValue("LINEDASH",i,a,l,a.datasets[S].datasetStrokeStyle,t.datasetStrokeStyle,S,x,{nullvalue:null}))),i.stroke(),i.setLineDash([]),i.strokeStyle="rgba(0,0,0,0)",t.datasetFill&&(i.lineTo(l[S][x-1].xPos+prevAnimPc.subVal*(l[S][x].xPos-l[S][x-1].xPos),l[S][x].yAxisPos),i.lineTo(l[S][m].xPos,l[S][m].xAxisPosY-l[S][0].zeroY),i.closePath(),i.fillStyle=setOptionValue("COLOR",i,a,l,a.datasets[S].fillColor,t.defaultFillColor,S,x,{animationValue:P.mainVal,xPosLeft:l[S][0].xPos,yPosBottom:Math.max(l[S][0].yAxisPos,l[S][0].yAxisPos-(t.animationLeftToRight?1:1*P.mainVal)*l[S][0].lminvalue_offset),xPosRight:l[S][a.datasets[S].data.length-1].xPos,yPosTop:Math.min(l[S][0].yAxisPos,l[S][0].yAxisPos-(t.animationLeftToRight?1:1*P.mainVal)*l[S][0].lmaxvalue_offset)}),i.fill())),prevAnimPc=P;else switch(0==P.totVal?(i.setLineDash(lineStyleFn(setOptionValue("LINEDASH",i,a,l,a.datasets[S].datasetStrokeStyle,t.datasetStrokeStyle,S,x,{nullvalue:null}))),i.stroke(),i.setLineDash([]),i.strokeStyle="rgba(0,0,0,0)"):(i.setLineDash(lineStyleFn(setOptionValue("LINEDASH",i,a,l,a.datasets[S].datasetStrokeStyle,t.datasetStrokeStyle,S,x,{nullvalue:null}))),i.stroke(),i.setLineDash([]),i.strokeStyle=setOptionValue("STROKECOLOR",i,a,l,a.datasets[S].strokeColor,t.defaultStrokeColor,S,x,{nullvalue:null})),prevAnimPc=P,typeof a.datasets[S].data[x]){case"undefined":if(t.extrapolateMissingData){if(P.subVal>0){v=l[S][x].xPos+P.subVal*(l[S][x+1].xPos-l[S][x].xPos),c=l[S][l[S][x+1].prevNotMissing].yAxisPos-l[S][l[S][x+1].prevNotMissing].yPosOffset,u=l[S][l[S][x].nextNotMissing].yAxisPos-l[S][l[S][x].nextNotMissing].yPosOffset,p=l[S][x].nextNotMissing-l[S][x+1].prevNotMissing,g=x-l[S][x+1].prevNotMissing,f=(g+prevAnimPc.subVal)/p;var h=c+f*(u-c);o(A,i,l[S][x].xPos+P.subVal*(l[S][x+1].xPos-l[S][x].xPos),h,t,a,l,S)}}else{if(-1==m)continue;s(A,i,t,S),i.setLineDash(lineStyleFn(setOptionValue("LINEDASH",i,a,l,a.datasets[S].datasetStrokeStyle,t.datasetStrokeStyle,S,x,{nullvalue:null}))),i.stroke(),i.setLineDash([]),t.datasetFill&&-1!=m&&(v=-1,i.strokeStyle="rgba(0,0,0,0)",i.lineTo(l[S][x-1].xPos,l[S][x-1].yAxisPos),i.lineTo(l[S][m].xPos,l[S][m].yAxisPos),i.closePath(),i.fillStyle=setOptionValue("COLOR",i,a,l,a.datasets[S].fillColor,t.defaultFillColor,S,x,{animationValue:P.mainVal,xPosLeft:l[S][0].xPos,yPosBottom:Math.max(l[S][0].yAxisPos,l[S][0].yAxisPos-(t.animationLeftToRight?1:1*P.mainVal)*l[S][0].lminvalue_offset),xPosRight:l[S][a.datasets[S].data.length-1].xPos,yPosTop:Math.min(l[S][0].yAxisPos,l[S][0].yAxisPos-(t.animationLeftToRight?1:1*P.mainVal)*l[S][0].lmaxvalue_offset)}),i.fill()),i.beginPath(),prevAnimPc={mainVal:0,subVal:0},m=-1}break;default:if(i.lineWidth=t.datasetStrokeWidth,-1==m?(m=x,i.beginPath(),i.moveTo(l[S][x].xPos,l[S][x].yAxisPos-P.mainVal*l[S][x].yPosOffset),n(A,l[S][x].xPos,l[S][x].yAxisPos-P.mainVal*l[S][x].yPosOffset,S),v=l[S][x].xPos):(v=l[S][x].xPos,o(A,i,l[S][x].xPos,l[S][x].yAxisPos-P.mainVal*l[S][x].yPosOffset,t,a,l,S)),P.subVal>0&&-1!=l[S][x].nextNotMissing&&(t.extrapolateMissing||l[S][x].nextNotMissing==x+1)){v=l[S][x].xPos+P.subVal*(l[S][x+1].xPos-l[S][x].xPos);var c=l[S][l[S][x+1].prevNotMissing].yAxisPos-l[S][l[S][x+1].prevNotMissing].yPosOffset,u=l[S][l[S][x].nextNotMissing].yAxisPos-l[S][l[S][x].nextNotMissing].yPosOffset,h=c+P.subVal*(u-c);o(A,i,l[S][x].xPos+P.subVal*(l[S][x+1].xPos-l[S][x].xPos),h,t,a,l,S)}}}if(s(A,i,t,S),i.setLineDash(lineStyleFn(setOptionValue("LINEDASH",i,a,l,a.datasets[S].datasetStrokeStyle,t.datasetStrokeStyle,S,x,{nullvalue:null}))),i.stroke(),i.setLineDash([]),t.datasetFill&&m>=0&&(i.strokeStyle="rgba(0,0,0,0)",i.lineTo(v,l[S][0].xAxisPosY-l[S][0].zeroY),i.lineTo(l[S][m].xPos,l[S][m].xAxisPosY-l[S][0].zeroY),i.closePath(),i.fillStyle=setOptionValue("COLOR",i,a,l,a.datasets[S].fillColor,t.defaultFillColor,S,-1,{animationValue:P.mainVal,xPosLeft:l[S][0].xPos,yPosBottom:Math.max(l[S][0].yAxisPos,l[S][0].yAxisPos-(t.animationLeftToRight?1:1*P.mainVal)*l[S][0].lminvalue_offset),xPosRight:l[S][a.datasets[S].data.length-1].xPos,yPosTop:Math.min(l[S][0].yAxisPos,l[S][0].yAxisPos-(t.animationLeftToRight?1:1*P.mainVal)*l[S][0].lmaxvalue_offset)}),i.fill()),i.restore(),t.pointDot&&e>=1)for(var x=0;x<a.datasets[S].data.length;x++)if("undefined"!=typeof a.datasets[S].data[x]){var P=animationCorrection(e,a,t,S,x,0);if(P.mainVal>0||!t.animationLeftToRight){i.beginPath(),i.fillStyle=setOptionValue("MARKERFILLCOLOR",i,a,l,a.datasets[S].pointColor,t.defaultStrokeColor,S,x,{nullvalue:!0}),i.strokeStyle=setOptionValue("MARKERSTROKESTYLE",i,a,l,a.datasets[S].pointStrokeColor,t.defaultStrokeColor,S,x,{nullvalue:!0}),i.lineWidth=setOptionValue("MARKERLINEWIDTH",i,a,l,a.datasets[S].pointDotStrokeWidth,t.pointDotStrokeWidth,S,x,{nullvalue:!0});var D=setOptionValue("MARKERSHAPE",i,a,l,a.datasets[S].markerShape,t.markerShape,S,x,{nullvalue:!0}),V=setOptionValue("MARKERRADIUS",i,a,l,a.datasets[S].pointDotRadius,t.pointDotRadius,S,x,{nullvalue:!0}),T=setOptionValue("MARKERSTROKESTYLE",i,a,l,a.datasets[S].pointDotStrokeStyle,t.pointDotStrokeStyle,S,x,{nullvalue:!0});drawMarker(i,l[S][x].xPos,l[S][x].yAxisPos-P.mainVal*l[S][x].yPosOffset,D,V,T)}}if(e>=t.animationStopValue)for(var x=0;x<a.datasets[S].data.length;x++)if("undefined"!=typeof a.datasets[S].data[x]&&(setOptionValue("ANNOTATEDISPLAY",i,a,l,void 0,t.annotateDisplay,S,x,{nullValue:!0})&&(jsGraphAnnotate[i.ChartNewId][jsGraphAnnotate[i.ChartNewId].length]=["POINT",S,x,l]),setOptionValue("INGRAPHDATASHOW",i,a,l,void 0,t.inGraphDataShow,S,x,{nullValue:!0}))){i.save(),i.textAlign=setOptionValue("INGRAPHDATAALIGN",i,a,l,void 0,t.inGraphDataAlign,S,x,{nullValue:!0}),i.textBaseline=setOptionValue("INGRAPHDATAVALIGN",i,a,l,void 0,t.inGraphDataVAlign,S,x,{nullValue:!0}),i.font=setOptionValue("INGRAPHDATAFONTSTYLE",i,a,l,void 0,t.inGraphDataFontStyle,S,x,{nullValue:!0})+" "+setOptionValue("INGRAPHDATAFONTSIZE",i,a,l,void 0,t.inGraphDataFontSize,S,x,{nullValue:!0})+"px "+setOptionValue("INGRAPHDATAFONTFAMILY",i,a,l,void 0,t.inGraphDataFontFamily,S,x,{nullValue:!0}),i.fillStyle=setOptionValue("INGRAPHDATAFONTCOLOR",i,a,l,void 0,t.inGraphDataFontColor,S,x,{nullValue:!0});var y=setOptionValue("INGRAPHDATAPADDINGX",i,a,l,void 0,t.inGraphDataPaddingX,S,x,{nullValue:!0}),L=setOptionValue("INGRAPHDATAPADDINGY",i,a,l,void 0,t.inGraphDataPaddingY,S,x,{nullValue:!0}),b=tmplbis(setOptionValue("INGRAPHDATATMPL",i,a,l,void 0,t.inGraphDataTmpl,S,x,{nullValue:!0}),l[S][x],t);i.translate(l[S][x].xPos+y,l[S][x].yAxisPos-P.mainVal*l[S][x].yPosOffset-L),i.rotate(setOptionValue("INGRAPHDATAROTATE",i,a,l,void 0,t.inGraphDataRotate,S,x,{nullValue:!0})*(Math.PI/180)),i.fillTextMultiLine(b,0,0,i.textBaseline,setOptionValue("INGRAPHDATAFONTSIZE",i,a,l,void 0,t.inGraphDataFontSize,S,x,{nullValue:!0}),!0),i.restore()}}i.setLineDash([])}function log10(e){return Math.log(e)/Math.LN10}function setRect(e,a){a.clearRect?a.multiGraph||(clear(e),e.clearRect(0,0,width,height)):(clear(e),e.clearRect(0,0,width,height),e.fillStyle=a.savePngBackgroundColor,e.strokeStyle=a.savePngBackgroundColor,e.beginPath(),e.moveTo(0,0),e.lineTo(0,e.canvas.height),e.lineTo(e.canvas.width,e.canvas.height),e.lineTo(e.canvas.width,0),e.lineTo(0,0),e.stroke(),e.fill())}function defMouse(e,a,t){function i(i,l,n){function o(i){(null==n||n(i))&&doMouseAction(t,e,i,a,"mouseaction",l)}if("function"==typeof l){var s=i+" "+l.name;s in e._eventListeners&&(e.canvas.removeEventListener?e.canvas.removeEventListener(i,e._eventListeners[s]):e.canvas.detachEvent&&e.canvas.detachEvent(i,e._eventListeners[s])),e._eventListeners[s]=o,e.canvas.addEventListener?("mousewheel"==i&&(i="DOMMouseScroll"),e.canvas.addEventListener(i,o,!1)):e.canvas.attachEvent&&e.canvas.attachEvent("on"+i,o)}}var l=!1;if("function"==typeof t.annotateDisplay)l=!0;else if("object"==typeof t.annotateDisplay)for(var n=0;n<t.annotateDisplay.length;n++)t.annotateDisplay[n]&&(l=!0);else todoannotage=t.annotateDisplay;isBooleanOptionTrue(void 0,t.annotateDisplay)&&(0==cursorDivCreated&&(oCursor=new makeCursorObj("divCursor")),isIE()<9&&0!=isIE()?e.canvas.attachEvent("on"+t.annotateFunction.split(" ")[0],function(i){("left"==t.annotateFunction.split(" ")[1]&&1==i.which||"middle"==t.annotateFunction.split(" ")[1]&&2==i.which||"right"==t.annotateFunction.split(" ")[1]&&3==i.which||"string"!=typeof t.annotateFunction.split(" ")[1])&&doMouseAction(t,e,i,a,"annotate",t.mouseDownRight)}):e.canvas.addEventListener(t.annotateFunction.split(" ")[0],function(i){("left"==t.annotateFunction.split(" ")[1]&&1==i.which||"middle"==t.annotateFunction.split(" ")[1]&&2==i.which||"right"==t.annotateFunction.split(" ")[1]&&3==i.which||"string"!=typeof t.annotateFunction.split(" ")[1])&&doMouseAction(t,e,i,a,"annotate",t.mouseDownRight)},!1)),t.savePng&&(isIE()<9&&0!=isIE()?e.canvas.attachEvent("on"+t.savePngFunction.split(" ")[0],function(i){("left"==t.savePngFunction.split(" ")[1]&&1==i.which||"middle"==t.savePngFunction.split(" ")[1]&&2==i.which||"right"==t.savePngFunction.split(" ")[1]&&3==i.which||"string"!=typeof t.savePngFunction.split(" ")[1])&&saveCanvas(e,a,t)}):e.canvas.addEventListener(t.savePngFunction.split(" ")[0],function(i){("left"==t.savePngFunction.split(" ")[1]&&1==i.which||"middle"==t.savePngFunction.split(" ")[1]&&2==i.which||"right"==t.savePngFunction.split(" ")[1]&&3==i.which||"string"!=typeof t.savePngFunction.split(" ")[1])&&saveCanvas(e,a,t)},!1)),isIE()<9&&0!=isIE()?e.canvas.attachEvent("onmousewheel",function(){cursorDivCreated&&(document.getElementById("divCursor").style.display="none")}):e.canvas.addEventListener("DOMMouseScroll",function(){cursorDivCreated&&(document.getElementById("divCursor").style.display="none")},!1),i("mousedown",t.mouseDownLeft,function(e){return 1==e.which}),i("mousedown",t.mouseDownMiddle,function(e){return 2==e.which}),i("mousedown",t.mouseDownRight,function(e){return 3==e.which}),i("mousemove",t.mouseMove),i("mouseout",t.mouseOut),i("mousewheel",t.mouseWheel)}var chart=this,animationOptions={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-1*e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-0.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1*((e=e/1-1)*e*e+1)},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-1*((e=e/1-1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-0.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return 1*(e/=1)*e*e*e*e},easeOutQuint:function(e){return 1*((e=e/1-1)*e*e*e*e+1)},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return-1*Math.cos(e/1*(Math.PI/2))+1},easeOutSine:function(e){return 1*Math.sin(e/1*(Math.PI/2))},easeInOutSine:function(e){return-0.5*(Math.cos(Math.PI*e/1)-1)},easeInExpo:function(e){return 0==e?1:1*Math.pow(2,10*(e/1-1))},easeOutExpo:function(e){return 1==e?1:1*(-Math.pow(2,-10*e/1)+1)},easeInOutExpo:function(e){return 0==e?0:1==e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(-Math.pow(2,-10*--e)+2)},easeInCirc:function(e){return e>=1?e:-1*(Math.sqrt(1-(e/=1)*e)-1)},easeOutCirc:function(e){return 1*Math.sqrt(1-(e=e/1-1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-0.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var a=1.70158,t=0,i=1;if(0==e)return 0;if(1==(e/=1))return 1;if(t||(t=.3),i<Math.abs(1)){i=1;var a=t/4}else var a=t/(2*Math.PI)*Math.asin(1/i);return-(i*Math.pow(2,10*(e-=1))*Math.sin(2*(1*e-a)*Math.PI/t))},easeOutElastic:function(e){var a=1.70158,t=0,i=1;if(0==e)return 0;if(1==(e/=1))return 1;if(t||(t=.3),i<Math.abs(1)){i=1;var a=t/4}else var a=t/(2*Math.PI)*Math.asin(1/i);return i*Math.pow(2,-10*e)*Math.sin(2*(1*e-a)*Math.PI/t)+1},easeInOutElastic:function(e){var a=1.70158,t=0,i=1;if(0==e)return 0;if(2==(e/=.5))return 1;if(t||(t=.3*1.5),i<Math.abs(1)){i=1;var a=t/4}else var a=t/(2*Math.PI)*Math.asin(1/i);return 1>e?-.5*i*Math.pow(2,10*(e-=1))*Math.sin(2*(1*e-a)*Math.PI/t):i*Math.pow(2,-10*(e-=1))*Math.sin(2*(1*e-a)*Math.PI/t)*.5+1},easeInBack:function(e){var a=1.70158;return 1*(e/=1)*e*((a+1)*e-a)},easeOutBack:function(e){var a=1.70158;return 1*((e=e/1-1)*e*((a+1)*e+a)+1)},easeInOutBack:function(e){var a=1.70158;return(e/=.5)<1?.5*e*e*(((a*=1.525)+1)*e-a):.5*((e-=2)*e*(((a*=1.525)+1)*e+a)+2)},easeInBounce:function(e){return 1-animationOptions.easeOutBounce(1-e)},easeOutBounce:function(e){return(e/=1)<1/2.75?7.5625*e*e:2/2.75>e?1*(7.5625*(e-=1.5/2.75)*e+.75):2.5/2.75>e?1*(7.5625*(e-=2.25/2.75)*e+.9375):1*(7.5625*(e-=2.625/2.75)*e+.984375)},easeInOutBounce:function(e){return.5>e?.5*animationOptions.easeInBounce(2*e):.5*animationOptions.easeOutBounce(2*e-1)+.5}},width=context.canvas.width,height=context.canvas.height;window.devicePixelRatio&&(context.canvas.style.width=width+"px",context.canvas.style.height=height+"px",context.canvas.height=height*window.devicePixelRatio,context.canvas.width=width*window.devicePixelRatio,context.scale(window.devicePixelRatio,window.devicePixelRatio)),this.PolarArea=function(e,a){chart.PolarArea.defaults={inGraphDataShow:!1,inGraphDataPaddingRadius:5,inGraphDataPaddingAngle:0,inGraphDataTmpl:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,inGraphDataAnglePosition:2,scaleOverlay:!0,scaleOverride:!1,scaleOverride2:!1,scaleGridLinesStep:1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:!0,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleLineStyle:"solid",scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeStyle:"solid",segmentStrokeWidth:2,animation:!0,animationByData:"ByArc",animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null,annotateLabel:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",startAngle:90},chart.PolarArea.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.PolarArea.defaults),chart.PolarArea.defaults=mergeChartConfig(chart.PolarArea.defaults,charJSPersonalDefaultOptions),chart.PolarArea.defaults=mergeChartConfig(chart.PolarArea.defaults,charJSPersonalDefaultOptionsPolarArea);var t=a?mergeChartConfig(chart.PolarArea.defaults,a):chart.PolarArea.defaults;return new PolarArea(e,t,context)},this.Radar=function(e,a){chart.Radar.defaults={inGraphDataShow:!1,inGraphDataPaddingRadius:5,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,yAxisMinimumInterval:"none",scaleGridLinesStep:1,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:!0,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!1,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,angleShowLineOut:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineStyle:"solid",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:12,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointDotStrokeStyle:"solid",datasetFill:!0,datasetStrokeWidth:2,datasetStrokeStyle:"solid",animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3%>",pointHitDetectionRadius:10,startAngle:90},chart.Radar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Radar.defaults),chart.Radar.defaults=mergeChartConfig(chart.Radar.defaults,charJSPersonalDefaultOptions),chart.Radar.defaults=mergeChartConfig(chart.Radar.defaults,charJSPersonalDefaultOptionsRadar);var t=a?mergeChartConfig(chart.Radar.defaults,a):chart.Radar.defaults;return new Radar(e,t,context)},this.Pie=function(e,a){chart.Pie.defaults={inGraphDataShow:!1,inGraphDataPaddingRadius:5,inGraphDataPaddingAngle:0,inGraphDataTmpl:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,inGraphDataAnglePosition:2,inGraphDataMinimumAngle:0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeStyle:"solid",segmentStrokeWidth:2,animation:!0,animationByData:!1,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null,annotateLabel:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",startAngle:90,radiusScale:1},chart.Pie.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Pie.defaults),chart.Pie.defaults=mergeChartConfig(chart.Pie.defaults,charJSPersonalDefaultOptions),chart.Pie.defaults=mergeChartConfig(chart.Pie.defaults,charJSPersonalDefaultOptionsPie);var t=a?mergeChartConfig(chart.Pie.defaults,a):chart.Pie.defaults;return new Pie(e,t,context)},this.Doughnut=function(e,a){chart.Doughnut.defaults={inGraphDataShow:!1,inGraphDataPaddingRadius:5,inGraphDataPaddingAngle:0,inGraphDataTmpl:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,inGraphDataAnglePosition:2,inGraphDataMinimumAngle:0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeStyle:"solid",segmentStrokeWidth:2,percentageInnerCutout:50,animation:!0,animationByData:!1,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null,annotateLabel:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",startAngle:90,radiusScale:1},chart.Doughnut.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Doughnut.defaults),chart.Doughnut.defaults=mergeChartConfig(chart.Doughnut.defaults,charJSPersonalDefaultOptions),chart.Doughnut.defaults=mergeChartConfig(chart.Doughnut.defaults,charJSPersonalDefaultOptionsDoughnut);var t=a?mergeChartConfig(chart.Doughnut.defaults,a):chart.Doughnut.defaults;return new Doughnut(e,t,context)},this.Line=function(e,a){chart.Line.defaults={inGraphDataShow:!1,inGraphDataPaddingX:3,inGraphDataPaddingY:3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"left",inGraphDataVAlign:"bottom",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",drawXScaleLine:[{position:"bottom"}],scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleSteps2:null,scaleStepWidth2:null,scaleStartValue2:null,scaleLabel2:"<%=value%>",scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineStyle:"solid",scaleGridLineWidth:1,showYAxisMin:!0,rotateLabels:"smart",logarithmic:!1,logarithmic2:!1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeStyle:"solid",pointDotStrokeWidth:2,datasetStrokeStyle:"solid",datasetStrokeWidth:2,datasetFill:!0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",extrapolateMissingData:!0,onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3%>",pointHitDetectionRadius:10},chart.Line.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Line.defaults),chart.Line.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.Line.defaults),chart.Line.defaults=mergeChartConfig(chart.Line.defaults,charJSPersonalDefaultOptions),chart.Line.defaults=mergeChartConfig(chart.Line.defaults,charJSPersonalDefaultOptionsLine);var t=a?mergeChartConfig(chart.Line.defaults,a):chart.Line.defaults;return new Line(e,t,context)},this.StackedBar=function(e,a){chart.StackedBar.defaults={inGraphDataShow:!1,inGraphDataPaddingX:0,inGraphDataPaddingY:-3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"center",inGraphDataVAlign:"top",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:2,inGraphDataYPosition:3,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineStyle:"solid",scaleGridLineWidth:1,showYAxisMin:!0,rotateLabels:"smart",scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,pointDot:!0,pointDotRadius:4,pointDotStrokeStyle:"solid",pointDotStrokeWidth:2,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,spaceBetweenBar:0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",pointHitDetectionRadius:10},chart.StackedBar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.StackedBar.defaults),chart.StackedBar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.StackedBar.defaults),chart.StackedBar.defaults=mergeChartConfig(chart.StackedBar.defaults,charJSPersonalDefaultOptions),chart.StackedBar.defaults=mergeChartConfig(chart.StackedBar.defaults,charJSPersonalDefaultOptionsStackedBar);var t=a?mergeChartConfig(chart.StackedBar.defaults,a):chart.StackedBar.defaults;return new StackedBar(e,t,context)},this.HorizontalStackedBar=function(e,a){chart.HorizontalStackedBar.defaults={inGraphDataShow:!1,inGraphDataPaddingX:-3,inGraphDataPaddingY:0,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"right",inGraphDataVAlign:"middle",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:3,inGraphDataYPosition:2,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineStyle:"solid",scaleGridLineWidth:1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,showYAxisMin:!0,rotateLabels:"smart",barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,spaceBetweenBar:0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",reverseOrder:!1},chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.HorizontalStackedBar.defaults),chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.HorizontalStackedBar.defaults),chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.HorizontalStackedBar.defaults,charJSPersonalDefaultOptions),chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.HorizontalStackedBar.defaults,charJSPersonalDefaultOptionsHorizontalStackedBar);
var t=a?mergeChartConfig(chart.HorizontalStackedBar.defaults,a):chart.HorizontalStackedBar.defaults;return new HorizontalStackedBar(e,t,context)},this.Bar=function(e,a){chart.Bar.defaults={inGraphDataShow:!1,inGraphDataPaddingX:0,inGraphDataPaddingY:3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"center",inGraphDataVAlign:"bottom",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:2,inGraphDataYPosition:3,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleSteps2:null,scaleStepWidth2:null,scaleStartValue2:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleLabel2:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleGridLineStyle:"solid",showYAxisMin:!0,rotateLabels:"smart",logarithmic:!1,logarithmic2:!1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,barBorderRadius:0,pointDot:!0,pointDotRadius:4,pointDotStrokeStyle:"solid",pointDotStrokeWidth:2,extrapolateMissingData:!0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,pointDot:!0,bezierCurve:!0,bezierCurveTension:.4,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",pointHitDetectionRadius:10},chart.Bar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Bar.defaults),chart.Bar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.Bar.defaults),chart.Bar.defaults=mergeChartConfig(chart.Bar.defaults,charJSPersonalDefaultOptions),chart.Bar.defaults=mergeChartConfig(chart.Bar.defaults,charJSPersonalDefaultOptionsBar);var t=a?mergeChartConfig(chart.Bar.defaults,a):chart.Bar.defaults;return new Bar(e,t,context)},this.HorizontalBar=function(e,a){chart.HorizontalBar.defaults={inGraphDataShow:!1,inGraphDataPaddingX:3,inGraphDataPaddingY:0,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"left",inGraphDataVAlign:"middle",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:3,inGraphDataYPosition:2,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineStyle:"solid",scaleGridLineWidth:1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,showYAxisMin:!0,rotateLabels:"smart",barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,barBorderRadius:0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",reverseOrder:!1},chart.HorizontalBar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.HorizontalBar.defaults),chart.HorizontalBar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.HorizontalBar.defaults),chart.HorizontalBar.defaults=mergeChartConfig(chart.HorizontalBar.defaults,charJSPersonalDefaultOptions),chart.HorizontalBar.defaults=mergeChartConfig(chart.HorizontalBar.defaults,charJSPersonalDefaultOptionsHorizontalBar);var t=a?mergeChartConfig(chart.HorizontalBar.defaults,a):chart.HorizontalBar.defaults;return new HorizontalBar(e,t,context)},chart.defaults={},chart.defaults.commonOptions={multiGraph:!1,clearRect:!0,dynamicDisplay:!1,graphSpaceBefore:5,graphSpaceAfter:5,canvasBorders:!1,canvasBackgroundColor:"none",canvasBordersWidth:3,canvasBordersStyle:"solid",canvasBordersColor:"black",zeroValue:1e-10,graphTitle:"",graphTitleFontFamily:"'Arial'",graphTitleFontSize:24,graphTitleFontStyle:"bold",graphTitleFontColor:"#666",graphTitleSpaceBefore:5,graphTitleSpaceAfter:5,graphSubTitle:"",graphSubTitleFontFamily:"'Arial'",graphSubTitleFontSize:18,graphSubTitleFontStyle:"normal",graphSubTitleFontColor:"#666",graphSubTitleSpaceBefore:5,graphSubTitleSpaceAfter:5,footNote:"",footNoteFontFamily:"'Arial'",footNoteFontSize:8,footNoteFontStyle:"bold",footNoteFontColor:"#666",footNoteSpaceBefore:5,footNoteSpaceAfter:5,legend:!1,showSingleLegend:!1,maxLegendCols:999,legendPosY:4,legendPosX:-2,legendFontFamily:"'Arial'",legendFontSize:12,legendFontStyle:"normal",legendFontColor:"#666",legendBlockSize:15,legendBorders:!0,legendBordersStyle:"solid",legendBordersWidth:1,legendBordersColors:"#666",legendBordersSpaceBefore:5,legendBordersSpaceAfter:5,legendBordersSpaceLeft:5,legendBordersSpaceRight:5,legendSpaceBeforeText:5,legendSpaceAfterText:5,legendSpaceLeftText:5,legendSpaceRightText:5,legendSpaceBetweenTextVertical:5,legendSpaceBetweenTextHorizontal:5,legendSpaceBetweenBoxAndText:5,legendFillColor:"rgba(0,0,0,0)",legendXPadding:0,legendYPadding:0,annotateDisplay:!1,annotateRelocate:!1,savePng:!1,savePngOutput:"NewWindow",savePngFunction:"mousedown right",savePngBackgroundColor:"WHITE",annotateFunction:"mousemove",annotateFontFamily:"'Arial'",annotateBorder:"none",annotateBorderRadius:"2px",annotateBackgroundColor:"rgba(0,0,0,0.8)",annotateFontSize:12,annotateFontColor:"white",annotateFontStyle:"normal",annotatePadding:"3px",annotateClassName:"",crossText:[""],crossTextIter:["all"],crossTextOverlay:[!0],crossTextFontFamily:["'Arial'"],crossTextFontSize:[12],crossTextFontStyle:["normal"],crossTextFontColor:["rgba(220,220,220,1)"],crossTextRelativePosX:[2],crossTextRelativePosY:[2],crossTextBaseline:["middle"],crossTextAlign:["center"],crossTextPosX:[0],crossTextPosY:[0],crossTextAngle:[0],crossTextFunction:null,crossImage:[void 0],crossImageIter:["all"],crossImageOverlay:[!0],crossImageRelativePosX:[2],crossImageRelativePosY:[2],crossImageBaseline:["middle"],crossImageAlign:["center"],crossImagePosX:[0],crossImagePosY:[0],crossImageAngle:[0],spaceTop:0,spaceBottom:0,spaceRight:0,spaceLeft:0,decimalSeparator:".",thousandSeparator:"",roundNumber:"none",roundPct:-1,templatesOpenTag:"<%=",templatesCloseTag:"%>",fmtV1:"none",fmtV2:"none",fmtV3:"none",fmtV4:"none",fmtV5:"none",fmtV6:"none",fmtV6T:"none",fmtV7:"none",fmtV8:"none",fmtV8T:"none",fmtV9:"none",fmtV10:"none",fmtV11:"none",fmtV12:"none",fmtV13:"none",fmtXLabel:"none",fmtYLabel:"none",fmtYLabel2:"none",fmtLegend:"none",animationStartValue:0,animationStopValue:1,animationCount:1,animationPauseTime:5,animationBackward:!1,animationStartWithDataset:1,animationStartWithData:1,animationLeftToRight:!1,animationByDataset:!1,defaultStrokeColor:"rgba(220,220,220,1)",defaultFillColor:"rgba(220,220,220,0.5)",defaultLineWidth:2,graphMaximized:!1,mouseDownRight:null,mouseDownLeft:null,mouseDownMiddle:null,mouseMove:null,mouseOut:null,mouseWheel:null,savePngName:"canvas",responsive:!1,responsiveMinWidth:0,responsiveMinHeight:0,responsiveMaxWidth:9999999,responsiveMaxHeight:9999999,maintainAspectRatio:!0,pointMarker:"circle"},chart.defaults.xyAxisCommonOptions={yAxisMinimumInterval:"none",yAxisMinimumInterval2:"none",yScaleLabelsMinimumWidth:0,xScaleLabelsMinimumWidth:0,yAxisLeft:!0,yAxisRight:!1,xAxisBottom:!0,xAxisTop:!1,xAxisSpaceBetweenLabels:5,fullWidthGraph:!1,yAxisLabel:"",yAxisLabel2:"",yAxisFontFamily:"'Arial'",yAxisFontSize:16,yAxisFontStyle:"normal",yAxisFontColor:"#666",yAxisLabelSpaceRight:5,yAxisLabelSpaceLeft:5,yAxisSpaceRight:5,yAxisSpaceLeft:5,xAxisLabel:"",xAxisFontFamily:"'Arial'",xAxisFontSize:16,xAxisFontStyle:"normal",xAxisFontColor:"#666",xAxisLabelSpaceBefore:5,xAxisLabelSpaceAfter:5,xAxisSpaceBefore:5,xAxisSpaceAfter:5,yAxisUnit:"",yAxisUnit2:"",yAxisUnitFontFamily:"'Arial'",yAxisUnitFontSize:8,yAxisUnitFontStyle:"normal",yAxisUnitFontColor:"#666",yAxisUnitSpaceBefore:5,yAxisUnitSpaceAfter:5};var clear=function(e){e.clearRect(0,0,width,height)},PolarArea=function(e,a,t){function i(i){for(var l=0;l<e.length;l++){var n=1,r=1;if(a.animation&&(a.animateScale&&(n=i),a.animateRotate&&(r=i)),correctedRotateAnimation=animationCorrection(r,e,a,l,-1,0).mainVal,"undefined"!=typeof e[l].value){if(t.beginPath(),"ByArc"==a.animationByData)endAngle=f[l].startAngle+correctedRotateAnimation*f[l].segmentAngle,t.arc(p,g,n*f[l].radiusOffset,f[l].startAngle,endAngle,!1);else if(a.animationByData){if(!(f[l].startAngle-f[l].firstAngle<2*correctedRotateAnimation*Math.PI))continue;endAngle=f[l].endAngle,f[l].endAngle-f[l].firstAngle>2*correctedRotateAnimation*Math.PI&&(endAngle=f[l].firstAngle+2*correctedRotateAnimation*Math.PI),t.arc(p,g,n*f[l].radiusOffset,f[l].startAngle,endAngle,!1)}else t.arc(p,g,n*f[l].radiusOffset,f[l].firstAngle+correctedRotateAnimation*(f[l].startAngle-f[l].firstAngle),f[l].firstAngle+correctedRotateAnimation*(f[l].endAngle-f[l].firstAngle));t.lineTo(p,g),t.closePath(),t.fillStyle=setOptionValue("COLOR",t,e,f,e[l].color,a.defaultFillColor,l,-1,{animationDecimal:i,scaleAnimation:n}),t.fill(),a.segmentShowStroke&&(t.strokeStyle=a.segmentStrokeColor,t.lineWidth=a.segmentStrokeWidth,t.setLineDash(lineStyleFn(setOptionValue("SEGMENTSTROKESTYLE",t,e,f,e[l].segmentStrokeStyle,a.segmentStrokeStyle,l,-1,{animationDecimal:i,scaleAnimation:n}))),t.stroke(),t.setLineDash([]))}}if(i>=a.animationStopValue)for(var l=0;l<e.length;l++)if("undefined"!=typeof e[l].value&&(setOptionValue("ANNOTATEDISPLAY",t,e,f,void 0,a.annotateDisplay,l,-1,{nullValue:!0})&&(jsGraphAnnotate[t.ChartNewId][jsGraphAnnotate[t.ChartNewId].length]=["ARC",l,-1,f]),setOptionValue("INGRAPHDATASHOW",t,e,f,void 0,a.inGraphDataShow,l,-1,{nullValue:!0}))){1==setOptionValue("INGRAPHDATAANGLEPOSITION",t,e,f,void 0,a.inGraphDataAnglePosition,l,-1,{nullValue:!0})?posAngle=f[l].realStartAngle+setOptionValue("INGRAPHDATAPADDINANGLE",t,e,f,void 0,a.inGraphDataPaddingAngle,l,-1,{nullValue:!0})*(Math.PI/180):2==setOptionValue("INGRAPHDATAANGLEPOSITION",t,e,f,void 0,a.inGraphDataAnglePosition,l,-1,{nullValue:!0})?posAngle=(2*f[l].realStartAngle-f[l].segmentAngle)/2+setOptionValue("INGRAPHDATAPADDINANGLE",t,e,f,void 0,a.inGraphDataPaddingAngle,l,-1,{nullValue:!0})*(Math.PI/180):3==setOptionValue("INGRAPHDATAANGLEPOSITION",t,e,f,void 0,a.inGraphDataAnglePosition,l,-1,{nullValue:!0})&&(posAngle=f[l].realStartAngle-f[l].segmentAngle+setOptionValue("INGRAPHDATAPADDINANGLE",t,e,f,void 0,a.inGraphDataPaddingAngle,l,-1,{nullValue:!0})*(Math.PI/180)),1==setOptionValue("INGRAPHDATARADIUSPOSITION",t,e,f,void 0,a.inGraphDataRadiusPosition,l,-1,{nullValue:!0})?labelRadius=0+setOptionValue("INGRAPHDATAPADDINGRADIUS",t,e,f,void 0,a.inGraphDataPaddingRadius,l,-1,{nullValue:!0}):2==setOptionValue("INGRAPHDATARADIUSPOSITION",t,e,f,void 0,a.inGraphDataRadiusPosition,l,-1,{nullValue:!0})?labelRadius=f[l].radiusOffset/2+setOptionValue("INGRAPHDATAPADDINGRADIUS",t,e,f,void 0,a.inGraphDataPaddingRadius,l,-1,{nullValue:!0}):3==setOptionValue("INGRAPHDATARADIUSPOSITION",t,e,f,void 0,a.inGraphDataRadiusPosition,l,-1,{nullValue:!0})?labelRadius=f[l].radiusOffset+setOptionValue("INGRAPHDATAPADDINGRADIUS",t,e,f,void 0,a.inGraphDataPaddingRadius,l,-1,{nullValue:!0}):4==setOptionValue("INGRAPHDATARADIUSPOSITION",t,e,f,void 0,a.inGraphDataRadiusPosition,l,-1,{nullValue:!0})&&(labelRadius=o*s.steps+setOptionValue("INGRAPHDATAPADDINGRADIUS",t,e,f,void 0,a.inGraphDataPaddingRadius,l,-1,{nullValue:!0})),t.save(),t.textAlign="off-center"==setOptionValue("INGRAPHDATAALIGN",t,e,f,void 0,a.inGraphDataAlign,l,-1,{nullValue:!0})?"inRadiusAxis"==setOptionValue("INGRAPHDATAROTATE",t,e,f,void 0,a.inGraphDataRotate,l,-1,{nullValue:!0})||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2?"left":"right":"to-center"==setOptionValue("INGRAPHDATAALIGN",t,e,f,void 0,a.inGraphDataAlign,l,-1,{nullValue:!0})?"inRadiusAxis"==setOptionValue("INGRAPHDATAROTATE",t,e,f,void 0,a.inGraphDataRotate,l,-1,{nullValue:!0})||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2?"right":"left":setOptionValue("INGRAPHDATAALIGN",t,e,f,void 0,a.inGraphDataAlign,l,-1,{nullValue:!0}),t.textBaseline="off-center"==setOptionValue("INGRAPHDATAVALIGN",t,e,f,void 0,a.inGraphDataVAlign,l,-1,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?"top":"bottom":"to-center"==setOptionValue("INGRAPHDATAVALIGN",t,e,f,void 0,a.inGraphDataVAlign,l,-1,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?"bottom":"top":setOptionValue("INGRAPHDATAVALIGN",t,e,f,void 0,a.inGraphDataVAlign,l,-1,{nullValue:!0}),t.font=setOptionValue("INGRAPHDATAFONTSTYLE",t,e,f,void 0,a.inGraphDataFontStyle,l,-1,{nullValue:!0})+" "+setOptionValue("INGRAPHDATAFONTSIZE",t,e,f,void 0,a.inGraphDataFontSize,l,-1,{nullValue:!0})+"px "+setOptionValue("INGRAPHDATAFONTFAMILY",t,e,f,void 0,a.inGraphDataFontFamily,l,-1,{nullValue:!0}),t.fillStyle=setOptionValue("INGRAPHDATAFONTCOLOR",t,e,f,void 0,a.inGraphDataFontColor,l,-1,{nullValue:!0});var d=tmplbis(setOptionValue("INGRAPHDATATMPL",t,e,f,void 0,a.inGraphDataTmpl,l,-1,{nullValue:!0}),f[l],a);t.translate(p+labelRadius*Math.cos(posAngle),g-labelRadius*Math.sin(posAngle)),t.rotate("inRadiusAxis"==setOptionValue("INGRAPHDATAROTATE",t,e,f,void 0,a.inGraphDataRotate,l,-1,{nullValue:!0})?2*Math.PI-posAngle:"inRadiusAxisRotateLabels"==setOptionValue("INGRAPHDATAROTATE",t,e,f,void 0,a.inGraphDataRotate,l,-1,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(posAngle+2*Math.PI)%(2*Math.PI)<3*Math.PI/2?3*Math.PI-posAngle:2*Math.PI-posAngle:setOptionValue("INGRAPHDATAROTATE",t,e,f,void 0,a.inGraphDataRotate,l,-1,{nullValue:!0})*(Math.PI/180)),t.fillTextMultiLine(d,0,0,t.textBaseline,setOptionValue("INGRAPHDATAFONTSIZE",t,e,f,void 0,a.inGraphDataFontSize,l,-1,{nullValue:!0}),!0),t.restore()}h.legendMsr.dispLegend&&drawLegend(h.legendMsr,e,a,t,"PolarArea")}function l(){for(var e=0;e<s.steps;e++)if(a.scaleShowLine&&(e+1)%a.scaleGridLinesStep==0&&(t.beginPath(),t.arc(p,g,o*(e+1),0,2*Math.PI,!0),t.strokeStyle=a.scaleLineColor,t.lineWidth=a.scaleLineWidth,t.setLineDash(lineStyleFn(a.scaleLineStyle)),t.stroke(),t.setLineDash([])),a.scaleShowLabels){t.textAlign="center",t.font=a.scaleFontStyle+" "+a.scaleFontSize+"px "+a.scaleFontFamily;var i=s.labels[e+1];if(a.scaleShowLabelBackdrop){var l=t.measureTextMultiLine(i,a.scaleFontSize).textWidth;t.fillStyle=a.scaleBackdropColor,t.beginPath(),t.rect(Math.round(p-l/2-a.scaleBackdropPaddingX),Math.round(g-o*(e+1)-.5*a.scaleFontSize-a.scaleBackdropPaddingY),Math.round(l+2*a.scaleBackdropPaddingX),Math.round(a.scaleFontSize+2*a.scaleBackdropPaddingY)),t.fill()}t.textBaseline="middle",t.fillStyle=a.scaleFontColor,t.fillTextMultiLine(i,p,g-o*(e+1),t.textBaseline,a.scaleFontSize,!0)}}function n(){for(var i=-Number.MAX_VALUE,l=Number.MAX_VALUE,n=0;n<e.length;n++)"undefined"!=typeof e[n].value&&(1*e[n].value>i&&(i=1*e[n].value),1*e[n].value<l&&(l=1*e[n].value));l>i&&(i=0,l=0),Math.abs(i-l)<a.zeroValue&&(Math.abs(i)<a.zeroValue&&(i=.9),i>0?(i=1.1*i,l=.9*l):(i=.9*i,l=1.1*l)),"function"==typeof a.graphMin?l=setOptionValue("GRAPHMIN",t,e,f,void 0,a.graphMin,-1,-1,{nullValue:!0}):isNaN(a.graphMin)||(l=a.graphMin),"function"==typeof a.graphMax?i=setOptionValue("GRAPHMAX",t,e,f,void 0,a.graphMax,-1,-1,{nullValue:!0}):isNaN(a.graphMax)||(i=a.graphMax);var o=Math.floor(d/(.66*r)),s=Math.floor(d/r*.5);return{maxValue:i,minValue:l,maxSteps:o,minSteps:s}}var o,s,r,d,c,u,h,p,g;if(t.tpchart="PolarArea",init_and_start(t,e,a)){var f=initPassVariableData_part1(e,a,t);if(c=n(),a.logarithmic=!1,a.logarithmic2=!1,u=a.scaleShowLabels?a.scaleLabel:"",a.scaleOverride){var A=setOptionValue("SCALESTARTVALUE",t,e,f,void 0,a.scaleStartValue,-1,-1,{nullValue:!0}),S=setOptionValue("SCALESTEPS",t,e,f,void 0,a.scaleSteps,-1,-1,{nullValue:!0}),m=setOptionValue("SCALESTEPWIDTH",t,e,f,void 0,a.scaleStepWidth,-1,-1,{nullValue:!0});s={steps:S,stepValue:m,graphMin:A,graphMax:A+S*m,labels:[]},populateLabels(1,a,u,s.labels,s.steps,A,s.graphMax,m),h=setMeasures(e,a,t,height,width,s.labels,null,!0,!1,!1,!1,!0,"PolarArea")}else s=calculateScale(1,a,c.maxSteps,c.minSteps,c.maxValue,c.minValue,u),h=setMeasures(e,a,t,height,width,s.labels,null,!0,!1,!1,!1,!0,"PolarArea");p=h.leftNotUsableSize+h.availableWidth/2,g=h.topNotUsableSize+h.availableHeight/2,o=Math.floor((Min([h.availableHeight,h.availableWidth])/2-5)/s.steps),o>0?(initPassVariableData_part2(f,e,a,t,{midPosX:p,midPosY:g,int_radius:0,ext_radius:o*s.steps,calculatedScale:s,scaleHop:o}),animationLoop(a,l,i,t,h.clrx,h.clry,h.clrwidth,h.clrheight,p,g,p-(Min([h.availableHeight,h.availableWidth])/2-5),g+(Min([h.availableHeight,h.availableWidth])/2-5),e)):testRedraw(t,e,a)}},Radar=function(e,a,t){function i(i){var l=2*Math.PI/e.datasets[0].data.length;t.save();for(var n=0;n<e.datasets.length;n++){for(var o=-1,s=0;s<e.datasets[n].data.length;s++){var r=animationCorrection(i,e,a,n,s,1).animVal;r>1&&(r-=1),"undefined"!=typeof e.datasets[n].data[s]&&(-1==o?(t.beginPath(),t.moveTo(f+r*S[n][s].offsetX,A-r*S[n][s].offsetY),o=s):t.lineTo(f+r*S[n][s].offsetX,A-r*S[n][s].offsetY))}if(t.closePath(),t.fillStyle=a.datasetFill?setOptionValue("COLOR",t,e,S,e.datasets[n].fillColor,a.defaultFillColor,n,-1,{animationValue:r,midPosX:S[n][0].midPosX,midPosY:S[n][0].midPosY,ext_radius:(a.animationLeftToRight?1:r)*S[n][0].calculated_offset_max}):"rgba(0,0,0,0)",t.strokeStyle=setOptionValue("STROKECOLOR",t,e,S,e.datasets[n].strokeColor,a.defaultStrokeColor,n,-1,{nullvalue:null}),t.lineWidth=a.datasetStrokeWidth,t.fill(),t.setLineDash(lineStyleFn(setOptionValue("LINEDASH",t,e,S,e.datasets[n].datasetStrokeStyle,a.datasetStrokeStyle,n,s,{nullvalue:null}))),t.stroke(),t.setLineDash([]),a.pointDot&&(!a.animationLeftToRight||a.animationLeftToRight&&i>=1)){t.beginPath(),t.fillStyle=setOptionValue("MARKERFILLCOLOR",t,e,S,e.datasets[n].pointColor,a.defaultStrokeColor,n,-1,{nullvalue:!0}),t.strokeStyle=setOptionValue("MARKERSTROKESTYLE",t,e,S,e.datasets[n].pointStrokeColor,a.defaultStrokeColor,n,-1,{nullvalue:!0}),t.lineWidth=setOptionValue("MARKERLINEWIDTH",t,e,S,e.datasets[n].pointDotStrokeWidth,a.pointDotStrokeWidth,n,-1,{nullvalue:!0});for(var d=0;d<e.datasets[n].data.length;d++)if("undefined"!=typeof e.datasets[n].data[d]){t.beginPath();var c=setOptionValue("MARKERSHAPE",t,e,S,e.datasets[n].markerShape,a.markerShape,n,s,{nullvalue:!0}),u=setOptionValue("MARKERRADIUS",t,e,S,e.datasets[n].pointDotRadius,a.pointDotRadius,n,s,{nullvalue:!0}),h=setOptionValue("MARKERSTROKESTYLE",t,e,S,e.datasets[n].pointDotStrokeStyle,a.pointDotStrokeStyle,n,s,{nullvalue:!0});drawMarker(t,f+r*S[n][d].offsetX,A-r*S[n][d].offsetY,c,u,h)}}}if(t.restore(),i>=a.animationStopValue)for(var n=0;n<e.datasets.length;n++)for(var s=0;s<e.datasets[n].data.length;s++)if("undefined"!=typeof e.datasets[n].data[s]&&(setOptionValue("ANNOTATEDISPLAY",t,e,S,void 0,a.annotateDisplay,n,s,{nullValue:!0})&&(jsGraphAnnotate[t.ChartNewId][jsGraphAnnotate[t.ChartNewId].length]=["POINT",n,s,S]),setOptionValue("INGRAPHDATASHOW",t,e,S,void 0,a.inGraphDataShow,n,s,{nullValue:!0}))){t.save(),t.beginPath(),t.textAlign=setOptionValue("INGRAPHDATAALIGN",t,e,S,void 0,a.inGraphDataAlign,n,-1,{nullValue:!0}),t.textBaseline=setOptionValue("INGRAPHDATAVALIGN",t,e,S,void 0,a.inGraphDataVAlign,n,-1,{nullValue:!0}),t.textAlign="off-center"==setOptionValue("INGRAPHDATAALIGN",t,e,S,void 0,a.inGraphDataAlign,n,-1,{nullValue:!0})?"inRadiusAxis"==setOptionValue("INGRAPHDATAROTATE",t,e,S,void 0,a.inGraphDataRotate,n,-1,{nullValue:!0})||(a.startAngle*Math.PI/180-s*l+4*Math.PI)%(2*Math.PI)>3*Math.PI/2||(a.startAngle*Math.PI/180-s*l+4*Math.PI)%(2*Math.PI)<=Math.PI/2?"left":"right":"to-center"==setOptionValue("INGRAPHDATAALIGN",t,e,S,void 0,a.inGraphDataAlign,n,-1,{nullValue:!0})?"inRadiusAxis"==setOptionValue("INGRAPHDATAROTATE",t,e,S,void 0,a.inGraphDataRotate,n,-1,{nullValue:!0})||(a.startAngle*Math.PI/180-s*l+4*Math.PI)%(2*Math.PI)>3*Math.PI/2||(a.startAngle*Math.PI/180-s*l+4*Math.PI)%(2*Math.PI)<Math.PI/2?"right":"left":setOptionValue("INGRAPHDATAALIGN",t,e,S,void 0,a.inGraphDataAlign,n,-1,{nullValue:!0}),t.textBaseline="off-center"==setOptionValue("INGRAPHDATAVALIGN",t,e,S,void 0,a.inGraphDataVAlign,n,-1,{nullValue:!0})?(a.startAngle*Math.PI/180-s*l+4*Math.PI)%(2*Math.PI)>Math.PI?"bottom":"top":"to-center"==setOptionValue("INGRAPHDATAVALIGN",t,e,S,void 0,a.inGraphDataVAlign,n,-1,{nullValue:!0})?(a.startAngle*Math.PI/180-s*l+4*Math.PI)%(2*Math.PI)>Math.PI?"top":"bottom":setOptionValue("INGRAPHDATAVALIGN",t,e,S,void 0,a.inGraphDataVAlign,n,-1,{nullValue:!0}),t.font=setOptionValue("INGRAPHDATAFONTSTYLE",t,e,S,void 0,a.inGraphDataFontStyle,n,-1,{nullValue:!0})+" "+setOptionValue("INGRAPHDATAFONTSIZE",t,e,S,void 0,a.inGraphDataFontSize,n,-1,{nullValue:!0})+"px "+setOptionValue("INGRAPHDATAFONTFAMILY",t,e,S,void 0,a.inGraphDataFontFamily,n,-1,{nullValue:!0}),t.fillStyle=setOptionValue("INGRAPHDATAFONTCOLOR",t,e,S,void 0,a.inGraphDataFontColor,n,-1,{nullValue:!0});var p;1==setOptionValue("INGRAPHDATARADIUSPOSITION",t,e,S,void 0,a.inGraphDataRadiusPosition,n,-1,{nullValue:!0})?p=0+setOptionValue("INGRAPHDATAPADDINGRADIUS",t,e,S,void 0,a.inGraphDataPaddingRadius,n,-1,{nullValue:!0}):2==setOptionValue("INGRAPHDATARADIUSPOSITION",t,e,S,void 0,a.inGraphDataRadiusPosition,n,-1,{nullValue:!0})?p=S[n][s].calculated_offset/2+setOptionValue("INGRAPHDATAPADDINGRADIUS",t,e,S,void 0,a.inGraphDataPaddingRadius,n,-1,{nullValue:!0}):3==setOptionValue("INGRAPHDATARADIUSPOSITION",t,e,S,void 0,a.inGraphDataRadiusPosition,n,-1,{nullValue:!0})&&(p=S[n][s].calculated_offset+setOptionValue("INGRAPHDATAPADDINGRADIUS",t,e,S,void 0,a.inGraphDataPaddingRadius,n,-1,{nullValue:!0})),S[n][s].calculated_offset>0?t.translate(f+S[n][s].offsetX*(p/S[n][s].calculated_offset),A-S[n][s].offsetY*(p/S[n][s].calculated_offset)):t.translate(f,A),t.rotate("inRadiusAxis"==setOptionValue("INGRAPHDATAROTATE",t,e,S,void 0,a.inGraphDataRotate,n,-1,{nullValue:!0})?s*l:"inRadiusAxisRotateLabels"==setOptionValue("INGRAPHDATAROTATE",t,e,S,void 0,a.inGraphDataRotate,n,-1,{nullValue:!0})?(s*l+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(s*l+2*Math.PI)%(2*Math.PI)<3*Math.PI/2?3*Math.PI+s*l:2*Math.PI+s*l:setOptionValue("INGRAPHDATAROTATE",t,e,S,void 0,a.inGraphDataRotate,n,-1,{nullValue:!0})*(Math.PI/180));var m=tmplbis(setOptionValue("INGRAPHDATATMPL",t,e,S,void 0,a.inGraphDataTmpl,n,-1,{nullValue:!0}),S[n][s],a);t.fillTextMultiLine(m,0,0,t.textBaseline,setOptionValue("INGRAPHDATAFONTSIZE",t,e,S,void 0,a.inGraphDataFontSize,n,-1,{nullValue:!0}),!0),t.restore()}g.legendMsr.dispLegend&&drawLegend(g.legendMsr,e,a,t,"Radar")}function l(){var i=2*Math.PI/e.datasets[0].data.length;if(t.save(),t.translate(f,A),t.rotate((90-a.startAngle)*Math.PI/180),a.angleShowLineOut){t.strokeStyle=a.angleLineColor,t.lineWidth=a.angleLineWidth;for(var l=0;l<e.datasets[0].data.length;l++)t.rotate(i),t.beginPath(),t.moveTo(0,0),t.lineTo(0,-s),t.setLineDash(lineStyleFn(setOptionValue("ANGLELINESTYLE",t,e,S,void 0,a.angleLineStyle,l,-1,{nullValue:!0}))),t.stroke(),t.setLineDash([])}for(var n=0;n<d.steps;n++)if(t.beginPath(),a.scaleShowLine&&(n+1)%a.scaleGridLinesStep==0){t.strokeStyle=a.scaleLineColor,t.lineWidth=a.scaleLineWidth,t.moveTo(0,-r*(n+1));for(var o=0;o<e.datasets[0].data.length;o++)t.rotate(i),t.lineTo(0,-r*(n+1));t.closePath(),t.setLineDash(lineStyleFn(a.scaleLineStyle)),t.stroke(),t.setLineDash([])}if(t.rotate(-(90-a.startAngle)*Math.PI/180),a.scaleShowLabels)for(var n=0;n<d.steps;n++){if(t.textAlign="center",t.font=a.scaleFontStyle+" "+a.scaleFontSize+"px "+a.scaleFontFamily,t.textBaseline="middle",a.scaleShowLabelBackdrop){var c=t.measureTextMultiLine(d.labels[n+1],a.scaleFontSize).textWidth;t.fillStyle=a.scaleBackdropColor,t.beginPath(),t.rect(Math.round(Math.cos(a.startAngle*Math.PI/180)*r*(n+1)-c/2-a.scaleBackdropPaddingX),Math.round(-Math.sin(a.startAngle*Math.PI/180)*r*(n+1)-.5*a.scaleFontSize-a.scaleBackdropPaddingY),Math.round(c+2*a.scaleBackdropPaddingX),Math.round(a.scaleFontSize+2*a.scaleBackdropPaddingY)),t.fill()}t.fillStyle=a.scaleFontColor,t.fillTextMultiLine(d.labels[n+1],Math.cos(a.startAngle*Math.PI/180)*r*(n+1),-Math.sin(a.startAngle*Math.PI/180)*r*(n+1),t.textBaseline,a.scaleFontSize,!0)}for(var u=0;u<e.labels.length;u++){t.font=a.pointLabelFontStyle+" "+a.pointLabelFontSize+"px "+a.pointLabelFontFamily,t.fillStyle=a.pointLabelFontColor;for(var h=Math.sin((90-a.startAngle)*Math.PI/180+i*u)*(s+a.pointLabelFontSize),p=Math.cos((90-a.startAngle)*Math.PI/180+i*u)*(s+a.pointLabelFontSize),g=(90-a.startAngle)*Math.PI/180+i*u;0>g;)g+=2*Math.PI;for(;g>2*Math.PI;)g-=2*Math.PI;t.textAlign=g==Math.PI||0==g?"center":g>Math.PI?"right":"left",t.textBaseline="middle",t.fillTextMultiLine(e.labels[u],h,-p,t.textBaseline,a.pointLabelFontSize,!0)}t.restore()}function n(){var i,l,n,o,r,d,u,h,p=2*Math.PI/e.datasets[0].data.length,A=a.startAngle*Math.PI/180;if(t.font=a.pointLabelFontStyle+" "+a.pointLabelFontSize+"px "+a.pointLabelFontFamily,a.graphMaximized){o=g.availableWidth/2,n=g.availableWidth/2,d=40;for(var S=0;S<e.labels.length;S++){var m=t.measureTextMultiLine(e.labels[S],a.scaleFontSize).textWidth+t.measureTextMultiLine(e.labels[S],a.scaleFontSize).textHeight;l=(g.availableWidth-m)/(1+Math.abs(Math.cos(A))),A<Math.PI/2&&A>-Math.PI/2||A>3*Math.PI/2?o>l&&(o=l):0!=Math.cos(A)&&n>l&&(n=l),A-=p}}else o=g.availableWidth/2,n=g.availableWidth/2,d=1;for(u=0,h=0,f=o+g.rightNotUsableSize,i=o,r=0;d>r;++r,i+=(g.availableWidth-n-o)/d){s=Max([i,g.availableWidth-i]);var A=a.startAngle*Math.PI/180;l=g.available;for(var S=0;S<e.labels.length;S++){var m=t.measureTextMultiLine(e.labels[S],a.scaleFontSize).textWidth+t.measureTextMultiLine(e.labels[S],a.scaleFontSize).textHeight;A<Math.PI/2&&A>-Math.PI/2||A>3*Math.PI/2?l=(g.availableWidth-i-m)/Math.abs(Math.cos(A)):Math.cos(0!=A)&&(l=(i-m)/Math.abs(Math.cos(A))),s>l&&(s=l),Math.sin(A)*g.availableHeight/2>g.availableHeight/2-2*a.scaleFontSize&&(l=Math.sin(A)*g.availableHeight/2-1.5*a.scaleFontSize,s>l&&(s=l)),A-=p}s>u&&(u=s,f=i+g.rightNotUsableSize)}s=u-a.scaleFontSize/2,c=Default(c,5)}function o(){for(var i=-Number.MAX_VALUE,l=Number.MAX_VALUE,n=0;n<e.datasets.length;n++)for(var o=0;o<e.datasets[n].data.length;o++)"undefined"!=typeof e.datasets[n].data[o]&&(1*e.datasets[n].data[o]>i&&(i=1*e.datasets[n].data[o]),1*e.datasets[n].data[o]<l&&(l=1*e.datasets[n].data[o]));l>i&&(i=0,l=0),Math.abs(i-l)<a.zeroValue&&(Math.abs(i)<a.zeroValue&&(i=.9,l=-.9),i>0?(i=1.1*i,l=.9*l):(i=.9*i,l=1.1*l)),"function"==typeof a.graphMin?l=setOptionValue("GRAPHMIN",t,e,S,void 0,a.graphMin,-1,-1,{nullValue:!0}):isNaN(a.graphMin)||(l=a.graphMin),"function"==typeof a.graphMax?i=setOptionValue("GRAPHMAX",t,e,S,void 0,a.graphMax,-1,-1,{nullValue:!0}):isNaN(a.graphMax)||(i=a.graphMax);var s=Math.floor(u/(.66*c)),r=Math.floor(u/c*.5);return{maxValue:i,minValue:l,maxSteps:s,minSteps:r}}var s,r,d,c,u,h,p,g,f,A;if(t.tpchart="Radar",init_and_start(t,e,a)){var S=initPassVariableData_part1(e,a,t);if(h=o(),a.logarithmic=!1,a.logarithmic2=!1,e.labels||(e.labels=[]),p=a.scaleShowLabels?a.scaleLabel:"",a.scaleOverride){var m=setOptionValue("SCALESTARTVALUE",t,e,S,void 0,a.scaleStartValue,-1,-1,{nullValue:!0}),v=setOptionValue("SCALESTEPS",t,e,S,void 0,a.scaleSteps,-1,-1,{nullValue:!0}),x=setOptionValue("SCALESTEPWIDTH",t,e,S,void 0,a.scaleStepWidth,-1,-1,{nullValue:!0});d={steps:v,stepValue:x,graphMin:m,graphMax:m+v*x,labels:[]},populateLabels(1,a,p,d.labels,d.steps,m,d.graphMax,x),g=setMeasures(e,a,t,height,width,d.labels,null,!0,!1,!1,!0,a.datasetFill,"Radar")}else d=calculateScale(1,a,h.maxSteps,h.minSteps,h.maxValue,h.minValue,p),g=setMeasures(e,a,t,height,width,d.labels,null,!0,!1,!1,!0,a.datasetFill,"Radar");n(),A=g.topNotUsableSize+g.availableHeight/2,r=s/d.steps,initPassVariableData_part2(S,e,a,t,{midPosX:f,midPosY:A,calculatedScale:d,scaleHop:r,maxSize:s}),animationLoop(a,l,i,t,g.clrx,g.clry,g.clrwidth,g.clrheight,f,A,f-s,A+s,e)}},Pie=function(e,a,t){function i(i){for(var l=0;l<e.length;l++){var c=1,u=1;if(a.animation&&(a.animateScale&&(c=i),a.animateRotate&&(u=i)),correctedRotateAnimation=animationCorrection(u,e,a,l,-1,0).mainVal,"undefined"!=typeof e[l].value&&1*e[l].value>=0){if(t.beginPath(),"ByArc"==a.animationByData)endAngle=d[l].startAngle+correctedRotateAnimation*d[l].segmentAngle,t.arc(o,s,c*r,d[l].startAngle,endAngle);else if(a.animationByData){if(!(d[l].startAngle-d[l].firstAngle<2*correctedRotateAnimation*Math.PI))continue;endAngle=d[l].endAngle,d[l].endAngle-d[l].firstAngle>2*correctedRotateAnimation*Math.PI&&(endAngle=d[l].firstAngle+2*correctedRotateAnimation*Math.PI),t.arc(o,s,c*r,d[l].startAngle,endAngle)}else t.arc(o,s,c*r,d[l].firstAngle+correctedRotateAnimation*(d[l].startAngle-d[l].firstAngle),d[l].firstAngle+correctedRotateAnimation*(d[l].endAngle-d[l].firstAngle));t.lineTo(o,s),t.closePath(),t.fillStyle=setOptionValue("COLOR",t,e,d,e[l].color,a.defaultFillColor,l,-1,{animationDecimal:i,scaleAnimation:c}),t.fill(),a.segmentShowStroke&&(t.lineWidth=a.segmentStrokeWidth,t.strokeStyle=a.segmentStrokeColor,t.setLineDash(lineStyleFn(setOptionValue("SEGMENTSTROKESTYLE",t,e,d,e[l].segmentStrokeStyle,a.segmentStrokeStyle,l,-1,{animationDecimal:i,scaleAnimation:c}))),t.stroke(),t.setLineDash([]))}}if(i>=a.animationStopValue)for(var l=0;l<e.length;l++)if(!("undefined"==typeof e[l].value||1*e[l].value<0)&&(setOptionValue("ANNOTATEDISPLAY",t,e,d,void 0,a.annotateDisplay,l,-1,{nullValue:!0})&&(jsGraphAnnotate[t.ChartNewId][jsGraphAnnotate[t.ChartNewId].length]=["ARC",l,-1,d]),setOptionValue("INGRAPHDATASHOW",t,e,d,void 0,a.inGraphDataShow,l,-1,{nullValue:!0})&&d[l].segmentAngle>=Math.PI/180*setOptionValue("INGRAPHDATAMINIMUMANGLE",t,e,d,void 0,a.inGraphDataMinimumAngle,l,-1,{nullValue:!0}))){1==setOptionValue("INGRAPHDATAANGLEPOSITION",t,e,d,void 0,a.inGraphDataAnglePosition,l,-1,{nullValue:!0})?posAngle=d[l].realStartAngle+setOptionValue("INGRAPHDATAPADDINANGLE",t,e,d,void 0,a.inGraphDataPaddingAngle,l,-1,{nullValue:!0})*(Math.PI/180):2==setOptionValue("INGRAPHDATAANGLEPOSITION",t,e,d,void 0,a.inGraphDataAnglePosition,l,-1,{nullValue:!0})?posAngle=d[l].realStartAngle-d[l].segmentAngle/2+setOptionValue("INGRAPHDATAPADDINANGLE",t,e,d,void 0,a.inGraphDataPaddingAngle,l,-1,{nullValue:!0})*(Math.PI/180):3==setOptionValue("INGRAPHDATAANGLEPOSITION",t,e,d,void 0,a.inGraphDataAnglePosition,l,-1,{nullValue:!0})&&(posAngle=d[l].realStartAngle-d[l].segmentAngle+setOptionValue("INGRAPHDATAPADDINANGLE",t,e,d,void 0,a.inGraphDataPaddingAngle,l,-1,{nullValue:!0})*(Math.PI/180)),1==setOptionValue("INGRAPHDATARADIUSPOSITION",t,e,d,void 0,a.inGraphDataRadiusPosition,l,-1,{nullValue:!0})?labelRadius=0+setOptionValue("INGRAPHDATAPADDINGRADIUS",t,e,d,void 0,a.inGraphDataPaddingRadius,l,-1,{nullValue:!0}):2==setOptionValue("INGRAPHDATARADIUSPOSITION",t,e,d,void 0,a.inGraphDataRadiusPosition,l,-1,{nullValue:!0})?labelRadius=r/2+setOptionValue("INGRAPHDATAPADDINGRADIUS",t,e,d,void 0,a.inGraphDataPaddingRadius,l,-1,{nullValue:!0}):3==setOptionValue("INGRAPHDATARADIUSPOSITION",t,e,d,void 0,a.inGraphDataRadiusPosition,l,-1,{nullValue:!0})&&(labelRadius=r+setOptionValue("INGRAPHDATAPADDINGRADIUS",t,e,d,void 0,a.inGraphDataPaddingRadius,l,-1,{nullValue:!0})),t.save(),t.textAlign="off-center"==setOptionValue("INGRAPHDATAALIGN",t,e,d,void 0,a.inGraphDataAlign,l,-1,{nullValue:!0})?"inRadiusAxis"==setOptionValue("INGRAPHDATAROTATE",t,e,d,void 0,a.inGraphDataRotate,l,-1,{nullValue:!0})||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2?"left":"right":"to-center"==setOptionValue("INGRAPHDATAALIGN",t,e,d,void 0,a.inGraphDataAlign,l,-1,{nullValue:!0})?"inRadiusAxis"==setOptionValue("INGRAPHDATAROTATE",t,e,d,void 0,a.inGraphDataRotate,l,-1,{nullValue:!0})||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2?"right":"left":setOptionValue("INGRAPHDATAALIGN",t,e,d,void 0,a.inGraphDataAlign,l,-1,{nullValue:!0}),t.textBaseline="off-center"==setOptionValue("INGRAPHDATAVALIGN",t,e,d,void 0,a.inGraphDataVAlign,l,-1,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?"top":"bottom":"to-center"==setOptionValue("INGRAPHDATAVALIGN",t,e,d,void 0,a.inGraphDataVAlign,l,-1,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?"bottom":"top":setOptionValue("INGRAPHDATAVALIGN",t,e,d,void 0,a.inGraphDataVAlign,l,-1,{nullValue:!0}),t.font=setOptionValue("INGRAPHDATAFONTSTYLE",t,e,d,void 0,a.inGraphDataFontStyle,l,-1,{nullValue:!0})+" "+setOptionValue("INGRAPHDATAFONTSIZE",t,e,d,void 0,a.inGraphDataFontSize,l,-1,{nullValue:!0})+"px "+setOptionValue("INGRAPHDATAFONTFAMILY",t,e,d,void 0,a.inGraphDataFontFamily,l,-1,{nullValue:!0}),t.fillStyle=setOptionValue("INGRAPHDATAFONTCOLOR",t,e,d,void 0,a.inGraphDataFontColor,l,-1,{nullValue:!0});
var h=tmplbis(setOptionValue("INGRAPHDATATMPL",t,e,d,void 0,a.inGraphDataTmpl,l,-1,{nullValue:!0}),d[l],a);t.translate(o+labelRadius*Math.cos(posAngle),s-labelRadius*Math.sin(posAngle)),t.rotate("inRadiusAxis"==setOptionValue("INGRAPHDATAROTATE",t,e,d,void 0,a.inGraphDataRotate,l,-1,{nullValue:!0})?2*Math.PI-posAngle:"inRadiusAxisRotateLabels"==setOptionValue("INGRAPHDATAROTATE",t,e,d,void 0,a.inGraphDataRotate,l,-1,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(posAngle+2*Math.PI)%(2*Math.PI)<3*Math.PI/2?3*Math.PI-posAngle:2*Math.PI-posAngle:setOptionValue("INGRAPHDATAROTATE",t,e,d,void 0,a.inGraphDataRotate,l,-1,{nullValue:!0})*(Math.PI/180)),t.fillTextMultiLine(h,0,0,t.textBaseline,setOptionValue("INGRAPHDATAFONTSIZE",t,e,d,void 0,a.inGraphDataFontSize,l,-1,{nullValue:!0}),!0),t.restore()}n.legendMsr.dispLegend&&drawLegend(n.legendMsr,e,a,t,"Pie")}function l(){if(o=n.leftNotUsableSize+n.availableWidth/2,s=n.topNotUsableSize+n.availableHeight/2,r=Min([n.availableHeight/2,n.availableWidth/2])-5,isBooleanOptionTrue(void 0,a.inGraphDataShow)&&3==setOptionValue("INGRAPHDATARADIUSPOSITION",t,e,d,void 0,a.inGraphDataRadiusPosition,0,-1,{nullValue:!0})&&"off-center"==setOptionValue("INGRAPHDATAALIGN",t,e,d,void 0,a.inGraphDataAlign,0,-1,{nullValue:!0})&&0==setOptionValue("INGRAPHDATAROTATE",t,e,d,void 0,a.inGraphDataRotate,0,-1,{nullValue:!0})){r=Min([n.availableHeight/2,n.availableWidth/2])-setOptionValue("INGRAPHDATAFONTSIZE",t,e,d,void 0,a.inGraphDataFontSize,0,-1,{nullValue:!0})-setOptionValue("INGRAPHDATAPADDINGRADIUS",t,e,d,void 0,a.inGraphDataPaddingRadius,0,-1,{nullValue:!0})-5;for(var i=((a.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),l=0;l<e.length;l++)if("undefined"!=typeof e[l].value&&1*e[l].value>=0){t.font=setOptionValue("INGRAPHDATAFONTSTYLE",t,e,d,void 0,a.inGraphDataFontStyle,l,-1,{nullValue:!0})+" "+setOptionValue("INGRAPHDATAFONTSIZE",t,e,d,void 0,a.inGraphDataFontSize,0,-1,{nullValue:!0})+"px "+setOptionValue("INGRAPHDATAFONTFAMILY",t,e,d,void 0,a.inGraphDataFontFamily,l,-1,{nullValue:!0}),1==setOptionValue("INGRAPHDATAANGLEPOSITION",t,e,d,void 0,a.inGraphDataAnglePosition,l,-1,{nullValue:!0})?posAngle=i+setOptionValue("INGRAPHDATAPADDINANGLE",t,e,d,void 0,a.inGraphDataPaddingAngle,l,-1,{nullValue:!0})*(Math.PI/180):2==setOptionValue("INGRAPHDATAANGLEPOSITION",t,e,d,void 0,a.inGraphDataAnglePosition,l,-1,{nullValue:!0})?posAngle=i-d[l].segmentAngle/2+setOptionValue("INGRAPHDATAPADDINANGLE",t,e,d,void 0,a.inGraphDataPaddingAngle,l,-1,{nullValue:!0})*(Math.PI/180):3==setOptionValue("INGRAPHDATAANGLEPOSITION",t,e,d,void 0,a.inGraphDataAnglePosition,l,-1,{nullValue:!0})&&(posAngle=i-d[l].segmentAngle+setOptionValue("INGRAPHDATAPADDINANGLE",t,e,d,void 0,a.inGraphDataPaddingAngle,l,-1,{nullValue:!0})*(Math.PI/180)),i-=d[l].segmentAngle;var c=tmplbis(setOptionValue("INGRAPHDATATMPL",t,e,d,void 0,a.inGraphDataTmpl,l,-1,{nullValue:!0}),d[l],a),u=t.measureText(c).width,h=Math.abs((n.availableWidth/2-u)/Math.cos(posAngle))-setOptionValue("INGRAPHDATAPADDINGRADIUS",t,e,d,void 0,a.inGraphDataPaddingRadius,l,-1,{nullValue:!0})-5;r>h&&(r=h)}}r*=a.radiusScale}var n,o,s,r;if(t.tpchart="Pie",init_and_start(t,e,a)){var d=initPassVariableData_part1(e,a,t);a.logarithmic=!1,a.logarithmic2=!1,n=setMeasures(e,a,t,height,width,"none",null,!0,!1,!1,!1,!0,"Pie"),l(),r>0?(initPassVariableData_part2(d,e,a,t,{midPosX:o,midPosY:s,int_radius:0,ext_radius:r}),animationLoop(a,null,i,t,n.clrx,n.clry,n.clrwidth,n.clrheight,o,s,o-r,s+r,e)):testRedraw(t,e,a)}},Doughnut=function(e,a,t){function i(i){for(var l=(((-a.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),0);l<e.length;l++){var u=1,h=1;if(a.animation&&(a.animateScale&&(u=i),a.animateRotate&&(h=i)),correctedRotateAnimation=animationCorrection(h,e,a,l,-1,0).mainVal,"undefined"!=typeof e[l].value&&1*e[l].value>=0){if(t.beginPath(),"ByArc"==a.animationByData)endAngle=d[l].startAngle+correctedRotateAnimation*d[l].segmentAngle,t.arc(o,s,u*r,d[l].startAngle,endAngle,!1),t.arc(o,s,u*c,endAngle,d[l].startAngle,!0);else if(a.animationByData){if(!(d[l].startAngle-d[l].firstAngle<2*correctedRotateAnimation*Math.PI))continue;endAngle=d[l].endAngle,d[l].endAngle-d[l].firstAngle>2*correctedRotateAnimation*Math.PI&&(endAngle=d[l].firstAngle+2*correctedRotateAnimation*Math.PI),t.arc(o,s,u*r,d[l].startAngle,endAngle,!1),t.arc(o,s,u*c,endAngle,d[l].startAngle,!0)}else t.arc(o,s,u*r,d[l].firstAngle+correctedRotateAnimation*(d[l].startAngle-d[l].firstAngle),d[l].firstAngle+correctedRotateAnimation*(d[l].endAngle-d[l].firstAngle),!1),t.arc(o,s,u*c,d[l].firstAngle+correctedRotateAnimation*(d[l].endAngle-d[l].firstAngle),d[l].firstAngle+correctedRotateAnimation*(d[l].startAngle-d[l].firstAngle),!0);t.closePath(),t.fillStyle=setOptionValue("COLOR",t,e,d,e[l].color,a.defaultFillColor,l,-1,{animationDecimal:i,scaleAnimation:u}),t.fill(),a.segmentShowStroke&&(t.lineWidth=a.segmentStrokeWidth,t.strokeStyle=a.segmentStrokeColor,t.setLineDash(lineStyleFn(setOptionValue("SEGMENTSTROKESTYLE",t,e,d,e[l].segmentStrokeStyle,a.segmentStrokeStyle,l,-1,{animationDecimal:i,scaleAnimation:u}))),t.stroke(),t.setLineDash([]))}}if(i>=a.animationStopValue)for(var l=0;l<e.length;l++)if(!("undefined"==typeof e[l].value||1*e[l].value<0)&&(setOptionValue("ANNOTATEDISPLAY",t,e,d,void 0,a.annotateDisplay,l,-1,{nullValue:!0})&&(jsGraphAnnotate[t.ChartNewId][jsGraphAnnotate[t.ChartNewId].length]=["ARC",l,-1,d]),setOptionValue("INGRAPHDATASHOW",t,e,d,void 0,a.inGraphDataShow,l,-1,{nullValue:!0})&&d[l].segmentAngle>=Math.PI/180*setOptionValue("INGRAPHDATAMINIMUMANGLE",t,e,d,void 0,a.inGraphDataMinimumAngle,l,-1,{nullValue:!0}))){1==setOptionValue("INGRAPHDATAANGLEPOSITION",t,e,d,void 0,a.inGraphDataAnglePosition,l,-1,{nullValue:!0})?posAngle=d[l].realStartAngle+setOptionValue("INGRAPHDATAPADDINANGLE",t,e,d,void 0,a.inGraphDataPaddingAngle,l,-1,{nullValue:!0})*(Math.PI/180):2==setOptionValue("INGRAPHDATAANGLEPOSITION",t,e,d,void 0,a.inGraphDataAnglePosition,l,-1,{nullValue:!0})?posAngle=d[l].realStartAngle-d[l].segmentAngle/2+setOptionValue("INGRAPHDATAPADDINANGLE",t,e,d,void 0,a.inGraphDataPaddingAngle,l,-1,{nullValue:!0})*(Math.PI/180):3==setOptionValue("INGRAPHDATAANGLEPOSITION",t,e,d,void 0,a.inGraphDataAnglePosition,l,-1,{nullValue:!0})&&(posAngle=d[l].realStartAngle-d[l].segmentAngle+setOptionValue("INGRAPHDATAPADDINANGLE",t,e,d,void 0,a.inGraphDataPaddingAngle,l,-1,{nullValue:!0})*(Math.PI/180)),1==setOptionValue("INGRAPHDATARADIUSPOSITION",t,e,d,void 0,a.inGraphDataRadiusPosition,l,-1,{nullValue:!0})?labelRadius=c+setOptionValue("INGRAPHDATAPADDINGRADIUS",t,e,d,void 0,a.inGraphDataPaddingRadius,l,-1,{nullValue:!0}):2==setOptionValue("INGRAPHDATARADIUSPOSITION",t,e,d,void 0,a.inGraphDataRadiusPosition,l,-1,{nullValue:!0})?labelRadius=c+(r-c)/2+setOptionValue("INGRAPHDATAPADDINGRADIUS",t,e,d,void 0,a.inGraphDataPaddingRadius,l,-1,{nullValue:!0}):3==setOptionValue("INGRAPHDATARADIUSPOSITION",t,e,d,void 0,a.inGraphDataRadiusPosition,l,-1,{nullValue:!0})&&(labelRadius=r+setOptionValue("INGRAPHDATAPADDINGRADIUS",t,e,d,void 0,a.inGraphDataPaddingRadius,l,-1,{nullValue:!0})),t.save(),t.textAlign="off-center"==setOptionValue("INGRAPHDATAALIGN",t,e,d,void 0,a.inGraphDataAlign,l,-1,{nullValue:!0})?"inRadiusAxis"==setOptionValue("INGRAPHDATAROTATE",t,e,d,void 0,a.inGraphDataRotate,l,-1,{nullValue:!0})||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2?"left":"right":"to-center"==setOptionValue("INGRAPHDATAALIGN",t,e,d,void 0,a.inGraphDataAlign,l,-1,{nullValue:!0})?"inRadiusAxis"==setOptionValue("INGRAPHDATAROTATE",t,e,d,void 0,a.inGraphDataRotate,l,-1,{nullValue:!0})||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2?"right":"left":setOptionValue("INGRAPHDATAALIGN",t,e,d,void 0,a.inGraphDataAlign,l,-1,{nullValue:!0}),t.textBaseline="off-center"==setOptionValue("INGRAPHDATAVALIGN",t,e,d,void 0,a.inGraphDataVAlign,l,-1,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?"top":"bottom":"to-center"==setOptionValue("INGRAPHDATAVALIGN",t,e,d,void 0,a.inGraphDataVAlign,l,-1,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?"bottom":"top":setOptionValue("INGRAPHDATAVALIGN",t,e,d,void 0,a.inGraphDataVAlign,l,-1,{nullValue:!0}),t.font=setOptionValue("INGRAPHDATAFONTSTYLE",t,e,d,void 0,a.inGraphDataFontStyle,l,-1,{nullValue:!0})+" "+setOptionValue("INGRAPHDATAFONTSIZE",t,e,d,void 0,a.inGraphDataFontSize,l,-1,{nullValue:!0})+"px "+setOptionValue("INGRAPHDATAFONTFAMILY",t,e,d,void 0,a.inGraphDataFontFamily,l,-1,{nullValue:!0}),t.fillStyle=setOptionValue("INGRAPHDATAFONTCOLOR",t,e,d,void 0,a.inGraphDataFontColor,l,-1,{nullValue:!0});var p=tmplbis(setOptionValue("INGRAPHDATATMPL",t,e,d,void 0,a.inGraphDataTmpl,l,-1,{nullValue:!0}),d[l],a);t.translate(o+labelRadius*Math.cos(posAngle),s-labelRadius*Math.sin(posAngle)),t.rotate("inRadiusAxis"==setOptionValue("INGRAPHDATAROTATE",t,e,d,void 0,a.inGraphDataRotate,l,-1,{nullValue:!0})?2*Math.PI-posAngle:"inRadiusAxisRotateLabels"==setOptionValue("INGRAPHDATAROTATE",t,e,d,void 0,a.inGraphDataRotate,l,-1,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(posAngle+2*Math.PI)%(2*Math.PI)<3*Math.PI/2?3*Math.PI-posAngle:2*Math.PI-posAngle:setOptionValue("INGRAPHDATAROTATE",t,e,d,void 0,a.inGraphDataRotate,l,-1,{nullValue:!0})*(Math.PI/180)),t.fillTextMultiLine(p,0,0,t.textBaseline,setOptionValue("INGRAPHDATAFONTSIZE",t,e,d,void 0,a.inGraphDataFontSize,l,-1,{nullValue:!0}),!0),t.restore()}n.legendMsr.dispLegend&&drawLegend(n.legendMsr,e,a,t,"Doughnut")}function l(){if(o=n.leftNotUsableSize+n.availableWidth/2,s=n.topNotUsableSize+n.availableHeight/2,r=Min([n.availableHeight/2,n.availableWidth/2])-5,isBooleanOptionTrue(void 0,a.inGraphDataShow)&&3==setOptionValue("INGRAPHDATARADIUSPOSITION",t,e,d,void 0,a.inGraphDataRadiusPosition,0,-1,{nullValue:!0})&&"off-center"==setOptionValue("INGRAPHDATAALIGN",t,e,d,void 0,a.inGraphDataAlign,0,-1,{nullValue:!0})&&0==setOptionValue("INGRAPHDATAROTATE",t,e,d,void 0,a.inGraphDataRotate,0,-1,{nullValue:!0})){r=Min([n.availableHeight/2,n.availableWidth/2])-setOptionValue("INGRAPHDATAFONTSIZE",t,e,d,void 0,a.inGraphDataFontSize,0,-1,{nullValue:!0})-setOptionValue("INGRAPHDATAPADDINGRADIUS",t,e,d,void 0,a.inGraphDataPaddingRadius,0,-1,{nullValue:!0})-5;for(var i,l=((a.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),c=0;c<e.length;c++)if("undefined"!=typeof e[c].value&&1*e[c].value>=0){t.font=setOptionValue("INGRAPHDATAFONTSTYLE",t,e,d,void 0,a.inGraphDataFontStyle,c,-1,{nullValue:!0})+" "+setOptionValue("INGRAPHDATAFONTSIZE",t,e,d,void 0,a.inGraphDataFontSize,c,-1,{nullValue:!0})+"px "+setOptionValue("INGRAPHDATAFONTFAMILY",t,e,d,void 0,a.inGraphDataFontFamily,c,-1,{nullValue:!0}),1==setOptionValue("INGRAPHDATAANGLEPOSITION",t,e,d,void 0,a.inGraphDataAnglePosition,c,-1,{nullValue:!0})?i=l+setOptionValue("INGRAPHDATAPADDINANGLE",t,e,d,void 0,a.inGraphDataPaddingAngle,c,-1,{nullValue:!0})*(Math.PI/180):2==setOptionValue("INGRAPHDATAANGLEPOSITION",t,e,d,void 0,a.inGraphDataAnglePosition,c,-1,{nullValue:!0})?i=l-d[c].segmentAngle/2+setOptionValue("INGRAPHDATAPADDINANGLE",t,e,d,void 0,a.inGraphDataPaddingAngle,c,-1,{nullValue:!0})*(Math.PI/180):3==setOptionValue("INGRAPHDATAANGLEPOSITION",t,e,d,void 0,a.inGraphDataAnglePosition,c,-1,{nullValue:!0})&&(i=l-d[c].segmentAngle+setOptionValue("INGRAPHDATAPADDINANGLE",t,e,d,void 0,a.inGraphDataPaddingAngle,c,-1,{nullValue:!0})*(Math.PI/180)),l-=d[c].segmentAngle;var u=tmplbis(setOptionValue("INGRAPHDATATMPL",t,e,d,void 0,a.inGraphDataTmpl,c,-1,{nullValue:!0}),d[c],a),h=t.measureText(u).width,p=Math.abs((n.availableWidth/2-h)/Math.cos(i))-setOptionValue("INGRAPHDATAPADDINGRADIUS",t,e,d,void 0,a.inGraphDataPaddingRadius,c,-1,{nullValue:!0})-5;r>p&&(r=p)}}r*=a.radiusScale}var n,o,s,r;if(t.tpchart="Doughnut",init_and_start(t,e,a)){{var d=initPassVariableData_part1(e,a,t);((a.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI)}a.logarithmic=!1,a.logarithmic2=!1,n=setMeasures(e,a,t,height,width,"none",null,!0,!1,!1,!1,!0,"Doughnut"),l();var c=r*(a.percentageInnerCutout/100);r>0?(initPassVariableData_part2(d,e,a,t,{midPosX:o,midPosY:s,int_radius:c,ext_radius:r}),animationLoop(a,null,i,t,n.clrx,n.clry,n.clrwidth,n.clrheight,o,s,o-r,s+r,e)):testRedraw(t,e,a)}},Line=function(data,config,ctx){function drawLines(e){drawLinesDataset(e,data,config,ctx,statData,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,nbValueHop:data.labels.length-1}),e>=1&&"function"==typeof drawMath&&drawMath(ctx,config,data,msr,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,scaleHop:scaleHop,zeroY:zeroY,calculatedScale:calculatedScale,calculateOffset:calculateOffset,statData:statData}),msr.legendMsr.dispLegend&&drawLegend(msr.legendMsr,data,config,ctx,"Line")}function drawScale(){if(config.drawXScaleLine!==!1)for(var e=0;e<config.drawXScaleLine.length;e++){ctx.lineWidth=config.drawXScaleLine[e].lineWidth?config.drawXScaleLine[e].lineWidth:config.scaleLineWidth,ctx.strokeStyle=config.drawXScaleLine[e].lineColor?config.drawXScaleLine[e].lineColor:config.scaleLineColor,ctx.beginPath();var a;switch(config.drawXScaleLine[e].position){case"bottom":a=xAxisPosY;break;case"top":a=xAxisPosY-msr.availableHeight-config.scaleTickSizeTop;break;case"0":case 0:0!=zeroY&&(a=xAxisPosY-zeroY)}ctx.moveTo(yAxisPosX-config.scaleTickSizeLeft,a),ctx.lineTo(yAxisPosX+msr.availableWidth+config.scaleTickSizeRight,a),ctx.setLineDash(lineStyleFn(config.scaleLineStyle)),ctx.stroke(),ctx.setLineDash([])}for(var t=0;t<data.labels.length;t++)ctx.beginPath(),ctx.moveTo(yAxisPosX+t*valueHop,xAxisPosY+config.scaleTickSizeBottom),ctx.lineWidth=config.scaleGridLineWidth,ctx.strokeStyle=config.scaleGridLineColor,config.scaleShowGridLines&&t>0&&t%config.scaleXGridLinesStep==0?ctx.lineTo(yAxisPosX+t*valueHop,xAxisPosY-msr.availableHeight-config.scaleTickSizeTop):ctx.lineTo(yAxisPosX+t*valueHop,xAxisPosY),ctx.setLineDash(lineStyleFn(config.scaleGridLineStyle)),ctx.stroke(),ctx.setLineDash([]);ctx.lineWidth=config.scaleLineWidth,ctx.strokeStyle=config.scaleLineColor,ctx.beginPath(),ctx.moveTo(yAxisPosX,xAxisPosY+config.scaleTickSizeBottom),ctx.lineTo(yAxisPosX,xAxisPosY-msr.availableHeight-config.scaleTickSizeTop),ctx.setLineDash(lineStyleFn(config.scaleLineStyle)),ctx.stroke(),ctx.setLineDash([]);for(var i=0;i<calculatedScale.steps;i++)ctx.beginPath(),ctx.moveTo(yAxisPosX-config.scaleTickSizeLeft,xAxisPosY-(i+1)*scaleHop),ctx.lineWidth=config.scaleGridLineWidth,ctx.strokeStyle=config.scaleGridLineColor,config.scaleShowGridLines&&(i+1)%config.scaleYGridLinesStep==0?ctx.lineTo(yAxisPosX+msr.availableWidth+config.scaleTickSizeRight,xAxisPosY-(i+1)*scaleHop):ctx.lineTo(yAxisPosX,xAxisPosY-(i+1)*scaleHop),ctx.setLineDash(lineStyleFn(config.scaleGridLineStyle)),ctx.stroke(),ctx.setLineDash([])}function drawLabels(){if(ctx.font=config.scaleFontStyle+" "+config.scaleFontSize+"px "+config.scaleFontFamily,(config.xAxisTop||config.xAxisBottom)&&(ctx.textBaseline="top",msr.rotateLabels>90?(ctx.save(),ctx.textAlign="left"):msr.rotateLabels>0?(ctx.save(),ctx.textAlign="right"):ctx.textAlign="center",ctx.fillStyle=config.scaleFontColor,config.xAxisBottom))for(var e=0;e<data.labels.length;e++)ctx.save(),msr.rotateLabels>0?(ctx.translate(yAxisPosX+e*valueHop-msr.highestXLabel/2,msr.xLabelPos),ctx.rotate(-(msr.rotateLabels*(Math.PI/180))),ctx.fillTextMultiLine(fmtChartJS(config,data.labels[e],config.fmtXLabel),0,0,ctx.textBaseline,config.scaleFontSize,!0)):ctx.fillTextMultiLine(fmtChartJS(config,data.labels[e],config.fmtXLabel),yAxisPosX+e*valueHop,msr.xLabelPos,ctx.textBaseline,config.scaleFontSize,!0),ctx.restore();ctx.textAlign="right",ctx.textBaseline="middle";for(var a=config.showYAxisMin?-1:0;a<calculatedScale.steps;a++)config.scaleShowLabels&&(config.yAxisLeft&&(ctx.textAlign="right",ctx.fillTextMultiLine(calculatedScale.labels[a+1],yAxisPosX-(config.scaleTickSizeLeft+config.yAxisSpaceRight),xAxisPosY-(a+1)*scaleHop,ctx.textBaseline,config.scaleFontSize,!0)),config.yAxisRight&&!valueBounds.dbAxis&&(ctx.textAlign="left",ctx.fillTextMultiLine(calculatedScale.labels[a+1],yAxisPosX+msr.availableWidth+(config.scaleTickSizeRight+config.yAxisSpaceRight),xAxisPosY-(a+1)*scaleHop,ctx.textBaseline,config.scaleFontSize,!0)));if(config.yAxisRight&&valueBounds.dbAxis)for(var a=config.showYAxisMin?-1:0;a<calculatedScale2.steps;a++)config.scaleShowLabels&&(ctx.textAlign="left",ctx.fillTextMultiLine(calculatedScale2.labels[a+1],yAxisPosX+msr.availableWidth+(config.scaleTickSizeRight+config.yAxisSpaceRight),xAxisPosY-(a+1)*scaleHop2,ctx.textBaseline,config.scaleFontSize,!0))}function getValueBounds(){for(var upperValue=-Number.MAX_VALUE,lowerValue=Number.MAX_VALUE,upperValue2=-Number.MAX_VALUE,lowerValue2=Number.MAX_VALUE,secondAxis=!1,firstAxis=!1,i=0;i<data.datasets.length;i++){var mathFctName=data.datasets[i].drawMathDeviation,mathValueHeight=0;if("function"==typeof eval(mathFctName)){var parameter={data:data,datasetNr:i};mathValueHeight=window[mathFctName](parameter)}for(var j=0;j<data.datasets[i].data.length;j++)"undefined"!=typeof data.datasets[i].data[j]&&(2==data.datasets[i].axis?(secondAxis=!0,1*data.datasets[i].data[j]+mathValueHeight>upperValue2&&(upperValue2=1*data.datasets[i].data[j]+mathValueHeight),1*data.datasets[i].data[j]-mathValueHeight<lowerValue2&&(lowerValue2=1*data.datasets[i].data[j]-mathValueHeight)):(firstAxis=!0,1*data.datasets[i].data[j]+mathValueHeight>upperValue&&(upperValue=1*data.datasets[i].data[j]+mathValueHeight),1*data.datasets[i].data[j]-mathValueHeight<lowerValue&&(lowerValue=1*data.datasets[i].data[j]-mathValueHeight)))}lowerValue>upperValue&&(upperValue=0,lowerValue=0),Math.abs(upperValue-lowerValue)<config.zeroValue&&(Math.abs(upperValue)<config.zeroValue&&(upperValue=.9),upperValue>0?(upperValue=1.1*upperValue,lowerValue=.9*lowerValue):(upperValue=.9*upperValue,lowerValue=1.1*lowerValue)),"function"==typeof config.graphMin?lowerValue=setOptionValue("GRAPHMIN",ctx,data,statData,void 0,config.graphMin,-1,-1,{nullValue:!0}):isNaN(config.graphMin)||(lowerValue=config.graphMin),"function"==typeof config.graphMax?upperValue=setOptionValue("GRAPHMAX",ctx,data,statData,void 0,config.graphMax,-1,-1,{nullValue:!0}):isNaN(config.graphMax)||(upperValue=config.graphMax),secondAxis&&(lowerValue2>upperValue2&&(upperValue2=0,lowerValue2=0),Math.abs(upperValue2-lowerValue2)<config.zeroValue&&(Math.abs(upperValue2)<config.zeroValue&&(upperValue2=.9),upperValue2>0?(upperValue2=1.1*upperValue2,lowerValue2=.9*lowerValue2):(upperValue2=.9*upperValue2,lowerValue2=1.1*lowerValue2)),"function"==typeof config.graphMin2?lowerValue2=setOptionValue("GRAPHMIN",ctx,data,statData,void 0,config.graphMin2,-1,-1,{nullValue:!0}):isNaN(config.graphMin2)||(lowerValue2=config.graphMin2),"function"==typeof config.graphMax2?upperValue2=setOptionValue("GRAPHMAX",ctx,data,statData,void 0,config.graphMax2,-1,-1,{nullValue:!0}):isNaN(config.graphMax2)||(upperValue2=config.graphMax2)),!firstAxis&&secondAxis&&(upperValue=upperValue2,lowerValue=lowerValue2),labelHeight=config.scaleFontSize,scaleHeight=msr.availableHeight;var maxSteps=Math.floor(scaleHeight/(.66*labelHeight)),minSteps=Math.floor(scaleHeight/labelHeight*.5);return{maxValue:upperValue,minValue:lowerValue,maxValue2:upperValue2,minValue2:lowerValue2,dbAxis:secondAxis,maxSteps:maxSteps,minSteps:minSteps}}var maxSize,scaleHop,scaleHop2,calculatedScale,calculatedScale2,labelHeight,scaleHeight,valueBounds,labelTemplateString,labelTemplateString2,valueHop,widestXLabel,xAxisLength,yAxisPosX,xAxisPosY,rotateLabels=0,msr,zeroY=0,zeroY2=0;if(ctx.tpchart="Line",init_and_start(ctx,data,config)){for(var mxlgt=0,i=0;i<data.datasets.length;i++)mxlgt=Max([mxlgt,data.datasets[i].data.length]);if(1==mxlgt){"string"==typeof data.labels[0]&&(data.labels=["",data.labels[0],""]);for(var i=0;i<data.datasets.length;i++)data.datasets[i].data=[void 0,data.datasets[i].data[0],void 0];mxlgt=3}for(var statData=initPassVariableData_part1(data,config,ctx),i=0;i<data.datasets.length;i++)statData[i][0].tpchart="Line";msr=setMeasures(data,config,ctx,height,width,"nihil",[""],!1,!1,!0,!0,config.datasetFill,"Line"),valueBounds=getValueBounds(),config.logarithmic!==!1&&valueBounds.minValue<=0&&(config.logarithmic=!1),config.logarithmic2!==!1&&valueBounds.minValue2<=0&&(config.logarithmic2=!1);var OrderOfMagnitude=calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.maxValue)+1))-calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.minValue)));("fuzzy"==config.logarithmic&&4>OrderOfMagnitude||config.scaleOverride)&&(config.logarithmic=!1);var OrderOfMagnitude2=calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.maxValue2)+1))-calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.minValue2)));if(("fuzzy"==config.logarithmic2&&4>OrderOfMagnitude2||config.scaleOverride2)&&(config.logarithmic2=!1),labelTemplateString=config.scaleShowLabels?config.scaleLabel:"",labelTemplateString2=config.scaleShowLabels2?config.scaleLabel2:"",config.scaleOverride){var scaleStartValue=setOptionValue("SCALESTARTVALUE",ctx,data,statData,void 0,config.scaleStartValue,-1,-1,{nullValue:!0}),scaleSteps=setOptionValue("SCALESTEPS",ctx,data,statData,void 0,config.scaleSteps,-1,-1,{nullValue:!0}),scaleStepWidth=setOptionValue("SCALESTEPWIDTH",ctx,data,statData,void 0,config.scaleStepWidth,-1,-1,{nullValue:!0});calculatedScale={steps:scaleSteps,stepValue:scaleStepWidth,graphMin:scaleStartValue,graphMax:scaleStartValue+scaleSteps*scaleStepWidth,labels:[]},populateLabels(1,config,labelTemplateString,calculatedScale.labels,calculatedScale.steps,scaleStartValue,calculatedScale.graphMax,scaleStepWidth)}else valueBounds.maxSteps>0&&valueBounds.minSteps>0&&(calculatedScale=calculateScale(1,config,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue,valueBounds.minValue,labelTemplateString));if(valueBounds.dbAxis)if(config.scaleOverride2){var scaleStartValue2=setOptionValue("SCALESTARTVALUE2",ctx,data,statData,void 0,config.scaleStartValue2,-1,-1,{nullValue:!0}),scaleSteps2=setOptionValue("SCALESTEPS2",ctx,data,statData,void 0,config.scaleSteps2,-1,-1,{nullValue:!0}),scaleStepWidth2=setOptionValue("SCALESTEPWIDTH2",ctx,data,statData,void 0,config.scaleStepWidth2,-1,-1,{nullValue:!0});calculatedScale2={steps:scaleSteps2,stepValue:scaleStepWidth2,graphMin:scaleStartValue2,graphMax:scaleStartValue2+scaleSteps2*scaleStepWidth2,labels:[]},populateLabels(2,config,labelTemplateString2,calculatedScale2.labels,calculatedScale2.steps,scaleStartValue2,calculatedScale2.graphMax,scaleStepWidth2)}else valueBounds.maxSteps>0&&valueBounds.minSteps>0&&(calculatedScale2=calculateScale(2,config,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue2,valueBounds.minValue2,labelTemplateString));else calculatedScale2={steps:0,stepValue:0,graphMin:0,graphMax:0,labels:null};if(valueBounds.maxSteps>0&&valueBounds.minSteps>0){msr=setMeasures(data,config,ctx,height,width,calculatedScale.labels,calculatedScale2.labels,!1,!1,!0,!0,config.datasetFill,"Line");var prevHeight=msr.availableHeight;msr.availableHeight=msr.availableHeight-config.scaleTickSizeBottom-config.scaleTickSizeTop,msr.availableWidth=msr.availableWidth-config.scaleTickSizeLeft-config.scaleTickSizeRight,scaleHop=Math.floor(msr.availableHeight/calculatedScale.steps),scaleHop2=Math.floor(msr.availableHeight/calculatedScale2.steps),valueHop=Math.floor(msr.availableWidth/(data.labels.length-1)),(0==valueHop||config.fullWidthGraph)&&(valueHop=msr.availableWidth/(data.labels.length-1)),msr.clrwidth=msr.clrwidth-(msr.availableWidth-(data.labels.length-1)*valueHop),msr.availableWidth=(data.labels.length-1)*valueHop,msr.availableHeight=calculatedScale.steps*scaleHop,msr.xLabelPos+=config.scaleTickSizeBottom+config.scaleTickSizeTop-(prevHeight-msr.availableHeight),msr.clrheight+=config.scaleTickSizeBottom+config.scaleTickSizeTop-(prevHeight-msr.availableHeight),yAxisPosX=msr.leftNotUsableSize+config.scaleTickSizeLeft,xAxisPosY=msr.topNotUsableSize+msr.availableHeight+config.scaleTickSizeTop,drawLabels(),valueBounds.minValue<0&&(zeroY=calculateOffset(config.logarithmic,0,calculatedScale,scaleHop)),valueBounds.minValue2<0&&(zeroY2=calculateOffset(config.logarithmic2,0,calculatedScale2,scaleHop2)),initPassVariableData_part2(statData,data,config,ctx,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,nbValueHop:data.labels.length-1,scaleHop:scaleHop,zeroY:zeroY,calculatedScale:calculatedScale,logarithmic:config.logarithmic,scaleHop2:scaleHop2,zeroY2:zeroY2,msr:msr,calculatedScale2:calculatedScale2,logarithmic2:config.logarithmic2}),animationLoop(config,drawScale,drawLines,ctx,msr.clrx,msr.clry,msr.clrwidth,msr.clrheight,yAxisPosX+msr.availableWidth/2,xAxisPosY-msr.availableHeight/2,yAxisPosX,xAxisPosY,data)}else testRedraw(ctx,data,config)}},StackedBar=function(e,a,t){function i(i){t.lineWidth=a.barStrokeWidth;for(var l=0;l<e.datasets.length;l++)for(var n=0;n<e.datasets[l].data.length;n++){var o=animationCorrection(i,e,a,l,n,1).animVal;if(o>1&&(o-=1),"undefined"!=typeof e.datasets[l].data[n]&&1*e.datasets[l].data[n]!=0){if(a.animationByDataset){var s=m[l][n].yPosBottom,r=m[l][n].yPosTop;r=s+o*(r-s)}else var s=m[m[l][n].firstNotMissing][n].yPosBottom-o*(m[m[l][n].firstNotMissing][n].yPosBottom-m[l][n].yPosBottom),r=m[m[l][n].firstNotMissing][n].yPosBottom-o*(m[m[l][n].firstNotMissing][n].yPosBottom-m[l][n].yPosTop);t.fillStyle=setOptionValue("COLOR",t,e,m,e.datasets[l].fillColor,a.defaultFillColor,l,n,{animationValue:o,xPosLeft:m[l][n].xPosLeft,yPosBottom:s,xPosRight:m[l][n].xPosRight,yPosTop:r}),t.strokeStyle=setOptionValue("STROKECOLOR",t,e,m,e.datasets[l].strokeColor,a.defaultStrokeColor,l,n,{nullvalue:null}),0!=o&&s!=r&&(t.beginPath(),t.moveTo(m[l][n].xPosLeft,s),t.lineTo(m[l][n].xPosLeft,r),t.lineTo(m[l][n].xPosRight,r),t.lineTo(m[l][n].xPosRight,s),a.barShowStroke&&(t.setLineDash(lineStyleFn(setOptionValue("STROKESTYLE",t,e,m,e.datasets[l].datasetStrokeStyle,a.datasetStrokeStyle,l,n,{nullvalue:null}))),t.stroke(),t.setLineDash([])),t.closePath(),t.fill())}}if(i>=a.animationStopValue)for(var d=0,c=0,l=0;l<e.datasets.length;l++)for(var n=0;n<e.datasets[l].data.length;n++)if("undefined"!=typeof e.datasets[l].data[n]&&(setOptionValue("ANNOTATEDISPLAY",t,e,m,void 0,a.annotateDisplay,l,n,{nullValue:!0})&&(jsGraphAnnotate[t.ChartNewId][jsGraphAnnotate[t.ChartNewId].length]=["RECT",l,n,m]),setOptionValue("INGRAPHDATASHOW",t,e,m,void 0,a.inGraphDataShow,l,n,{nullValue:!0}))){t.save(),t.textAlign=setOptionValue("INGRAPHDATAALIGN",t,e,m,void 0,a.inGraphDataAlign,l,n,{nullValue:!0}),t.textBaseline=setOptionValue("INGRAPHDATAVALIGN",t,e,m,void 0,a.inGraphDataVAlign,l,n,{nullValue:!0}),t.font=setOptionValue("INGRAPHDATAFONTSTYLE",t,e,m,void 0,a.inGraphDataFontStyle,l,n,{nullValue:!0})+" "+setOptionValue("INGRAPHDATAFONTSIZE",t,e,m,void 0,a.inGraphDataFontSize,l,n,{nullValue:!0})+"px "+setOptionValue("INGRAPHDATAFONTFAMILY",t,e,m,void 0,a.inGraphDataFontFamily,l,n,{nullValue:!0}),t.fillStyle=setOptionValue("INGRAPHDATAFONTCOLOR",t,e,m,void 0,a.inGraphDataFontColor,l,n,{nullValue:!0});var u=tmplbis(setOptionValue("INGRAPHDATATMPL",t,e,m,void 0,a.inGraphDataTmpl,l,n,{nullValue:!0}),m[l][n],a);t.beginPath(),t.beginPath(),d=0,c=0,1==setOptionValue("INGRAPHDATAXPOSITION",t,e,m,void 0,a.inGraphDataXPosition,l,n,{nullValue:!0})?c=m[l][n].xPosLeft+setOptionValue("INGRAPHDATAPADDINGX",t,e,m,void 0,a.inGraphDataPaddingX,l,n,{nullValue:!0}):2==setOptionValue("INGRAPHDATAXPOSITION",t,e,m,void 0,a.inGraphDataXPosition,l,n,{nullValue:!0})?c=m[l][n].xPosLeft+A/2+setOptionValue("INGRAPHDATAPADDINGX",t,e,m,void 0,a.inGraphDataPaddingX,l,n,{nullValue:!0}):3==setOptionValue("INGRAPHDATAXPOSITION",t,e,m,void 0,a.inGraphDataXPosition,l,n,{nullValue:!0})&&(c=m[l][n].xPosLeft+A+setOptionValue("INGRAPHDATAPADDINGX",t,e,m,void 0,a.inGraphDataPaddingX,l,n,{nullValue:!0})),1==setOptionValue("INGRAPHDATAYPOSITION",t,e,m,void 0,a.inGraphDataYPosition,l,n,{nullValue:!0})?d=m[l][n].yPosBottom-setOptionValue("INGRAPHDATAPADDINGY",t,e,m,void 0,a.inGraphDataPaddingY,l,n,{nullValue:!0}):2==setOptionValue("INGRAPHDATAYPOSITION",t,e,m,void 0,a.inGraphDataYPosition,l,n,{nullValue:!0})?d=(m[l][n].yPosTop+m[l][n].yPosBottom)/2-setOptionValue("INGRAPHDATAPADDINGY",t,e,m,void 0,a.inGraphDataPaddingY,l,n,{nullValue:!0}):3==setOptionValue("INGRAPHDATAYPOSITION",t,e,m,void 0,a.inGraphDataYPosition,l,n,{nullValue:!0})&&(d=m[l][n].yPosTop-setOptionValue("INGRAPHDATAPADDINGY",t,e,m,void 0,a.inGraphDataPaddingY,l,n,{nullValue:!0})),d>S.topNotUsableSize&&(t.translate(c,d),t.rotate(setOptionValue("INGRAPHDATAROTATE",t,e,m,void 0,a.inGraphDataRotate,l,n,{nullValue:!0})*(Math.PI/180)),t.fillTextMultiLine(u,0,0,t.textBaseline,setOptionValue("INGRAPHDATAFONTSIZE",t,e,m,void 0,a.inGraphDataFontSize,l,n,{nullValue:!0}),!0)),t.restore()}S.legendMsr.dispLegend&&drawLegend(S.legendMsr,e,a,t,"StackedBar")}function l(){t.lineWidth=a.scaleLineWidth,t.strokeStyle=a.scaleLineColor,t.setLineDash(lineStyleFn(a.scaleLineStyle)),t.beginPath(),t.moveTo(g-a.scaleTickSizeLeft,f),t.lineTo(g+S.availableWidth+a.scaleTickSizeRight,f),t.stroke(),t.setLineDash([]),t.setLineDash(lineStyleFn(a.scaleGridLineStyle));for(var i=0;i<e.labels.length;i++)t.beginPath(),t.moveTo(g+i*p,f+a.scaleTickSizeBottom),t.lineWidth=a.scaleGridLineWidth,t.strokeStyle=a.scaleGridLineColor,a.scaleShowGridLines&&i>0&&i%a.scaleXGridLinesStep==0?t.lineTo(g+i*p,f-S.availableHeight-a.scaleTickSizeTop):t.lineTo(g+i*p,f),t.stroke();t.setLineDash([]),t.lineWidth=a.scaleLineWidth,t.strokeStyle=a.scaleLineColor,t.setLineDash(lineStyleFn(a.scaleLineStyle)),t.beginPath(),t.moveTo(g,f+a.scaleTickSizeBottom),t.lineTo(g,f-S.availableHeight-a.scaleTickSizeTop),t.stroke(),t.setLineDash([]),t.setLineDash(lineStyleFn(a.scaleGridLineStyle));for(var l=a.showYAxisMin?-1:0;l<r.steps;l++)t.beginPath(),t.moveTo(g-a.scaleTickSizeLeft,f-(l+1)*s),t.lineWidth=a.scaleGridLineWidth,t.strokeStyle=a.scaleGridLineColor,a.scaleShowGridLines&&(l+1)%a.scaleYGridLinesStep==0?t.lineTo(g+S.availableWidth+a.scaleTickSizeRight,f-(l+1)*s):t.lineTo(g,f-(l+1)*s),t.stroke();t.setLineDash([])}function n(){if(t.font=a.scaleFontStyle+" "+a.scaleFontSize+"px "+a.scaleFontFamily,(a.xAxisTop||a.xAxisBottom)&&(t.textBaseline="top",S.rotateLabels>90?(t.save(),t.textAlign="left"):S.rotateLabels>0?(t.save(),t.textAlign="right"):t.textAlign="center",t.fillStyle=a.scaleFontColor,a.xAxisBottom))for(var i=0;i<e.labels.length;i++)t.save(),S.rotateLabels>0?(t.translate(g+a.barValueSpacing+i*p+A/2-S.highestXLabel/2,S.xLabelPos),t.rotate(-(S.rotateLabels*(Math.PI/180))),t.fillTextMultiLine(fmtChartJS(a,e.labels[i],a.fmtXLabel),0,0,t.textBaseline,a.scaleFontSize,!0)):t.fillTextMultiLine(fmtChartJS(a,e.labels[i],a.fmtXLabel),g+a.barValueSpacing+i*p+A/2,S.xLabelPos,t.textBaseline,a.scaleFontSize,!0),t.restore();t.textAlign="right",t.textBaseline="middle";for(var l=a.showYAxisMin?-1:0;l<r.steps;l++)a.scaleShowLabels&&(a.yAxisLeft&&(t.textAlign="right",t.fillTextMultiLine(r.labels[l+1],g-(a.scaleTickSizeLeft+a.yAxisSpaceRight),f-(l+1)*s,t.textBaseline,a.scaleFontSize,!0)),a.yAxisRight&&(t.textAlign="left",t.fillTextMultiLine(r.labels[l+1],g+S.availableWidth+(a.scaleTickSizeRight+a.yAxisSpaceRight),f-(l+1)*s,t.textBaseline,a.scaleFontSize,!0)))}function o(){for(var i=-Number.MAX_VALUE,l=Number.MAX_VALUE,n=(new Array(e.datasets.length),new Array(e.datasets.length),0);n<e.datasets.length;n++)for(var o=0;o<e.datasets[n].data.length;o++){var s=n,r=0,u=0;for("undefined"!=typeof e.datasets[0].data[o]&&(1*e.datasets[0].data[o]>0?(r+=1*e.datasets[0].data[o],r>i&&(i=r),l>r&&(l=r)):(u+=1*e.datasets[0].data[o],u>i&&(i=u),l>u&&(l=u)));s>0;)"undefined"!=typeof e.datasets[s].data[o]&&(1*e.datasets[s].data[o]>0?(r+=1*e.datasets[s].data[o],r>i&&(i=r),l>r&&(l=r)):(u+=1*e.datasets[s].data[o],u>i&&(i=u),l>u&&(l=u))),s--}"function"==typeof a.graphMin?l=setOptionValue("GRAPHMIN",t,e,m,void 0,a.graphMin,-1,-1,{nullValue:!0}):isNaN(a.graphMin)||(l=a.graphMin),"function"==typeof a.graphMax?i=setOptionValue("GRAPHMAX",t,e,m,void 0,a.graphMax,-1,-1,{nullValue:!0}):isNaN(a.graphMax)||(i=a.graphMax),l>i&&(i=0,l=0),Math.abs(i-l)<a.zeroValue&&(Math.abs(i)<a.zeroValue&&(i=.9),i>0?(i=1.1*i,l=.9*l):(i=.9*i,l=1.1*l)),d=a.scaleFontSize,c=S.availableHeight;
var h=Math.floor(c/(.66*d)),p=Math.floor(c/d*.5);return{maxValue:i,minValue:l,maxSteps:h,minSteps:p}}var s,r,d,c,u,h,p,g,f,A,S;if(t.tpchart="StackedBar",init_and_start(t,e,a)){var m=initPassVariableData_part1(e,a,t);if(a.logarithmic=!1,S=setMeasures(e,a,t,height,width,"nihil",[""],!0,!1,!0,!0,!0,"StackedBar"),u=o(),u.maxSteps>0&&u.minSteps>0){if(h=a.scaleShowLabels?a.scaleLabel:"",a.scaleOverride){var v=setOptionValue("SCALESTARTVALUE",t,e,m,void 0,a.scaleStartValue,-1,-1,{nullValue:!0}),x=setOptionValue("SCALESTEPS",t,e,m,void 0,a.scaleSteps,-1,-1,{nullValue:!0}),P=setOptionValue("SCALESTEPWIDTH",t,e,m,void 0,a.scaleStepWidth,-1,-1,{nullValue:!0});r={steps:x,stepValue:P,graphMin:v,labels:[]};for(var D=0;D<=r.steps;D++)h&&r.labels.push(tmpl(h,{value:fmtChartJS(a,1*(v+P*D).toFixed(getDecimalPlaces(P)),a.fmtYLabel)},a));S=setMeasures(e,a,t,height,width,r.labels,null,!0,!1,!0,!0,!0,"StackedBar")}else r=calculateScale(1,a,u.maxSteps,u.minSteps,u.maxValue,u.minValue,h),S=setMeasures(e,a,t,height,width,r.labels,null,!0,!1,!0,!0,!0,"StackedBar");var V=S.availableHeight;S.availableHeight=S.availableHeight-a.scaleTickSizeBottom-a.scaleTickSizeTop,S.availableWidth=S.availableWidth-a.scaleTickSizeLeft-a.scaleTickSizeRight,s=Math.floor(S.availableHeight/r.steps),p=Math.floor(S.availableWidth/e.labels.length),(0==p||a.fullWidthGraph)&&(p=S.availableWidth/e.labels.length),S.clrwidth=S.clrwidth-(S.availableWidth-e.labels.length*p),S.availableWidth=e.labels.length*p,S.availableHeight=r.steps*s,S.xLabelPos+=a.scaleTickSizeBottom+a.scaleTickSizeTop-(V-S.availableHeight),S.clrheight+=a.scaleTickSizeBottom+a.scaleTickSizeTop-(V-S.availableHeight),g=S.leftNotUsableSize+a.scaleTickSizeLeft,f=S.topNotUsableSize+S.availableHeight+a.scaleTickSizeTop,A=p-2*a.scaleGridLineWidth-2*a.barValueSpacing-(a.barDatasetSpacing*e.datasets.length-1)-a.barStrokeWidth/2-1,A>=0&&1>=A&&(A=1),0>A&&A>=-1&&(A=-1),n(),initPassVariableData_part2(m,e,a,t,{calculatedScale:r,scaleHop:s,valueHop:p,yAxisPosX:g,xAxisPosY:f,barWidth:A}),animationLoop(a,l,i,t,S.clrx,S.clry,S.clrwidth,S.clrheight,g+S.availableWidth/2,f-S.availableHeight/2,g,f,e)}else testRedraw(t,e,a)}},HorizontalStackedBar=function(e,a,t){function i(e,a,t){var i=a.steps*a.stepValue,l=e-a.graphMin,n=CapValue(l/i,1,0);return t*a.steps*n}function l(i){t.lineWidth=a.barStrokeWidth;for(var l=0;l<e.datasets.length;l++)for(var n=0;n<e.datasets[l].data.length;n++){var o=animationCorrection(i,e,a,l,n,1).animVal;if(o>1&&(o-=1),"undefined"!=typeof e.datasets[l].data[n]&&1*e.datasets[l].data[n]!=0){if(a.animationByDataset){var s=v[l][n].xPosLeft,r=v[l][n].xPosRight;r=s+o*(r-s)}else var s=v[v[l][n].firstNotMissing][n].xPosLeft+o*(v[l][n].xPosLeft-v[v[l][n].firstNotMissing][n].xPosLeft),r=v[v[l][n].firstNotMissing][n].xPosLeft+o*(v[l][n].xPosRight-v[v[l][n].firstNotMissing][n].xPosLeft);t.fillStyle=setOptionValue("COLOR",t,e,v,e.datasets[l].fillColor,a.defaultFillColor,l,n,{animationValue:o,xPosLeft:s,yPosBottom:v[l][n].yPosBottom,xPosRight:r,yPosTop:v[l][n].yPosBottom}),t.strokeStyle=setOptionValue("STROKECOLOR",t,e,v,e.datasets[l].strokeColor,a.defaultStrokeColor,l,n,{nullvalue:null}),0!=o&&v[l][n].xPosLeft!=v[l][n].xPosRight&&(t.beginPath(),t.moveTo(s,v[l][n].yPosTop),t.lineTo(r,v[l][n].yPosTop),t.lineTo(r,v[l][n].yPosBottom),t.lineTo(s,v[l][n].yPosBottom),t.lineTo(s,v[l][n].yPosTop),a.barShowStroke&&(t.setLineDash(lineStyleFn(setOptionValue("STROKESTYLE",t,e,v,e.datasets[l].datasetStrokeStyle,a.datasetStrokeStyle,l,n,{nullvalue:null}))),t.stroke(),t.setLineDash([])),t.closePath(),t.fill())}}if(i>=a.animationStopValue)for(var d=0,c=0,l=0;l<e.datasets.length;l++)for(var n=0;n<e.datasets[l].data.length;n++)if("undefined"!=typeof e.datasets[l].data[n]&&(setOptionValue("ANNOTATEDISPLAY",t,e,v,void 0,a.annotateDisplay,l,n,{nullValue:!0})&&(jsGraphAnnotate[t.ChartNewId][jsGraphAnnotate[t.ChartNewId].length]=["RECT",l,n,v]),setOptionValue("INGRAPHDATASHOW",t,e,v,void 0,a.inGraphDataShow,l,n,{nullValue:!0}))){t.save(),t.textAlign=setOptionValue("INGRAPHDATAALIGN",t,e,v,void 0,a.inGraphDataAlign,l,n,{nullValue:!0}),t.textBaseline=setOptionValue("INGRAPHDATAVALIGN",t,e,v,void 0,a.inGraphDataVAlign,l,n,{nullValue:!0}),t.font=setOptionValue("INGRAPHDATAFONTSTYLE",t,e,v,void 0,a.inGraphDataFontStyle,l,n,{nullValue:!0})+" "+setOptionValue("INGRAPHDATAFONTSIZE",t,e,v,void 0,a.inGraphDataFontSize,l,n,{nullValue:!0})+"px "+setOptionValue("INGRAPHDATAFONTFAMILY",t,e,v,void 0,a.inGraphDataFontFamily,l,n,{nullValue:!0}),t.fillStyle=setOptionValue("INGRAPHDATAFONTCOLOR",t,e,v,void 0,a.inGraphDataFontColor,l,n,{nullValue:!0});var u=tmplbis(setOptionValue("INGRAPHDATATMPL",t,e,v,void 0,a.inGraphDataTmpl,l,n,{nullValue:!0}),v[l][n],a);t.beginPath(),d=0,c=0,1==setOptionValue("INGRAPHDATAXPOSITION",t,e,v,void 0,a.inGraphDataXPosition,l,n,{nullValue:!0})?c=v[l][n].xPosLeft+setOptionValue("INGRAPHDATAPADDINGX",t,e,v,void 0,a.inGraphDataPaddingX,l,n,{nullValue:!0}):2==setOptionValue("INGRAPHDATAXPOSITION",t,e,v,void 0,a.inGraphDataXPosition,l,n,{nullValue:!0})?c=v[l][n].xPosLeft+(v[l][n].xPosRight-v[l][n].xPosLeft)/2+setOptionValue("INGRAPHDATAPADDINGX",t,e,v,void 0,a.inGraphDataPaddingX,l,n,{nullValue:!0}):3==setOptionValue("INGRAPHDATAXPOSITION",t,e,v,void 0,a.inGraphDataXPosition,l,n,{nullValue:!0})&&(c=v[l][n].xPosRight+setOptionValue("INGRAPHDATAPADDINGX",t,e,v,void 0,a.inGraphDataPaddingX,l,n,{nullValue:!0})),1==setOptionValue("INGRAPHDATAYPOSITION",t,e,v,void 0,a.inGraphDataYPosition,l,n,{nullValue:!0})?d=v[l][n].yPosBottom-setOptionValue("INGRAPHDATAPADDINGY",t,e,v,void 0,a.inGraphDataPaddingY,l,n,{nullValue:!0}):2==setOptionValue("INGRAPHDATAYPOSITION",t,e,v,void 0,a.inGraphDataYPosition,l,n,{nullValue:!0})?d=v[l][n].yPosBottom-S/2-setOptionValue("INGRAPHDATAPADDINGY",t,e,v,void 0,a.inGraphDataPaddingY,l,n,{nullValue:!0}):3==setOptionValue("INGRAPHDATAYPOSITION",t,e,v,void 0,a.inGraphDataYPosition,l,n,{nullValue:!0})&&(d=v[l][n].yPosTop-setOptionValue("INGRAPHDATAPADDINGY",t,e,v,void 0,a.inGraphDataPaddingY,l,n,{nullValue:!0})),t.translate(c,d),t.rotate(setOptionValue("INGRAPHDATAROTATE",t,e,v,void 0,a.inGraphDataRotate,l,n,{nullValue:!0})*(Math.PI/180)),t.fillTextMultiLine(u,0,0,t.textBaseline,setOptionValue("INGRAPHDATAFONTSIZE",t,e,v,void 0,a.inGraphDataFontSize,l,n,{nullValue:!0}),!0),t.restore()}m.legendMsr.dispLegend&&drawLegend(m.legendMsr,e,a,t,"HorizontalStackedBar")}function n(){t.lineWidth=a.scaleLineWidth,t.strokeStyle=a.scaleLineColor,t.setLineDash(lineStyleFn(a.scaleLineStyle)),t.beginPath(),t.moveTo(f-a.scaleTickSizeLeft,A),t.lineTo(f+m.availableWidth,A),t.stroke(),t.setLineDash([]),t.setLineDash(lineStyleFn(a.scaleGridLineStyle));for(var i=a.showYAxisMin?-1:0;i<d.steps;i++)i>=0&&(t.beginPath(),t.moveTo(f+i*g,A+a.scaleTickSizeBottom),t.lineWidth=a.scaleGridLineWidth,t.strokeStyle=a.scaleGridLineColor,a.scaleShowGridLines&&i>0&&i%a.scaleXGridLinesStep==0?t.lineTo(f+i*g,A-m.availableHeight-a.scaleTickSizeTop):t.lineTo(f+i*g,A),t.stroke()),t.setLineDash([]);t.lineWidth=a.scaleLineWidth,t.strokeStyle=a.scaleLineColor,t.setLineDash(lineStyleFn(a.scaleLineStyle)),t.beginPath(),t.moveTo(f,A+a.scaleTickSizeBottom),t.lineTo(f,A-m.availableHeight-a.scaleTickSizeTop),t.stroke(),t.setLineDash([]),t.setLineDash(lineStyleFn(a.scaleGridLineStyle));for(var l=0;l<e.labels.length;l++)t.beginPath(),t.moveTo(f-a.scaleTickSizeLeft,A-(l+1)*r),t.lineWidth=a.scaleGridLineWidth,t.strokeStyle=a.scaleGridLineColor,a.scaleShowGridLines&&(l+1)%a.scaleYGridLinesStep==0?t.lineTo(f+m.availableWidth,A-(l+1)*r):t.lineTo(f,A-(l+1)*r),t.stroke();t.setLineDash([])}function o(){if(t.font=a.scaleFontStyle+" "+a.scaleFontSize+"px "+a.scaleFontFamily,a.scaleShowLabels&&(a.xAxisTop||a.xAxisBottom)&&(t.textBaseline="top",m.rotateLabels>90?(t.save(),t.textAlign="left"):m.rotateLabels>0?(t.save(),t.textAlign="right"):t.textAlign="center",t.fillStyle=a.scaleFontColor,a.xAxisBottom))for(var i=a.showYAxisMin?-1:0;i<d.steps;i++)t.save(),m.rotateLabels>0?(t.translate(f+(i+1)*g-m.highestXLabel/2,m.xLabelPos),t.rotate(-(m.rotateLabels*(Math.PI/180))),t.fillTextMultiLine(d.labels[i+1],0,0,t.textBaseline,a.scaleFontSize,!0)):t.fillTextMultiLine(d.labels[i+1],f+(i+1)*g,m.xLabelPos,t.textBaseline,a.scaleFontSize,!0),t.restore();t.textAlign="right",t.textBaseline="middle";for(var l=0;l<e.labels.length;l++)a.yAxisLeft&&(t.textAlign="right",t.fillTextMultiLine(fmtChartJS(a,e.labels[l],a.fmtXLabel),f-(a.scaleTickSizeLeft+a.yAxisSpaceRight),A-(l+1)*r+S/2,t.textBaseline,a.scaleFontSize,!0)),a.yAxisRight&&(t.textAlign="left",t.fillTextMultiLine(fmtChartJS(a,e.labels[l],a.fmtXLabel),f+m.availableWidth+(a.scaleTickSizeRight+a.yAxisSpaceRight),A-(l+1)*r+S/2,t.textBaseline,a.scaleFontSize,!0))}function s(){for(var i=-Number.MAX_VALUE,l=Number.MAX_VALUE,n=(new Array(e.datasets.length),new Array(e.datasets.length),0);n<e.datasets.length;n++)for(var o=0;o<e.datasets[n].data.length;o++){var s=n,r=0,d=0;for("undefined"!=typeof e.datasets[0].data[o]&&(1*e.datasets[0].data[o]>0?(r+=1*e.datasets[0].data[o],r>i&&(i=r),l>r&&(l=r)):(d+=1*e.datasets[0].data[o],d>i&&(i=d),l>d&&(l=d)));s>0;)"undefined"!=typeof e.datasets[s].data[o]&&(1*e.datasets[s].data[o]>0?(r+=1*e.datasets[s].data[o],r>i&&(i=r),l>r&&(l=r)):(d+=1*e.datasets[s].data[o],d>i&&(i=d),l>d&&(l=d))),s--}"function"==typeof a.graphMin?l=setOptionValue("GRAPHMIN",t,e,v,void 0,a.graphMin,-1,-1,{nullValue:!0}):isNaN(a.graphMin)||(l=a.graphMin),"function"==typeof a.graphMax?i=setOptionValue("GRAPHMAX",t,e,v,void 0,a.graphMax,-1,-1,{nullValue:!0}):isNaN(a.graphMax)||(i=a.graphMax),l>i&&(i=0,l=0),Math.abs(i-l)<a.zeroValue&&(Math.abs(i)<a.zeroValue&&(i=.9),i>0?(i=1.1*i,l=.9*l):(i=.9*i,l=1.1*l)),c=a.scaleFontSize,u=m.availableHeight;var h=Math.floor(u/(.66*c)),p=Math.floor(u/c*.5);return{maxValue:i,minValue:l,maxSteps:h,minSteps:p}}var r,d,c,u,h,p,g,f,A,S,m;if(a.reverseOrder&&"undefined"==typeof t.reversed&&(t.reversed=!0,e=reverseData(e)),t.tpchart="HorizontalStackedBar",init_and_start(t,e,a)){var v=initPassVariableData_part1(e,a,t);if(a.logarithmic=!1,m=setMeasures(e,a,t,height,width,"nihil",[""],!0,!0,!0,!0,!0,"HorizontalStackedBar"),h=s(),h.maxSteps>0&&h.minSteps>0){if(p=a.scaleShowLabels?a.scaleLabel:"",a.scaleOverride){var x=setOptionValue("SCALESTARTVALUE",t,e,v,void 0,a.scaleStartValue,-1,-1,{nullValue:!0}),P=setOptionValue("SCALESTEPS",t,e,v,void 0,a.scaleSteps,-1,-1,{nullValue:!0}),D=setOptionValue("SCALESTEPWIDTH",t,e,v,void 0,a.scaleStepWidth,-1,-1,{nullValue:!0});d={steps:P,stepValue:D,graphMin:x,labels:[]};for(var V=0;V<=d.steps;V++)p&&d.labels.push(tmpl(p,{value:fmtChartJS(a,1*(x+D*V).toFixed(getDecimalPlaces(D)),a.fmtYLabel)},a));m=setMeasures(e,a,t,height,width,d.labels,null,!0,!0,!0,!0,!0,"HorizontalStackedBar")}else d=calculateScale(1,a,h.maxSteps,h.minSteps,h.maxValue,h.minValue,p),m=setMeasures(e,a,t,height,width,d.labels,null,!0,!0,!0,!0,!0,"HorizontalStackedBar");m.availableHeight=m.availableHeight-a.scaleTickSizeBottom-a.scaleTickSizeTop,m.availableWidth=m.availableWidth-a.scaleTickSizeLeft-a.scaleTickSizeRight,r=Math.floor(m.availableHeight/e.labels.length),g=Math.floor(m.availableWidth/d.steps),(0==g||a.fullWidthGraph)&&(g=m.availableWidth/d.steps),m.clrwidth=m.clrwidth-(m.availableWidth-d.steps*g),m.availableWidth=d.steps*g,m.availableHeight=e.labels.length*r,f=m.leftNotUsableSize+a.scaleTickSizeLeft,A=m.topNotUsableSize+m.availableHeight+a.scaleTickSizeTop,S=r-2*a.scaleGridLineWidth-2*a.barValueSpacing-(a.barDatasetSpacing*e.datasets.length-1)-a.barStrokeWidth/2-1,S>=0&&1>=S&&(S=1),0>S&&S>=-1&&(S=-1),o(),zeroY=i(0,d,r),initPassVariableData_part2(v,e,a,t,{yAxisPosX:f,xAxisPosY:A,barWidth:S,zeroY:zeroY,scaleHop:r,valueHop:g,calculatedScale:d}),animationLoop(a,n,l,t,m.clrx,m.clry,m.clrwidth,m.clrheight,f+m.availableWidth/2,A-m.availableHeight/2,f,A,e)}else testRedraw(t,e,a)}},Bar=function(data,config,ctx){function drawBars(e){var a,t;ctx.lineWidth=config.barStrokeWidth;for(var i=0;i<data.datasets.length;i++)if("Line"!=data.datasets[i].type)for(var l=0;l<data.datasets[i].data.length;l++)if("undefined"!=typeof data.datasets[i].data[l]){var n=animationCorrection(e,data,config,i,l,1).animVal;n>1&&(n-=1);var o=n*statData[i][l].barHeight+config.barStrokeWidth/2;ctx.fillStyle=setOptionValue("COLOR",ctx,data,statData,data.datasets[i].fillColor,config.defaultFillColor,i,l,{animationValue:n,xPosLeft:statData[i][l].xPosLeft,yPosBottom:statData[i][l].yPosBottom,xPosRight:statData[i][l].xPosLeft+barWidth,yPosTop:statData[i][l].yPosBottom-o}),ctx.strokeStyle=setOptionValue("STROKECOLOR",ctx,data,statData,data.datasets[i].strokeColor,config.defaultStrokeColor,i,l,{nullvalue:null}),roundRect(ctx,statData[i][l].xPosLeft,statData[i][l].yPosBottom,barWidth,o,config.barShowStroke,config.barBorderRadius,i,l)}if(drawLinesDataset(e,data,config,ctx,statData,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,nbValueHop:data.labels.length}),e>=config.animationStopValue)for(var i=0;i<data.datasets.length;i++)for(var l=0;l<data.datasets[i].data.length;l++)if("undefined"!=typeof data.datasets[i].data[l]&&"Line"!=data.datasets[i].type&&(setOptionValue("ANNOTATEDISPLAY",ctx,data,statData,void 0,config.annotateDisplay,i,l,{nullValue:!0})&&(jsGraphAnnotate[ctx.ChartNewId][jsGraphAnnotate[ctx.ChartNewId].length]=["RECT",i,l,statData]),setOptionValue("INGRAPHDATASHOW",ctx,data,statData,void 0,config.inGraphDataShow,i,l,{nullValue:!0}))){ctx.save(),ctx.textAlign=setOptionValue("INGRAPHDATAALIGN",ctx,data,statData,void 0,config.inGraphDataAlign,i,l,{nullValue:!0}),ctx.textBaseline=setOptionValue("INGRAPHDATAVALIGN",ctx,data,statData,void 0,config.inGraphDataVAlign,i,l,{nullValue:!0}),ctx.font=setOptionValue("INGRAPHDATAFONTSTYLE",ctx,data,statData,void 0,config.inGraphDataFontStyle,i,l,{nullValue:!0})+" "+setOptionValue("INGRAPHDATAFONTSIZE",ctx,data,statData,void 0,config.inGraphDataFontSize,i,l,{nullValue:!0})+"px "+setOptionValue("INGRAPHDATAFONTFAMILY",ctx,data,statData,void 0,config.inGraphDataFontFamily,i,l,{nullValue:!0}),ctx.fillStyle=setOptionValue("INGRAPHDATAFONTCOLOR",ctx,data,statData,void 0,config.inGraphDataFontColor,i,l,{nullValue:!0}),a=statData[i][l].yPosBottom,t=statData[i][l].yPosTop,ctx.beginPath();var s=0,r=0;1==setOptionValue("INGRAPHDATAXPOSITION",ctx,data,statData,void 0,config.inGraphDataXPosition,i,l,{nullValue:!0})?r=statData[i][l].xPosLeft+setOptionValue("INGRAPHDATAPADDINGX",ctx,data,statData,void 0,config.inGraphDataPaddingX,i,l,{nullValue:!0}):2==setOptionValue("INGRAPHDATAXPOSITION",ctx,data,statData,void 0,config.inGraphDataXPosition,i,l,{nullValue:!0})?r=statData[i][l].xPosLeft+barWidth/2+setOptionValue("INGRAPHDATAPADDINGX",ctx,data,statData,void 0,config.inGraphDataPaddingX,i,l,{nullValue:!0}):3==setOptionValue("INGRAPHDATAXPOSITION",ctx,data,statData,void 0,config.inGraphDataXPosition,i,l,{nullValue:!0})&&(r=statData[i][l].xPosLeft+barWidth+setOptionValue("INGRAPHDATAPADDINGX",ctx,data,statData,void 0,config.inGraphDataPaddingX,i,l,{nullValue:!0})),1==setOptionValue("INGRAPHDATAYPOSITION",ctx,data,statData,void 0,config.inGraphDataYPosition,i,l,{nullValue:!0})?s=statData[i][l].yPosBottom-setOptionValue("INGRAPHDATAPADDINGY",ctx,data,statData,void 0,config.inGraphDataPaddingY,i,l,{nullValue:!0}):2==setOptionValue("INGRAPHDATAYPOSITION",ctx,data,statData,void 0,config.inGraphDataYPosition,i,l,{nullValue:!0})?s=(statData[i][l].yPosBottom+statData[i][l].yPosTop)/2-setOptionValue("INGRAPHDATAPADDINGY",ctx,data,statData,void 0,config.inGraphDataPaddingY,i,l,{nullValue:!0}):3==setOptionValue("INGRAPHDATAYPOSITION",ctx,data,statData,void 0,config.inGraphDataYPosition,i,l,{nullValue:!0})&&(s=statData[i][l].yPosTop-setOptionValue("INGRAPHDATAPADDINGY",ctx,data,statData,void 0,config.inGraphDataPaddingY,i,l,{nullValue:!0})),ctx.translate(r,s);var d=tmplbis(setOptionValue("INGRAPHDATATMPL",ctx,data,statData,void 0,config.inGraphDataTmpl,i,l,{nullValue:!0}),statData[i][l],config);ctx.rotate(setOptionValue("INGRAPHDATAROTATE",ctx,data,statData,void 0,config.inGraphDataRotate,i,l,{nullValue:!0})*(Math.PI/180)),ctx.fillTextMultiLine(d,0,0,ctx.textBaseline,setOptionValue("INGRAPHDATAFONTSIZE",ctx,data,statData,void 0,config.inGraphDataFontSize,i,l,{nullValue:!0}),!0),ctx.restore()}e>=1&&"function"==typeof drawMath&&drawMath(ctx,config,data,msr,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,scaleHop:scaleHop,zeroY:zeroY,calculatedScale:calculatedScale,calculateOffset:calculateOffset,barWidth:barWidth}),msr.legendMsr.dispLegend&&drawLegend(msr.legendMsr,data,config,ctx,"Bar")}function roundRect(e,a,t,i,l,n,o,s,r){e.beginPath(),e.setLineDash(lineStyleFn(setOptionValue("STROKESTYLE",e,data,statData,data.datasets[s].datasetStrokeStyle,config.datasetStrokeStyle,s,r,{nullvalue:null}))),e.moveTo(a+o,t),e.lineTo(a+i-o,t),e.quadraticCurveTo(a+i,t,a+i,t),e.lineTo(a+i,t-l+o),e.quadraticCurveTo(a+i,t-l,a+i-o,t-l),e.lineTo(a+o,t-l),e.quadraticCurveTo(a,t-l,a,t-l+o),e.lineTo(a,t),e.quadraticCurveTo(a,t,a+o,t),n&&e.stroke(),e.closePath(),e.fill(),e.setLineDash([])}function drawScale(){ctx.lineWidth=config.scaleLineWidth,ctx.strokeStyle=config.scaleLineColor,ctx.setLineDash(lineStyleFn(config.scaleLineStyle)),ctx.beginPath(),ctx.moveTo(yAxisPosX-config.scaleTickSizeLeft,xAxisPosY),ctx.lineTo(yAxisPosX+msr.availableWidth+config.scaleTickSizeRight,xAxisPosY),ctx.stroke(),ctx.setLineDash([]),ctx.setLineDash(lineStyleFn(config.scaleGridLineStyle));for(var e=0;e<data.labels.length;e++)ctx.beginPath(),ctx.moveTo(yAxisPosX+e*valueHop,xAxisPosY+config.scaleTickSizeBottom),ctx.lineWidth=config.scaleGridLineWidth,ctx.strokeStyle=config.scaleGridLineColor,config.scaleShowGridLines&&e>0&&e%config.scaleXGridLinesStep==0?ctx.lineTo(yAxisPosX+e*valueHop,xAxisPosY-msr.availableHeight-config.scaleTickSizeTop):ctx.lineTo(yAxisPosX+e*valueHop,xAxisPosY),ctx.stroke();ctx.setLineDash([]),ctx.lineWidth=config.scaleLineWidth,ctx.strokeStyle=config.scaleLineColor,ctx.setLineDash(lineStyleFn(config.scaleLineStyle)),ctx.beginPath(),ctx.moveTo(yAxisPosX,xAxisPosY+config.scaleTickSizeBottom),ctx.lineTo(yAxisPosX,xAxisPosY-msr.availableHeight-config.scaleTickSizeTop),ctx.stroke(),ctx.setLineDash([]),ctx.setLineDash(lineStyleFn(config.scaleGridLineStyle));for(var a=0;a<calculatedScale.steps;a++)ctx.beginPath(),ctx.moveTo(yAxisPosX-config.scaleTickSizeLeft,xAxisPosY-(a+1)*scaleHop),ctx.lineWidth=config.scaleGridLineWidth,ctx.strokeStyle=config.scaleGridLineColor,config.scaleShowGridLines&&(a+1)%config.scaleYGridLinesStep==0?ctx.lineTo(yAxisPosX+msr.availableWidth+config.scaleTickSizeRight,xAxisPosY-(a+1)*scaleHop):ctx.lineTo(yAxisPosX,xAxisPosY-(a+1)*scaleHop),ctx.stroke();ctx.setLineDash([])}function drawLabels(){if(ctx.font=config.scaleFontStyle+" "+config.scaleFontSize+"px "+config.scaleFontFamily,(config.xAxisTop||config.xAxisBottom)&&(ctx.textBaseline="top",msr.rotateLabels>90?(ctx.save(),ctx.textAlign="left"):msr.rotateLabels>0?(ctx.save(),ctx.textAlign="right"):ctx.textAlign="center",ctx.fillStyle=config.scaleFontColor,config.xAxisBottom))for(var e=0;e<data.labels.length;e++)ctx.save(),msr.rotateLabels>0?(ctx.translate(yAxisPosX+e*valueHop+valueHop/2-msr.highestXLabel/2,msr.xLabelPos),ctx.rotate(-(msr.rotateLabels*(Math.PI/180))),ctx.fillTextMultiLine(fmtChartJS(config,data.labels[e],config.fmtXLabel),0,0,ctx.textBaseline,config.scaleFontSize,!0)):ctx.fillTextMultiLine(fmtChartJS(config,data.labels[e],config.fmtXLabel),yAxisPosX+e*valueHop+valueHop/2,msr.xLabelPos,ctx.textBaseline,config.scaleFontSize,!0),ctx.restore();ctx.textAlign="right",ctx.textBaseline="middle";for(var a=config.showYAxisMin?-1:0;a<calculatedScale.steps;a++)config.scaleShowLabels&&(config.yAxisLeft&&(ctx.textAlign="right",ctx.fillTextMultiLine(calculatedScale.labels[a+1],yAxisPosX-(config.scaleTickSizeLeft+config.yAxisSpaceRight),xAxisPosY-(a+1)*scaleHop,ctx.textBaseline,config.scaleFontSize,!0)),config.yAxisRight&&!valueBounds.dbAxis&&(ctx.textAlign="left",ctx.fillTextMultiLine(calculatedScale.labels[a+1],yAxisPosX+msr.availableWidth+(config.scaleTickSizeRight+config.yAxisSpaceRight),xAxisPosY-(a+1)*scaleHop,ctx.textBaseline,config.scaleFontSize,!0)));if(config.yAxisRight&&valueBounds.dbAxis)for(var a=config.showYAxisMin?-1:0;a<calculatedScale2.steps;a++)config.scaleShowLabels&&(ctx.textAlign="left",ctx.fillTextMultiLine(calculatedScale2.labels[a+1],yAxisPosX+msr.availableWidth+(config.scaleTickSizeRight+config.yAxisSpaceRight),xAxisPosY-(a+1)*scaleHop2,ctx.textBaseline,config.scaleFontSize,!0))}function getValueBounds(){for(var upperValue=-Number.MAX_VALUE,lowerValue=Number.MAX_VALUE,upperValue2=-Number.MAX_VALUE,lowerValue2=Number.MAX_VALUE,secondAxis=!1,firstAxis=!1,i=0;i<data.datasets.length;i++){var mathFctName=data.datasets[i].drawMathDeviation,mathValueHeight=0;if("function"==typeof eval(mathFctName)){var parameter={data:data,datasetNr:i};mathValueHeight=window[mathFctName](parameter)}for(var j=0;j<data.datasets[i].data.length;j++)"undefined"!=typeof data.datasets[i].data[j]&&(2==data.datasets[i].axis?(secondAxis=!0,1*data.datasets[i].data[j]+mathValueHeight>upperValue2&&(upperValue2=1*data.datasets[i].data[j]+mathValueHeight),1*data.datasets[i].data[j]-mathValueHeight<lowerValue2&&(lowerValue2=1*data.datasets[i].data[j]-mathValueHeight)):(firstAxis=!0,1*data.datasets[i].data[j]+mathValueHeight>upperValue&&(upperValue=1*data.datasets[i].data[j]+mathValueHeight),1*data.datasets[i].data[j]-mathValueHeight<lowerValue&&(lowerValue=1*data.datasets[i].data[j]-mathValueHeight)))}lowerValue>upperValue&&(upperValue=0,lowerValue=0),Math.abs(upperValue-lowerValue)<config.zeroValue&&(Math.abs(upperValue)<config.zeroValue&&(upperValue=.9),upperValue>0?(upperValue=1.1*upperValue,lowerValue=.9*lowerValue):(upperValue=.9*upperValue,lowerValue=1.1*lowerValue)),"function"==typeof config.graphMin?lowerValue=setOptionValue("GRAPHMIN",ctx,data,statData,void 0,config.graphMin,-1,-1,{nullValue:!0}):isNaN(config.graphMin)||(lowerValue=config.graphMin),"function"==typeof config.graphMax?upperValue=setOptionValue("GRAPHMAX",ctx,data,statData,void 0,config.graphMax,-1,-1,{nullValue:!0}):isNaN(config.graphMax)||(upperValue=config.graphMax),secondAxis&&(lowerValue2>upperValue2&&(upperValue2=0,lowerValue2=0),Math.abs(upperValue2-lowerValue2)<config.zeroValue&&(Math.abs(upperValue2)<config.zeroValue&&(upperValue2=.9),upperValue2>0?(upperValue2=1.1*upperValue2,lowerValue2=.9*lowerValue2):(upperValue2=.9*upperValue2,lowerValue2=1.1*lowerValue2)),"function"==typeof config.graphMin2?lowerValue2=setOptionValue("GRAPHMIN",ctx,data,statData,void 0,config.graphMin2,-1,-1,{nullValue:!0}):isNaN(config.graphMin2)||(lowerValue2=config.graphMin2),"function"==typeof config.graphMax2?upperValue2=setOptionValue("GRAPHMAX",ctx,data,statData,void 0,config.graphMax2,-1,-1,{nullValue:!0}):isNaN(config.graphMax2)||(upperValue2=config.graphMax2)),!firstAxis&&secondAxis&&(upperValue=upperValue2,lowerValue=lowerValue2),labelHeight=config.scaleFontSize,scaleHeight=msr.availableHeight;var maxSteps=Math.floor(scaleHeight/(.66*labelHeight)),minSteps=Math.floor(scaleHeight/labelHeight*.5);return{maxValue:upperValue,minValue:lowerValue,maxValue2:upperValue2,minValue2:lowerValue2,dbAxis:secondAxis,maxSteps:maxSteps,minSteps:minSteps}}var maxSize,scaleHop,scaleHop2,calculatedScale,calculatedScale2,labelHeight,scaleHeight,valueBounds,labelTemplateString,labelTemplateString2,valueHop,widestXLabel,xAxisLength,yAxisPosX,xAxisPosY,barWidth,rotateLabels=0,msr;if(ctx.tpchart="Bar",init_and_start(ctx,data,config)){for(var statData=initPassVariableData_part1(data,config,ctx),nrOfBars=data.datasets.length,i=0;i<data.datasets.length;i++)"Line"==data.datasets[i].type?(statData[i][0].tpchart="Line",nrOfBars--):statData[i][0].tpchart="Bar";var bufferDataset,l=0;if(msr=setMeasures(data,config,ctx,height,width,"nihil",[""],!0,!1,!0,!0,!0,"Bar"),valueBounds=getValueBounds(),valueBounds.minValue<=0&&(config.logarithmic=!1),valueBounds.maxSteps>0&&valueBounds.minSteps>0){config.logarithmic!==!1&&valueBounds.minValue<=0&&(config.logarithmic=!1),config.logarithmic2!==!1&&valueBounds.minValue2<=0&&(config.logarithmic2=!1);var OrderOfMagnitude=calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.maxValue)+1))-calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.minValue)));("fuzzy"==config.logarithmic&&4>OrderOfMagnitude||config.scaleOverride)&&(config.logarithmic=!1);var OrderOfMagnitude2=calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.maxValue2)+1))-calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.minValue2)));if(("fuzzy"==config.logarithmic2&&4>OrderOfMagnitude2||config.scaleOverride2)&&(config.logarithmic2=!1),labelTemplateString=config.scaleShowLabels?config.scaleLabel:"",labelTemplateString2=config.scaleShowLabels2?config.scaleLabel2:"",config.scaleOverride){var scaleStartValue=setOptionValue("SCALESTARTVALUE",ctx,data,statData,void 0,config.scaleStartValue,-1,-1,{nullValue:!0}),scaleSteps=setOptionValue("SCALESTEPS",ctx,data,statData,void 0,config.scaleSteps,-1,-1,{nullValue:!0}),scaleStepWidth=setOptionValue("SCALESTEPWIDTH",ctx,data,statData,void 0,config.scaleStepWidth,-1,-1,{nullValue:!0});calculatedScale={steps:scaleSteps,stepValue:scaleStepWidth,graphMin:scaleStartValue,graphMax:scaleStartValue+scaleSteps*scaleStepWidth,labels:[]},populateLabels(1,config,labelTemplateString,calculatedScale.labels,calculatedScale.steps,scaleStartValue,calculatedScale.graphMax,scaleStepWidth)}else calculatedScale=calculateScale(1,config,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue,valueBounds.minValue,labelTemplateString);if(valueBounds.dbAxis)if(config.scaleOverride2){var scaleStartValue2=setOptionValue("SCALESTARTVALUE2",ctx,data,statData,void 0,config.scaleStartValue2,-1,-1,{nullValue:!0}),scaleSteps2=setOptionValue("SCALESTEPS2",ctx,data,statData,void 0,config.scaleSteps2,-1,-1,{nullValue:!0}),scaleStepWidth2=setOptionValue("SCALESTEPWIDTH2",ctx,data,statData,void 0,config.scaleStepWidth2,-1,-1,{nullValue:!0});calculatedScale2={steps:scaleSteps2,stepValue:scaleStepWidth2,graphMin:scaleStartValue2,graphMax:scaleStartValue2+scaleSteps2*scaleStepWidth2,labels:[]},populateLabels(2,config,labelTemplateString2,calculatedScale2.labels,calculatedScale2.steps,scaleStartValue2,calculatedScale2.graphMax,scaleStepWidth2)}else calculatedScale2=calculateScale(2,config,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue2,valueBounds.minValue2,labelTemplateString);else calculatedScale2={steps:0,stepValue:0,graphMin:0,graphMax:0,labels:null};msr=setMeasures(data,config,ctx,height,width,calculatedScale.labels,calculatedScale2.labels,!0,!1,!0,!0,!0,"Bar");var prevHeight=msr.availableHeight;msr.availableHeight=msr.availableHeight-config.scaleTickSizeBottom-config.scaleTickSizeTop,msr.availableWidth=msr.availableWidth-config.scaleTickSizeLeft-config.scaleTickSizeRight,scaleHop=Math.floor(msr.availableHeight/calculatedScale.steps),scaleHop2=Math.floor(msr.availableHeight/calculatedScale2.steps),valueHop=Math.floor(msr.availableWidth/data.labels.length),(0==valueHop||config.fullWidthGraph)&&(valueHop=msr.availableWidth/data.labels.length),msr.clrwidth=msr.clrwidth-(msr.availableWidth-data.labels.length*valueHop),msr.availableWidth=data.labels.length*valueHop,msr.availableHeight=calculatedScale.steps*scaleHop,msr.xLabelPos+=config.scaleTickSizeBottom+config.scaleTickSizeTop-(prevHeight-msr.availableHeight),msr.clrheight+=config.scaleTickSizeBottom+config.scaleTickSizeTop-(prevHeight-msr.availableHeight),yAxisPosX=msr.leftNotUsableSize+config.scaleTickSizeLeft,xAxisPosY=msr.topNotUsableSize+msr.availableHeight+config.scaleTickSizeTop,barWidth=(valueHop-2*config.scaleGridLineWidth-2*config.barValueSpacing-(config.barDatasetSpacing*nrOfBars-1)-(config.barStrokeWidth/2*nrOfBars-1))/nrOfBars,barWidth>=0&&1>=barWidth&&(barWidth=1),0>barWidth&&barWidth>=-1&&(barWidth=-1);var zeroY=0,zeroY2=0;if(valueBounds.minValue<0)var zeroY=calculateOffset(config.logarithmic,0,calculatedScale,scaleHop);if(valueBounds.minValue2<0)var zeroY2=calculateOffset(config.logarithmic2,0,calculatedScale2,scaleHop2);initPassVariableData_part2(statData,data,config,ctx,{msr:msr,yAxisPosX:yAxisPosX,xAxisPosY:xAxisPosY,valueHop:valueHop,barWidth:barWidth,zeroY:zeroY,zeroY2:zeroY2,calculatedScale:calculatedScale,calculatedScale2:calculatedScale2,scaleHop:scaleHop,scaleHop2:scaleHop2}),drawLabels(),animationLoop(config,drawScale,drawBars,ctx,msr.clrx,msr.clry,msr.clrwidth,msr.clrheight,yAxisPosX+msr.availableWidth/2,xAxisPosY-msr.availableHeight/2,yAxisPosX,xAxisPosY,data)}else testRedraw(ctx,data,config)}},HorizontalBar=function(e,a,t){function i(i){for(var n=0;n<e.datasets.length;n++)for(var o=0;o<e.datasets[n].data.length;o++){t.lineWidth=a.barStrokeWidth;var s=animationCorrection(i,e,a,n,o,1).animVal;s>1&&(s-=1);var r=s*v[n][o].barWidth+a.barStrokeWidth/2;t.fillStyle=setOptionValue("COLOR",t,e,v,e.datasets[n].fillColor,a.defaultFillColor,n,o,{animationValue:s,xPosLeft:v[n][o].xPosLeft,yPosBottom:v[n][o].yPosBottom,xPosRight:v[n][o].xPosLeft+r,yPosTop:v[n][o].yPosBottom}),t.strokeStyle=setOptionValue("STROKECOLOR",t,e,v,e.datasets[n].strokeColor,a.defaultStrokeColor,n,o,{nullvalue:null}),"undefined"!=typeof e.datasets[n].data[o]&&l(t,v[n][o].yPosTop,v[n][o].xPosLeft,S,r,a.barShowStroke,a.barBorderRadius,0,n,o)}if(i>=a.animationStopValue)for(var n=0;n<e.datasets.length;n++)for(var o=0;o<e.datasets[n].data.length;o++)if("undefined"!=typeof e.datasets[n].data[o]&&(setOptionValue("ANNOTATEDISPLAY",t,e,v,void 0,a.annotateDisplay,n,o,{nullValue:!0})&&(jsGraphAnnotate[t.ChartNewId][jsGraphAnnotate[t.ChartNewId].length]=["RECT",n,o,v]),setOptionValue("INGRAPHDATASHOW",t,e,v,void 0,a.inGraphDataShow,n,o,{nullValue:!0}))){t.save(),t.textAlign=setOptionValue("INGRAPHDATAALIGN",t,e,v,void 0,a.inGraphDataAlign,n,o,{nullValue:!0}),t.textBaseline=setOptionValue("INGRAPHDATAVALIGN",t,e,v,void 0,a.inGraphDataVAlign,n,o,{nullValue:!0}),t.font=setOptionValue("INGRAPHDATAFONTSTYLE",t,e,v,void 0,a.inGraphDataFontStyle,n,o,{nullValue:!0})+" "+setOptionValue("INGRAPHDATAFONTSIZE",t,e,v,void 0,a.inGraphDataFontSize,n,o,{nullValue:!0})+"px "+setOptionValue("INGRAPHDATAFONTFAMILY",t,e,v,void 0,a.inGraphDataFontFamily,n,o,{nullValue:!0}),t.fillStyle=setOptionValue("INGRAPHDATAFONTCOLOR",t,e,v,void 0,a.inGraphDataFontColor,n,o,{nullValue:!0}),t.beginPath();var d=0,c=0;1==setOptionValue("INGRAPHDATAYPOSITION",t,e,v,void 0,a.inGraphDataYPosition,n,o,{nullValue:!0})?d=v[n][o].yPosTop-setOptionValue("INGRAPHDATAPADDINGY",t,e,v,void 0,a.inGraphDataPaddingY,n,o,{nullValue:!0})+S:2==setOptionValue("INGRAPHDATAYPOSITION",t,e,v,void 0,a.inGraphDataYPosition,n,o,{nullValue:!0})?d=v[n][o].yPosTop+S/2-setOptionValue("INGRAPHDATAPADDINGY",t,e,v,void 0,a.inGraphDataPaddingY,n,o,{nullValue:!0}):3==setOptionValue("INGRAPHDATAYPOSITION",t,e,v,void 0,a.inGraphDataYPosition,n,o,{nullValue:!0})&&(d=v[n][o].yPosTop-setOptionValue("INGRAPHDATAPADDINGY",t,e,v,void 0,a.inGraphDataPaddingY,n,o,{nullValue:!0})),1==setOptionValue("INGRAPHDATAXPOSITION",t,e,v,void 0,a.inGraphDataXPosition,n,o,{nullValue:!0})?c=v[n][o].xPosLeft+setOptionValue("INGRAPHDATAPADDINGX",t,e,v,void 0,a.inGraphDataPaddingX,n,o,{nullValue:!0}):2==setOptionValue("INGRAPHDATAXPOSITION",t,e,v,void 0,a.inGraphDataXPosition,n,o,{nullValue:!0})?c=(v[n][o].xPosLeft+v[n][o].xPosRight)/2+setOptionValue("INGRAPHDATAPADDINGX",t,e,v,void 0,a.inGraphDataPaddingX,n,o,{nullValue:!0}):3==setOptionValue("INGRAPHDATAXPOSITION",t,e,v,void 0,a.inGraphDataXPosition,n,o,{nullValue:!0})&&(c=v[n][o].xPosRight+setOptionValue("INGRAPHDATAPADDINGX",t,e,v,void 0,a.inGraphDataPaddingX,n,o,{nullValue:!0})),t.translate(c,d);var u=tmplbis(setOptionValue("INGRAPHDATATMPL",t,e,v,void 0,a.inGraphDataTmpl,n,o,{nullValue:!0}),v[n][o],a);t.rotate(setOptionValue("INGRAPHDATAROTATE",t,e,v,void 0,a.inGraphDataRotate,n,o,{nullValue:!0})*(Math.PI/180)),t.fillTextMultiLine(u,0,0,t.textBaseline,setOptionValue("INGRAPHDATAFONTSIZE",t,e,v,void 0,a.inGraphDataFontSize,n,o,{nullValue:!0}),!0),t.restore()
}m.legendMsr.dispLegend&&drawLegend(m.legendMsr,e,a,t,"HorizontalBar")}function l(t,i,l,n,o,s,r,d,c,u){t.beginPath(),t.moveTo(l+d,i+r),t.lineTo(l+d,i+n-r),t.quadraticCurveTo(l+d,i+n,l+d,i+n),t.lineTo(l+o-r,i+n),t.quadraticCurveTo(l+o,i+n,l+o,i+n-r),t.lineTo(l+o,i+r),t.quadraticCurveTo(l+o,i,l+o-r,i),t.lineTo(l+d,i),t.quadraticCurveTo(l+d,i,l+d,i+r),s&&(t.setLineDash(lineStyleFn(setOptionValue("STROKESTYLE",t,e,v,e.datasets[c].datasetStrokeStyle,a.datasetStrokeStyle,c,u,{nullvalue:null}))),t.stroke(),t.setLineDash([])),t.closePath(),t.fill()}function n(){t.lineWidth=a.scaleLineWidth,t.strokeStyle=a.scaleLineColor,t.setLineDash(lineStyleFn(a.scaleLineStyle)),t.beginPath(),t.moveTo(f-a.scaleTickSizeLeft,A),t.lineTo(f+m.availableWidth+a.scaleTickSizeRight,A),t.stroke(),t.setLineDash([]),t.setLineDash(lineStyleFn(a.scaleGridLineStyle));for(var i=a.showYAxisMin?-1:0;i<d.steps;i++)i>=0&&(t.beginPath(),t.moveTo(f+i*g,A+a.scaleTickSizeBottom),t.lineWidth=a.scaleGridLineWidth,t.strokeStyle=a.scaleGridLineColor,a.scaleShowGridLines&&i>0&&i%a.scaleXGridLinesStep==0?t.lineTo(f+i*g,A-m.availableHeight-a.scaleTickSizeTop):t.lineTo(f+i*g,A),t.stroke());t.setLineDash([]),t.lineWidth=a.scaleLineWidth,t.strokeStyle=a.scaleLineColor,t.setLineDash(lineStyleFn(a.scaleLineStyle)),t.beginPath(),t.moveTo(f,A+a.scaleTickSizeBottom),t.lineTo(f,A-m.availableHeight-a.scaleTickSizeTop),t.stroke(),t.setLineDash([]),t.setLineDash(lineStyleFn(a.scaleGridLineStyle));for(var l=0;l<e.labels.length;l++)t.beginPath(),t.moveTo(f-a.scaleTickSizeLeft,A-(l+1)*r),t.lineWidth=a.scaleGridLineWidth,t.strokeStyle=a.scaleGridLineColor,a.scaleShowGridLines&&(l+1)%a.scaleYGridLinesStep==0?t.lineTo(f+m.availableWidth+a.scaleTickSizeRight,A-(l+1)*r):t.lineTo(f,A-(l+1)*r),t.stroke();t.setLineDash([])}function o(){if(t.font=a.scaleFontStyle+" "+a.scaleFontSize+"px "+a.scaleFontFamily,a.scaleShowLabels&&(a.xAxisTop||a.xAxisBottom)&&(t.textBaseline="top",m.rotateLabels>90?(t.save(),t.textAlign="left"):m.rotateLabels>0?(t.save(),t.textAlign="right"):t.textAlign="center",t.fillStyle=a.scaleFontColor,a.xAxisBottom))for(var i=a.showYAxisMin?-1:0;i<d.steps;i++)t.save(),m.rotateLabels>0?(t.translate(f+(i+1)*g-m.highestXLabel/2,m.xLabelPos),t.rotate(-(m.rotateLabels*(Math.PI/180))),t.fillTextMultiLine(d.labels[i+1],0,0,t.textBaseline,a.scaleFontSize,!0)):t.fillTextMultiLine(d.labels[i+1],f+(i+1)*g,m.xLabelPos,t.textBaseline,a.scaleFontSize,!0),t.restore();t.textAlign="right",t.textBaseline="middle";for(var l=0;l<e.labels.length;l++)a.yAxisLeft&&(t.textAlign="right",t.fillTextMultiLine(fmtChartJS(a,e.labels[l],a.fmtXLabel),f-(a.scaleTickSizeLeft+a.yAxisSpaceRight),A-l*r-r/2,t.textBaseline,a.scaleFontSize,!0)),a.yAxisRight&&(t.textAlign="left",t.fillTextMultiLine(fmtChartJS(a,e.labels[l],a.fmtXLabel),f+m.availableWidth+(a.scaleTickSizeRight+a.yAxisSpaceRight),A-l*r-r/2,t.textBaseline,a.scaleFontSize,!0))}function s(){for(var i=-Number.MAX_VALUE,l=Number.MAX_VALUE,n=0;n<e.datasets.length;n++)for(var o=0;o<e.datasets[n].data.length;o++)"undefined"!=typeof e.datasets[n].data[o]&&(1*e.datasets[n].data[o]>i&&(i=1*e.datasets[n].data[o]),1*e.datasets[n].data[o]<l&&(l=1*e.datasets[n].data[o]));l>i&&(i=0,l=0),Math.abs(i-l)<a.zeroValue&&(Math.abs(i)<a.zeroValue&&(i=.9),i>0?(i=1.1*i,l=.9*l):(i=.9*i,l=1.1*l)),"function"==typeof a.graphMin?l=setOptionValue("GRAPHMIN",t,e,v,void 0,a.graphMin,-1,-1,{nullValue:!0}):isNaN(a.graphMin)||(l=a.graphMin),"function"==typeof a.graphMax?i=setOptionValue("GRAPHMAX",t,e,v,void 0,a.graphMax,-1,-1,{nullValue:!0}):isNaN(a.graphMax)||(i=a.graphMax),c=a.scaleFontSize,u=m.availableHeight;var s=Math.floor(u/(.66*c)),r=Math.floor(u/c*.5);return{maxValue:i,minValue:l,maxSteps:s,minSteps:r}}var r,d,c,u,h,p,g,f,A,S,m;if(t.tpchart="HorizontalBar",init_and_start(t,e,a)){a.reverseOrder&&"undefined"==typeof t.reversed&&(t.reversed=!0,e=reverseData(e));var v=initPassVariableData_part1(e,a,t);if(m=setMeasures(e,a,t,height,width,"nihil",[""],!0,!0,!0,!0,!0,"StackedBar"),h=s(),h.minValue<=0&&(a.logarithmic=!1),h.maxSteps>0&&h.minSteps>0){if(a.logarithmic!==!1&&h.minValue<=0&&(a.logarithmic=!1),p=a.scaleShowLabels?a.scaleLabel:"",a.scaleOverride){var x=setOptionValue("SCALESTARTVALUE",t,e,v,void 0,a.scaleStartValue,-1,-1,{nullValue:!0}),P=setOptionValue("SCALESTEPS",t,e,v,void 0,a.scaleSteps,-1,-1,{nullValue:!0}),D=setOptionValue("SCALESTEPWIDTH",t,e,v,void 0,a.scaleStepWidth,-1,-1,{nullValue:!0});d={steps:P,stepValue:D,graphMin:x,graphMax:x+P*D,labels:[]},populateLabels(1,a,p,d.labels,d.steps,x,d.graphMax,D),m=setMeasures(e,a,t,height,width,d.labels,null,!0,!0,!0,!0,!0,"HorizontalBar")}else d=calculateScale(1,a,h.maxSteps,h.minSteps,h.maxValue,h.minValue,p),m=setMeasures(e,a,t,height,width,d.labels,null,!0,!0,!0,!0,!0,"HorizontalBar");m.availableHeight=m.availableHeight-a.scaleTickSizeBottom-a.scaleTickSizeTop,m.availableWidth=m.availableWidth-a.scaleTickSizeLeft-a.scaleTickSizeRight,r=Math.floor(m.availableHeight/e.labels.length),g=Math.floor(m.availableWidth/d.steps),(0==g||a.fullWidthGraph)&&(g=m.availableWidth/d.steps),m.clrwidth=m.clrwidth-(m.availableWidth-d.steps*g),m.availableWidth=d.steps*g,m.availableHeight=e.labels.length*r,f=m.leftNotUsableSize+a.scaleTickSizeLeft,A=m.topNotUsableSize+m.availableHeight+a.scaleTickSizeTop,S=(r-2*a.scaleGridLineWidth-2*a.barValueSpacing-(a.barDatasetSpacing*e.datasets.length-1)-(a.barStrokeWidth/2*e.datasets.length-1))/e.datasets.length,S>=0&&1>=S&&(S=1),0>S&&S>=-1&&(S=-1);var V=0;if(h.minValue<0)var V=calculateOffset(a.logarithmic,0,d,g);o(),initPassVariableData_part2(v,e,a,t,{yAxisPosX:f,xAxisPosY:A,barWidth:S,zeroY:V,scaleHop:r,valueHop:g,calculatedScale:d}),animationLoop(a,n,i,t,m.clrx,m.clry,m.clrwidth,m.clrheight,f+m.availableWidth/2,A-m.availableHeight/2,f,A,e)}else testRedraw(t,e,a)}},requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),cache={}};